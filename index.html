<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>TAIMIC | Global Wealth Management</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- FontAwesome -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Inter', 'Noto Sans TC', system-ui, -apple-system, BlinkMacSystemFont,
      'Segoe UI', sans-serif;
      background-color: #f5f5f5;
      color: #222222;
      -webkit-font-smoothing: antialiased;
    }

    :root {
      --brand-blue: #0066cc;
      --brand-dark: #004c99;
      --text-main: #222222;
    }

    /* ===== Clock Logo (Header + Footer å…±ç”¨) ===== */
    .logo-clock { width: 44px; height: 44px; }

    .clock-outer {
      fill: none;
      stroke: #dbeafe;
      stroke-width: 2.5;
    }

    .clock-inner {
      fill: #eff6ff;
      stroke: #e5edff;
      stroke-width: 1.5;
    }

    .clock-core {
      fill: url(#clockGradient);
      opacity: 0.98;
    }

    .clock-tick-line {
      stroke: #cbd5f5;
      stroke-width: 1.4;
      stroke-linecap: round;
    }

    .hand {
      stroke-width: 2.6;
      stroke-linecap: round;
      transform-origin: 50% 50%;
    }

    .hand-hour {
      stroke: #1f2933;
      animation: rotateHour 1800s linear infinite;
    }

    .hand-minute {
      stroke: #3b82f6;
      animation: rotateMinute 300s linear infinite;
    }

    .center-dot {
      fill: #ffffff;
      stroke: #3b82f6;
      stroke-width: 2;
    }

    @keyframes rotateHour {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes rotateMinute {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* ===== TSMC style nav ===== */
    .nav-link {
      font-size: 15px;
      font-weight: 500;
      color: #555;
      padding: 0 20px;
      height: 80px;
      display: flex;
      align-items: center;
      border-bottom: 4px solid transparent;
      transition: all 0.2s;
      text-decoration: none;
    }

    .nav-link:hover {
      color: var(--brand-blue);
    }

    .nav-link.active {
      color: #000;
      font-weight: 700;
      border-bottom: 4px solid var(--brand-blue);
    }

    .dropdown-container {
      position: relative;
      height: 100%;
      display: flex;
      align-items: center;
    }

    .dropdown-menu {
      position: absolute;
      top: 70px;
      right: 0;
      background: #ffffff;
      border: 1px solid #eee;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
      min-width: 170px;
      z-index: 50;
      border-radius: 2px;
    }

    .dropdown-item {
      padding: 12px 20px;
      font-size: 14px;
      color: #555;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background 0.2s, color 0.2s;
    }

    .dropdown-item:hover {
      background-color: #f8f9fa;
      color: var(--brand-blue);
    }

    .dropdown-item.active {
      font-weight: 700;
      color: var(--brand-blue);
    }

    .btn-corp {
      background-color: var(--brand-blue);
      color: #fff;
      font-size: 14px;
      font-weight: 600;
      padding: 10px 24px;
      border-radius: 2px;
      transition: background 0.2s;
    }

    .btn-corp:hover {
      background-color: var(--brand-dark);
    }

    .scan-overlay {
      background: linear-gradient(to bottom,
      transparent,
      rgba(0, 102, 204, 0.15),
      transparent);
      animation: scan 2s linear infinite;
    }

    @keyframes scan {
      0%   { transform: translateY(-100%); }
      100% { transform: translateY(100%); }
    }

    .animate-fade-in {
      animation: fadeIn 0.5s ease-out forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(4px); }
      to   { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body class="flex flex-col min-h-screen">

<!-- ================= HEADER ================= -->
<header class="bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm h-[80px]">
  <div class="max-w-[1440px] mx-auto px-6 h-full flex justify-between items-center">

    <!-- Logo -->
    <div class="flex items-center gap-4 cursor-pointer">
      <svg class="logo-clock" viewBox="0 0 100 100">
        <defs>
          <linearGradient id="clockGradient" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#bfdbfe"/>
            <stop offset="100%" stop-color="#60a5fa"/>
          </linearGradient>
        </defs>
        <circle cx="50" cy="50" r="46" class="clock-outer"/>
        <circle cx="50" cy="50" r="38" class="clock-inner"/>
        <circle cx="50" cy="50" r="30" class="clock-core"/>
        <line x1="50" y1="12" x2="50" y2="18" class="clock-tick-line"/>
        <line x1="88" y1="50" x2="82" y2="50" class="clock-tick-line"/>
        <line x1="50" y1="82" x2="50" y2="88" class="clock-tick-line"/>
        <line x1="18" y1="50" x2="12" y2="50" class="clock-tick-line"/>
        <line x1="50" y1="50" x2="50" y2="30" class="hand hand-hour"/>
        <line x1="50" y1="50" x2="66" y2="34" class="hand hand-minute"/>
        <circle cx="50" cy="50" r="3.2" class="center-dot"/>
      </svg>

      <div class="flex flex-col justify-center">
        <span class="text-[22px] font-[700] tracking-tight text-[#0066cc] leading-none">
          TAIMIC
        </span>
        <span class="text-[10px] font-[600] tracking-[0.2em] text-gray-500 mt-1 uppercase">
          GLOBAL WEALTH
        </span>
      </div>
    </div>

    <!-- Nav -->
    <nav class="hidden lg:flex h-full items-center space-x-4">
      <a href="#" class="nav-link active" data-i18n="nav.overview">è³‡ç”¢ç¸½è¦½</a>
      <a href="#" class="nav-link" data-i18n="nav.tax">ç¨…å‹™åˆè¦</a>
      <a href="#" class="nav-link" data-i18n="nav.estate">å®¶æ—å‚³æ‰¿</a>
      <a href="#" class="nav-link" data-i18n="nav.reports">åˆ†æå ±å‘Š</a>
    </nav>

    <!-- Right side -->
    <div class="flex items-center gap-6 h-full">

      <!-- Currency -->
      <div
        class="hidden sm:flex items-center text-xs font-medium text-gray-500 border border-gray-200 rounded-full overflow-hidden">
        <button onclick="setCurrency('USD')" id="btn-usd"
                class="px-3 py-2 hover:bg-gray-50 transition-colors">
          USD
        </button>
        <div class="w-[1px] h-4 bg-gray-200"></div>
        <button onclick="setCurrency('TWD')" id="btn-twd"
                class="px-3 py-2 bg-gray-100 text-[#0066cc] font-bold">
          TWD
        </button>
      </div>

      <!-- Language -->
      <div class="dropdown-container cursor-pointer h-full">
        <button id="lang-toggle" type="button"
                class="flex items-center gap-2 text-gray-600 hover:text-[#0066cc] transition-colors">
          <i class="fa-solid fa-globe text-lg"></i>
          <i class="fa-solid fa-caret-down text-xs"></i>
        </button>
        <div class="dropdown-menu hidden" id="lang-menu">
          <div class="dropdown-item active" onclick="changeLang('zh')" id="opt-zh">ç¹é«”ä¸­æ–‡</div>
          <div class="dropdown-item" onclick="changeLang('en')" id="opt-en">English</div>
        </div>
      </div>

      <!-- User -->
      <div class="dropdown-container cursor-pointer h-full border-l border-gray-200 pl-6">
        <button id="user-toggle" type="button"
                class="w-10 h-10 bg-[#f0f0f0] text-gray-600 rounded-full flex items-center justify-center hover:bg-[#0066cc] hover:text-white transition-colors">
          <i class="fa-solid fa-user text-lg"></i>
        </button>
        <div class="dropdown-menu hidden" id="user-menu">
          <div class="dropdown-item" onclick="openAuthModal('login')">
            <i class="fa-solid fa-right-to-bracket"></i>
            <span data-i18n="user.login">ç™»å…¥</span>
          </div>
          <div class="dropdown-item" onclick="openAuthModal('register')">
            <i class="fa-solid fa-user-plus"></i>
            <span data-i18n="user.register">è¨»å†Š</span>
          </div>
          <div class="border-t border-gray-100 my-1"></div>
          <div class="dropdown-item">
            <i class="fa-solid fa-circle-question"></i> <span>Help</span>
          </div>
        </div>
      </div>

    </div>
  </div>
</header>

<!-- ================= HERO ================= -->
<section class="border-b border-gray-200 bg-[#e9ecef]">
  <div class="max-w-[1440px] mx-auto px-6 py-10">
    <div
      class="bg-white shadow-sm border border-gray-200 px-8 py-8 md:px-10 md:py-10 flex flex-col md:flex-row md:items-center md:justify-between gap-8">
      <div>
        <div
          class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-3">
          Global Asset Management / Dashboard
        </div>
        <h1
          class="text-3xl md:text-[32px] font-[700] text-[#222] tracking-tight mb-3"
          data-i18n="page.title">
          è·¨åœ‹è³‡ç”¢æ•´åˆå¹³å°
        </h1>
        <p
          class="text-gray-600 text-sm md:text-[15px] max-w-2xl leading-relaxed"
          data-i18n="page.desc">
          æ•´åˆå°ç£èˆ‡ç¾åœ‹è³‡ç”¢ï¼Œæä¾›å³æ™‚æ·¨å€¼åˆ†æèˆ‡è·¨å¢ƒç¨…å‹™é¢¨éšªæª¢æ¸¬ã€‚
        </p>
      </div>
      <div class="flex flex-col items-start md:items-end gap-3">
        <button onclick="openModal()" class="btn-corp flex items-center gap-2 shadow-sm">
          <i class="fa-solid fa-plus"></i>
          <span data-i18n="btn.add">æ–°å¢è³‡ç”¢</span>
        </button>
        <div class="text-[11px] text-gray-500 flex items-center gap-2">
          <i class="fa-solid fa-shield-halved text-[#0066cc]"></i>
          <span>FATCA / CRS å³æ™‚é¢¨éšªæƒæ</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ================= MAIN ================= -->
<main class="flex-grow py-10">
  <div class="max-w-[1440px] mx-auto px-6 w-full">
    <div class="bg-white border border-gray-200 shadow-sm px-6 md:px-8 lg:px-10 py-8 md:py-10">

      <!-- Stats -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-10">
        <div class="p-6 border border-gray-200 hover:border-[#0066cc] transition-colors bg-white">
          <div class="flex justify-between items-start mb-4">
            <h3 class="text-xs font-bold text-gray-500 uppercase tracking-wider"
                data-i18n="stat.us">ç¾åœ‹ç¸½è³‡ç”¢</h3>
            <span class="text-xl">ğŸ‡ºğŸ‡¸</span>
          </div>
          <div class="text-3xl font-bold text-[#222] font-mono tracking-tight val-display"
               data-usd="482500">...</div>
          <div class="mt-2 text-xs font-medium text-green-600 flex items-center gap-1">
            <i class="fa-solid fa-arrow-trend-up"></i> +4.2% YTD
          </div>
        </div>

        <div class="p-6 border border-gray-200 hover:border-[#0066cc] transition-colors bg-white">
          <div class="flex justify-between items-start mb-4">
            <h3 class="text-xs font-bold text-gray-500 uppercase tracking-wider"
                data-i18n="stat.tw">å°ç£ç¸½è³‡ç”¢</h3>
            <span class="text-xl">ğŸ‡¹ğŸ‡¼</span>
          </div>
          <div class="text-3xl font-bold text-[#222] font-mono tracking-tight val-display"
               data-usd="315200" id="val-tw">...</div>
          <div class="mt-2 text-xs font-medium text-green-600 flex items-center gap-1">
            <i class="fa-solid fa-arrow-trend-up"></i> +1.8% YTD
          </div>
        </div>

        <div class="p-6 bg-[#f0f6fa] border border-blue-100">
          <div class="flex justify-between items-start mb-4">
            <h3 class="text-xs font-bold text-[#0066cc] uppercase tracking-wider"
                data-i18n="stat.global">å…¨çƒç¸½æ·¨å€¼</h3>
            <i class="fa-solid fa-globe text-[#0066cc]"></i>
          </div>
          <div class="text-3xl font-bold text-[#0066cc] font-mono tracking-tight val-display"
               data-usd="797700" id="val-global">...</div>
          <div class="mt-2 text-xs font-medium text-gray-500 flex items-center gap-1">
            <i class="fa-solid fa-shield-check text-[#0066cc]"></i>
            <span data-i18n="stat.safe">éºç”¢ç¨…é¢¨éšªï¼šå®‰å…¨</span>
          </div>
        </div>
      </div>

      <!-- Layout -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-10">

        <!-- Table + Alert -->
        <div class="lg:col-span-2">

          <div id="ai-alert"
               class="hidden mb-8 bg-orange-50 border-l-4 border-orange-500 p-5 flex gap-4 animate-fade-in">
            <div class="text-orange-500 pt-1">
              <i class="fa-solid fa-triangle-exclamation text-lg"></i>
            </div>
            <div>
              <h4 class="font-bold text-[#222] text-sm mb-1" data-i18n="alert.title">
                AI ç¨…å‹™è­¦ç¤ºï¼šåµæ¸¬åˆ°æ½›åœ¨ç”³å ±é¢¨éšª
              </h4>
              <p class="text-sm text-gray-600 leading-relaxed" data-i18n="alert.desc">
                ç³»çµ±æƒæç™¼ç¾ä¸€ç­†æ–°å¢çš„ã€Œé«˜ç¾é‡‘åƒ¹å€¼ä¿å–®ï¼ˆå°ç£ï¼‰ã€ã€‚æ ¹æ“šç¾åœ‹ IRS è¦ç¯„ï¼Œæ­¤è³‡ç”¢å¯èƒ½éœ€å¡«å¯« Form 8938ã€‚
              </p>
              <button
                class="mt-3 text-xs font-bold text-[#0066cc] uppercase tracking-wide hover:underline">
                æª¢è¦–è©³ç´°åˆ†æå ±å‘Š &rarr;
              </button>
            </div>
          </div>

          <div class="flex justify-between items-end mb-4 pb-2 border-b border-gray-200">
            <h3 class="text-lg font-bold text-[#222]" data-i18n="table.title">è³‡ç”¢æŒæœ‰æ¸…å–®</h3>
            <button
              class="text-xs text-[#0066cc] font-bold uppercase hover:text-[#004c99] flex items-center gap-1">
              <i class="fa-solid fa-file-export"></i> Export
            </button>
          </div>

          <div class="overflow-x-auto">
            <table class="w-full text-left">
              <thead>
              <tr>
                <th class="pl-2 pb-3 text-xs font-bold text-gray-500 uppercase border-b-2 border-gray-100"
                    data-i18n="col.name">è³‡ç”¢åç¨±</th>
                <th class="pb-3 text-xs font-bold text-gray-500 uppercase border-b-2 border-gray-100"
                    data-i18n="col.region">åœ°å€</th>
                <th class="pb-3 text-xs font-bold text-gray-500 uppercase border-b-2 border-gray-100"
                    data-i18n="col.type">é¡åˆ¥</th>
                <th class="pr-2 pb-3 text-xs font-bold text-gray-500 uppercase border-b-2 border-gray-100 text-right"
                    data-i18n="col.val">ç¾å€¼</th>
              </tr>
              </thead>
              <tbody id="asset-list"></tbody>
            </table>
          </div>
        </div>

        <!-- Chart -->
        <div class="space-y-8">
          <div class="border border-gray-200 p-6 bg-white shadow-sm">
            <h3 class="text-xs font-bold text-gray-500 uppercase mb-6 tracking-wider"
                data-i18n="chart.title">å€åŸŸé…ç½®åˆ†æ</h3>
            <div class="h-64 relative">
              <canvas id="geoChart"></canvas>
              <div
                class="absolute inset-0 flex items-center justify-center pointer-events-none pb-6">
                <div class="text-center">
                  <div class="text-[10px] text-gray-400 font-bold uppercase">Total</div>
                  <div class="text-sm font-bold text-[#222]">100%</div>
                </div>
              </div>
            </div>
            <div class="bg-[#e6f0fa] p-4 rounded border border-blue-100 mt-4">
              <div
                class="text-[10px] font-bold text-[#0066cc] mb-1 uppercase flex items-center gap-1">
                <i class="fa-solid fa-robot"></i>
                <span data-i18n="chart.insight">AI Insight</span>
              </div>
              <p class="text-xs text-gray-600 leading-relaxed" data-i18n="chart.desc">
                æ‚¨çš„å°ç£è³‡ç”¢ä½”ç¸½æ·¨å€¼çš„ 40%ã€‚å»ºè­°é‡å°å°å¹£åŒ¯ç‡é¢¨éšªé€²è¡Œé¿éšªã€‚
              </p>
            </div>
          </div>
        </div>

      </div>

    </div>
  </div>
</main>

<!-- ================= FOOTER ================= -->
<footer class="bg-[#f5f7fb] border-t border-gray-200 pt-10 pb-6 text-xs text-gray-500">
  <div class="max-w-[1440px] mx-auto px-6">

    <div
      class="flex flex-col md:flex-row md:items-start md:justify-between gap-10 pb-8">

      <!-- Left block: logo + tagline -->
      <div class="flex-1 min-w-[220px]">
        <div class="flex items-center gap-3 mb-4">
          <svg class="logo-clock" viewBox="0 0 100 100">
            <defs>
              <linearGradient id="clockGradient-footer" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#bfdbfe"/>
                <stop offset="100%" stop-color="#60a5fa"/>
              </linearGradient>
            </defs>
            <circle cx="50" cy="50" r="46" class="clock-outer"/>
            <circle cx="50" cy="50" r="38" class="clock-inner"/>
            <circle cx="50" cy="50" r="30" fill="url(#clockGradient-footer)" opacity="0.98"/>
            <line x1="50" y1="12" x2="50" y2="18" class="clock-tick-line"/>
            <line x1="88" y1="50" x2="82" y2="50" class="clock-tick-line"/>
            <line x1="50" y1="82" x2="50" y2="88" class="clock-tick-line"/>
            <line x1="18" y1="50" x2="12" y2="50" class="clock-tick-line"/>
            <line x1="50" y1="50" x2="50" y2="30" class="hand hand-hour"/>
            <line x1="50" y1="50" x2="66" y2="34" class="hand hand-minute"/>
            <circle cx="50" cy="50" r="3.2" class="center-dot"/>
          </svg>

          <div>
            <div class="text-[20px] font-[700] tracking-tight text-[#0066cc]">
              TAIMIC
            </div>
            <div
              class="text-[10px] font-[600] tracking-[0.2em] text-gray-500 uppercase">
              GLOBAL WEALTH
            </div>
          </div>
        </div>

        <p class="text-[13px] text-gray-600 mb-3" data-i18n="footer.tagline">
          FATCA / CRS Compliant Â· Cross-Border Wealth Platform
        </p>
      </div>

      <!-- Columns -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-[13px]">
        <div>
          <div class="font-semibold mb-3 text-gray-700" data-i18n="footer.solutions">
            Solutions
          </div>
          <ul class="space-y-1 text-gray-600">
            <li data-i18n="footer.sol.family">Family Office</li>
            <li data-i18n="footer.sol.crossborder">Cross-Border Clients</li>
            <li data-i18n="footer.sol.entrepreneurs">Entrepreneurs</li>
            <li data-i18n="footer.sol.retirement">Retirement</li>
          </ul>
        </div>

        <div>
          <div class="font-semibold mb-3 text-gray-700" data-i18n="footer.platform">
            Platform
          </div>
          <ul class="space-y-1 text-gray-600">
            <li data-i18n="footer.plat.dashboard">Global Dashboard</li>
            <li data-i18n="footer.plat.tax">Tax &amp; Compliance</li>
            <li data-i18n="footer.plat.estate">Estate Planning</li>
            <li data-i18n="footer.plat.risk">Risk Monitoring</li>
          </ul>
        </div>

        <div>
          <div class="font-semibold mb-3 text-gray-700" data-i18n="footer.resources">
            Resources
          </div>
          <ul class="space-y-1 text-gray-600">
            <li data-i18n="footer.res.insights">Insights</li>
            <li data-i18n="footer.res.updates">Product Updates</li>
            <li data-i18n="footer.res.partner">Partner Program</li>
            <li data-i18n="footer.res.status">Status</li>
          </ul>
        </div>

        <div>
          <div class="font-semibold mb-3 text-gray-700" data-i18n="footer.legal">
            Legal
          </div>
          <ul class="space-y-1 text-gray-600">
            <li data-i18n="footer.leg.privacy">Privacy Policy</li>
            <li data-i18n="footer.leg.terms">Terms of Service</li>
            <li data-i18n="footer.leg.dpa">Data Processing</li>
            <li data-i18n="footer.leg.subprocessors">Subprocessors</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- bottom line -->
    <div
      class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 border-t border-gray-200 pt-4">
      <p class="text-[12px]" data-i18n="footer.copyright">
        Â© 2025 Taimic Inc. All Rights Reserved.
      </p>
      <div class="flex items-center gap-4 text-lg">
        <a href="#" class="hover:text-[#0066cc]" aria-label="Instagram">
          <i class="fa-brands fa-instagram"></i>
        </a>
        <a href="#" class="hover:text-[#0066cc]" aria-label="X">
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      </div>
    </div>
  </div>
</footer>

<!-- ============== MODAL: OCR ============== -->
<div id="modal-overlay"
     class="hidden fixed inset-0 bg-[#222]/80 backdrop-blur-sm z-50 flex items-center justify-center p-4">
  <div class="bg-white w-full max-w-md shadow-2xl overflow-hidden relative transform transition-all scale-100">
    <div class="bg-[#0066cc] p-4 flex justify-between items-center text-white">
      <h3 class="font-bold text-sm tracking-wide" data-i18n="modal.title">
        æ–°å¢å°ç£è³‡ç”¢ (AI OCR)
      </h3>
      <i class="fa-solid fa-xmark cursor-pointer hover:opacity-75 text-lg"
         onclick="closeModal()"></i>
    </div>

    <div id="modal-step-1" class="p-8 text-center">
      <div
        class="w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4 text-[#0066cc]">
        <i class="fa-solid fa-cloud-arrow-up text-2xl"></i>
      </div>
      <p class="text-sm text-gray-600 mb-6 leading-relaxed" data-i18n="modal.desc">
        ä¸Šå‚³ä¿å–®é¦–é æˆ–éŠ€è¡Œå°å¸³å–®ï¼ŒAI å°‡è‡ªå‹•æå–é—œéµæ•¸æ“šã€‚
      </p>
      <button onclick="startScan()"
              class="w-full border-2 border-dashed border-gray-300 py-4 rounded hover:border-[#0066cc] hover:bg-blue-50 transition-all text-gray-500 hover:text-[#0066cc] font-bold text-sm">
        <span data-i18n="btn.upload">é»æ“Šä¸Šå‚³æª”æ¡ˆ</span>
      </button>
    </div>

    <div id="modal-step-2" class="hidden relative h-64 bg-[#1a1a1a]">
      <div class="absolute inset-0 flex flex-col items-center justify-center z-10">
        <p class="text-white font-mono text-sm mb-2" data-i18n="modal.scanning">
          AI åˆ†æä¸­...
        </p>
        <div class="w-48 h-1 bg-gray-700 rounded overflow-hidden mb-4">
          <div id="scan-bar"
               class="h-full bg-[#0066cc] w-0 transition-all duration-[3000ms] ease-linear"></div>
        </div>
        <div id="scan-log"
             class="text-[10px] text-green-400 font-mono h-12 flex flex-col items-center gap-1"></div>
      </div>
      <div class="scan-overlay absolute inset-0"></div>
    </div>
  </div>
</div>

<!-- ============== MODAL: AUTH (Login / Register) ============== -->
<div id="auth-modal"
     class="hidden fixed inset-0 bg-[#222]/60 backdrop-blur-sm z-50 flex items-center justify-center px-4">
  <div class="bg-white w-full max-w-md shadow-2xl rounded-sm overflow-hidden">
    <div class="bg-[#0066cc] text-white px-6 py-4 flex items-center justify-between">
      <h3 id="auth-title" class="font-bold text-sm tracking-wide" data-i18n="auth.titleLogin">
        ç™»å…¥ TAIMIC å¸³è™Ÿ
      </h3>
      <button onclick="closeAuthModal()" class="hover:opacity-80">
        <i class="fa-solid fa-xmark text-lg"></i>
      </button>
    </div>

    <form id="auth-form" class="px-8 py-6 space-y-5">
      <div class="flex gap-3 text-xs font-semibold text-gray-500">
        <button type="button" id="tab-login"
                class="flex-1 py-2 border border-gray-200 rounded text-center hover:bg-gray-50"
                onclick="switchAuthMode('login')"
        >
          <span data-i18n="auth.tabLogin">ç™»å…¥</span>
        </button>
        <button type="button" id="tab-register"
                class="flex-1 py-2 border border-gray-200 rounded text-center hover:bg-gray-50"
                onclick="switchAuthMode('register')"
        >
          <span data-i18n="auth.tabRegister">è¨»å†Š</span>
        </button>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
        <input id="auth-email"
               type="email"
               required
               placeholder="you@gmail.com"
               class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-[#0066cc] focus:border-[#0066cc]">
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="auth.password">
          å¯†ç¢¼
        </label>
        <input id="auth-password"
               type="password"
               required
               minlength="6"
               class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-[#0066cc] focus:border-[#0066cc]"
               data-i18n-placeholder="auth.passwordPlaceholder"
               placeholder="è«‹è¼¸å…¥è‡³å°‘ 6 ç¢¼å¯†ç¢¼">
      </div>

      <p id="auth-message" class="text-sm h-5"></p>

      <button id="auth-submit"
              type="submit"
              class="w-full bg-[#0066cc] hover:bg-[#004c99] text-white font-semibold text-sm py-2.5 rounded flex items-center justify-center gap-2">
        <i class="fa-solid fa-right-to-bracket"></i>
        <span data-i18n="auth.btnLogin">ç™»å…¥</span>
      </button>
    </form>
  </div>
</div>

<!-- ================= SCRIPT ================= -->
<script>
  const RATE = 32.5;
  let curr = 'TWD';
  let lang = 'zh';
  const API_BASE = "https://cool-cell-b227.amy20060226.workers.dev";

  const assets = [
    {
      id: 1,
      name: {en: 'Vanguard Total Stock (VTI)', zh: 'Vanguard å…¨çƒè‚¡ç¥¨ ETF (VTI)'},
      type: {en: 'ETF', zh: 'æŒ‡æ•¸å‹åŸºé‡‘'},
      region: 'US',
      usd: 145200
    },
    {
      id: 2,
      name: {en: 'Taipei Xinyi Condo', zh: 'å°åŒ—ä¿¡ç¾©å€å…¬å¯“'},
      type: {en: 'Real Estate', zh: 'æˆ¿åœ°ç”¢'},
      region: 'TW',
      usd: 280000
    },
    {
      id: 3,
      name: {en: 'Fidelity 401(k)', zh: 'å¯Œé”é€€ä¼‘é‡‘ 401(k)'},
      type: {en: 'Retirement', zh: 'é€€ä¼‘é‡‘'},
      region: 'US',
      usd: 98500
    }
  ];

  const I18N = {
    en: {
      'nav.overview': 'Overview',
      'nav.tax': 'Tax & Compliance',
      'nav.estate': 'Estate Plan',
      'nav.reports': 'Reports',

      'page.title': 'Cross-Border Wealth Platform',
      'page.desc': 'Integrated view of Taiwan & US assets with FATCA compliance checks.',

      'btn.add': 'Add Asset',
      'btn.upload': 'Click to Upload File',

      'stat.us': 'US Net Worth',
      'stat.tw': 'Taiwan Net Worth',
      'stat.global': 'Global Total',
      'stat.safe': 'Estate Tax Risk: Safe',

      'table.title': 'Portfolio Holdings',
      'col.name': 'Asset Name',
      'col.region': 'Region',
      'col.type': 'Category',
      'col.val': 'Value',

      'alert.title': 'AI Tax Alert: FATCA Risk Detected',
      'alert.desc': 'We detected a new "High Cash Value" insurance policy in Taiwan. This exceeds the $50,000 reporting threshold for IRS Form 8938.',

      'chart.title': 'Regional Allocation',
      'chart.insight': 'AI Insight',
      'chart.desc': 'Your Taiwan assets comprise 40% of your net worth. Consider hedging TWD currency risk.',

      'modal.title': 'Add Taiwan Asset (AI OCR)',
      'modal.desc': 'Upload policy or statement. AI will extract data.',
      'modal.scanning': 'AI Processing...',

      'user.login': 'Login',
      'user.register': 'Register',

      // auth
      'auth.titleLogin': 'Login to TAIMIC',
      'auth.titleRegister': 'Create TAIMIC Account',
      'auth.tabLogin': 'Login',
      'auth.tabRegister': 'Register',
      'auth.password': 'Password',
      'auth.passwordPlaceholder': 'At least 6 characters',
      'auth.btnLogin': 'Login',
      'auth.btnRegister': 'Register',
      'auth.loginSuccess': 'Login successful',
      'auth.registerSuccess': 'Registration successful',
      'auth.error': 'Something went wrong, please try again.',
      'auth.invalid': 'Invalid email or password.',

      // footer
      'footer.tagline': 'FATCA / CRS Compliant Â· Cross-Border Wealth Platform',
      'footer.solutions': 'Solutions',
      'footer.platform': 'Platform',
      'footer.resources': 'Resources',
      'footer.legal': 'Legal',

      'footer.sol.family': 'Family Office',
      'footer.sol.crossborder': 'Cross-Border Clients',
      'footer.sol.entrepreneurs': 'Entrepreneurs',
      'footer.sol.retirement': 'Retirement',

      'footer.plat.dashboard': 'Global Dashboard',
      'footer.plat.tax': 'Tax & Compliance',
      'footer.plat.estate': 'Estate Planning',
      'footer.plat.risk': 'Risk Monitoring',

      'footer.res.insights': 'Insights',
      'footer.res.updates': 'Product Updates',
      'footer.res.partner': 'Partner Program',
      'footer.res.status': 'Status',

      'footer.leg.privacy': 'Privacy Policy',
      'footer.leg.terms': 'Terms of Service',
      'footer.leg.dpa': 'Data Processing',
      'footer.leg.subprocessors': 'Subprocessors',

      'footer.copyright': 'Â© 2025 Taimic Inc. All Rights Reserved.'
    },
    zh: {
      'nav.overview': 'è³‡ç”¢ç¸½è¦½',
      'nav.tax': 'ç¨…å‹™åˆè¦',
      'nav.estate': 'å®¶æ—å‚³æ‰¿',
      'nav.reports': 'åˆ†æå ±å‘Š',

      'page.title': 'è·¨åœ‹è³‡ç”¢æ•´åˆå¹³å°',
      'page.desc': 'æ•´åˆå°ç£èˆ‡ç¾åœ‹è³‡ç”¢ï¼Œæä¾›å³æ™‚æ·¨å€¼åˆ†æèˆ‡è·¨å¢ƒç¨…å‹™é¢¨éšªæª¢æ¸¬ã€‚',

      'btn.add': 'æ–°å¢è³‡ç”¢',
      'btn.upload': 'é»æ“Šä¸Šå‚³æª”æ¡ˆ',

      'stat.us': 'ç¾åœ‹ç¸½è³‡ç”¢',
      'stat.tw': 'å°ç£ç¸½è³‡ç”¢',
      'stat.global': 'å…¨çƒç¸½æ·¨å€¼',
      'stat.safe': 'éºç”¢ç¨…é¢¨éšªï¼šå®‰å…¨',

      'table.title': 'è³‡ç”¢æŒæœ‰æ¸…å–®',
      'col.name': 'è³‡ç”¢åç¨±',
      'col.region': 'åœ°å€',
      'col.type': 'é¡åˆ¥',
      'col.val': 'ç¾å€¼',

      'alert.title': 'AI ç¨…å‹™è­¦ç¤ºï¼šåµæ¸¬åˆ° FATCA é¢¨éšª',
      'alert.desc': 'ç³»çµ±æƒæåˆ°ä¸€å¼µæ–°å¢çš„å°ç£é«˜ç¾é‡‘åƒ¹å€¼ä¿å–®ã€‚æ­¤é‡‘é¡å·²è¶…é IRS Form 8938 çš„ 5 è¬ç¾å…ƒç”³å ±é–€æª»ã€‚',

      'chart.title': 'å€åŸŸè³‡ç”¢é…ç½®',
      'chart.insight': 'AI æ™ºèƒ½åˆ†æ',
      'chart.desc': 'æ‚¨çš„å°ç£è³‡ç”¢ä½”ç¸½æ·¨å€¼çš„ 40%ã€‚å»ºè­°é‡å°å°å¹£åŒ¯ç‡é¢¨éšªé€²è¡Œé¿éšªã€‚',

      'modal.title': 'æ–°å¢å°ç£è³‡ç”¢ (AI OCR)',
      'modal.desc': 'ä¸Šå‚³ä¿å–®é¦–é æˆ–éŠ€è¡Œå°å¸³å–®ï¼ŒAI å°‡è‡ªå‹•æå–é—œéµæ•¸æ“šã€‚',
      'modal.scanning': 'AI åˆ†æä¸­...',

      'user.login': 'ç™»å…¥',
      'user.register': 'è¨»å†Š',

      'auth.titleLogin': 'ç™»å…¥ TAIMIC å¸³è™Ÿ',
      'auth.titleRegister': 'è¨»å†Š TAIMIC å¸³è™Ÿ',
      'auth.tabLogin': 'ç™»å…¥',
      'auth.tabRegister': 'è¨»å†Š',
      'auth.password': 'å¯†ç¢¼',
      'auth.passwordPlaceholder': 'è«‹è¼¸å…¥è‡³å°‘ 6 ç¢¼å¯†ç¢¼',
      'auth.btnLogin': 'ç™»å…¥',
      'auth.btnRegister': 'è¨»å†Š',
      'auth.loginSuccess': 'ç™»å…¥æˆåŠŸ',
      'auth.registerSuccess': 'è¨»å†ŠæˆåŠŸ',
      'auth.error': 'ç³»çµ±å¿™ç¢Œï¼Œè«‹ç¨å¾Œå†è©¦ã€‚',
      'auth.invalid': 'å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤ã€‚',

      'footer.tagline': 'FATCA / CRS åˆè¦ Â· è·¨å¢ƒè²¡å¯Œç®¡ç†å¹³å°',
      'footer.solutions': 'è§£æ±ºæ–¹æ¡ˆ',
      'footer.platform': 'å¹³å°',
      'footer.resources': 'è³‡æº',
      'footer.legal': 'æ³•å¾‹',

      'footer.sol.family': 'å®¶æ—è¾¦å…¬å®¤',
      'footer.sol.crossborder': 'è·¨å¢ƒå®¢æˆ¶',
      'footer.sol.entrepreneurs': 'å‰µæ¥­å®¶',
      'footer.sol.retirement': 'é€€ä¼‘è¦åŠƒ',

      'footer.plat.dashboard': 'å…¨çƒç¸½è¦½',
      'footer.plat.tax': 'ç¨…å‹™èˆ‡åˆè¦',
      'footer.plat.estate': 'è³‡ç”¢å‚³æ‰¿',
      'footer.plat.risk': 'é¢¨éšªç›£æ§',

      'footer.res.insights': 'æ´è¦‹',
      'footer.res.updates': 'ç”¢å“æ›´æ–°',
      'footer.res.partner': 'åˆä½œå¤¥ä¼´è¨ˆç•«',
      'footer.res.status': 'ç³»çµ±ç‹€æ…‹',

      'footer.leg.privacy': 'éš±ç§æ¬Šæ”¿ç­–',
      'footer.leg.terms': 'æœå‹™æ¢æ¬¾',
      'footer.leg.dpa': 'è³‡æ–™è™•ç†',
      'footer.leg.subprocessors': 'æ¬¡è™•ç†è€…',

      'footer.copyright': 'Â© 2025 Taimic Inc. ç‰ˆæ¬Šæ‰€æœ‰ã€‚'
    }
  };

  function fmt(usd) {
    const val = curr === 'USD' ? usd : usd * RATE;
    return new Intl.NumberFormat(curr === 'USD' ? 'en-US' : 'zh-TW', {
      style: 'currency',
      currency: curr,
      maximumFractionDigits: 0
    }).format(val);
  }

  function render() {
    const t = I18N[lang];

    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.dataset.i18n;
      if (t[key]) el.textContent = t[key];
    });

    // placeholder with data-i18n-placeholder
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
      const key = el.dataset.i18nPlaceholder;
      if (t[key]) el.placeholder = t[key];
    });

    document.querySelectorAll('.val-display').forEach(el => {
      el.textContent = fmt(parseFloat(el.dataset.usd));
    });

    const tbody = document.getElementById('asset-list');
    tbody.innerHTML = '';
    assets.forEach(a => {
      const n = a.name[lang];
      const tp = a.type[lang];
      const flag = a.region === 'US' ? 'ğŸ‡ºğŸ‡¸' : 'ğŸ‡¹ğŸ‡¼';
      const badge = a.region === 'US'
        ? 'bg-blue-50 text-blue-700'
        : 'bg-green-50 text-green-700';
      const hl = a.new ? 'bg-orange-50 animate-fade-in' : '';
      const riskTag = a.risk
        ? '<span class="ml-2 inline-flex items-center px-2 py-0.5 bg-orange-100 text-orange-700 text-[10px] font-bold rounded border border-orange-200">FATCA</span>'
        : '';

      tbody.innerHTML += `
        <tr class="group transition-colors hover:bg-gray-50 border-b border-gray-100 last:border-0 ${hl}">
          <td class="py-4 pl-2">
            <div class="font-bold text-[#222] group-hover:text-[#0066cc] transition-colors">${n}</div>
          </td>
          <td class="py-4">
            <span class="px-2 py-1 rounded text-xs font-bold ${badge}">${flag} ${a.region}</span>${riskTag}
          </td>
          <td class="py-4 text-sm text-gray-600">${tp}</td>
          <td class="py-4 pr-2 text-right font-mono font-bold text-[#222] tracking-tight">${fmt(a.usd)}</td>
        </tr>`;
    });

    optZh.classList.toggle('active', lang === 'zh');
    optEn.classList.toggle('active', lang === 'en');
  }

  function setCurrency(c) {
    curr = c;
    render();
    if (curr === 'USD') {
      btnUsd.className = 'px-3 py-2 bg-gray-100 text-[#0066cc] font-bold';
      btnTwd.className = 'px-3 py-2 hover:bg-gray-50 transition-colors';
    } else {
      btnTwd.className = 'px-3 py-2 bg-gray-100 text-[#0066cc] font-bold';
      btnUsd.className = 'px-3 py-2 hover:bg-gray-50 transition-colors';
    }
  }

  function changeLang(l) {
    lang = l;
    render();
    langMenu.classList.add('hidden');
  }

  function openModal() {
    modalOverlay.classList.remove('hidden');
    document.getElementById('modal-step-1').classList.remove('hidden');
    document.getElementById('modal-step-2').classList.add('hidden');
  }

  function closeModal() {
    modalOverlay.classList.add('hidden');
  }

  function startScan() {
    document.getElementById('modal-step-1').classList.add('hidden');
    document.getElementById('modal-step-2').classList.remove('hidden');
    setTimeout(() => document.getElementById('scan-bar').style.width = '100%', 100);
    const log = document.getElementById('scan-log');
    setTimeout(() => log.innerHTML = '> Detecting Language: zh-TW', 800);
    setTimeout(() => log.innerHTML += '<br>> Parsing: "å¯Œé‚¦äººå£½ (Fubon Life)"', 1600);
    setTimeout(() => log.innerHTML += '<br>> Match IRS Code: 8938', 2400);

    setTimeout(() => {
      assets.unshift({
        id: 99,
        name: {en: 'Fubon Life (Whole Life)', zh: 'å¯Œé‚¦äººå£½ (çµ‚èº«å£½éšª)'},
        type: {en: 'Insurance', zh: 'å„²è“„éšª'},
        region: 'TW',
        usd: 52000,
        new: true,
        risk: true
      });

      const tEl = document.getElementById('val-tw');
      tEl.dataset.usd = parseFloat(tEl.dataset.usd) + 52000;
      const gEl = document.getElementById('val-global');
      gEl.dataset.usd = parseFloat(gEl.dataset.usd) + 52000;
      chart.data.datasets[0].data[1] += 52000;
      chart.update();

      document.getElementById('ai-alert').classList.remove('hidden');
      render();
      closeModal();
      window.scrollTo({top: 0, behavior: 'smooth'});
    }, 3000);
  }

  // ===== Auth (login / register) =====
  let currentAuthMode = 'login';

  function openAuthModal(mode) {
    currentAuthMode = mode || 'login';
    updateAuthUI();
    document.getElementById('auth-message').textContent = '';
    document.getElementById('auth-message').className = 'text-sm h-5';
    document.getElementById('auth-email').value = '';
    document.getElementById('auth-password').value = '';
    document.getElementById('auth-modal').classList.remove('hidden');
  }

  function closeAuthModal() {
    document.getElementById('auth-modal').classList.add('hidden');
  }

  function switchAuthMode(mode) {
    currentAuthMode = mode;
    updateAuthUI();
    document.getElementById('auth-message').textContent = '';
    document.getElementById('auth-message').className = 'text-sm h-5';
  }

  function updateAuthUI() {
    const t = I18N[lang];
    const titleEl = document.getElementById('auth-title');
    const submitText = document.querySelector('#auth-submit span');
    const btnIcon = document.querySelector('#auth-submit i');

    const tabLogin = document.getElementById('tab-login');
    const tabRegister = document.getElementById('tab-register');

    if (currentAuthMode === 'login') {
      titleEl.textContent = t['auth.titleLogin'];
      submitText.textContent = t['auth.btnLogin'];
      btnIcon.className = 'fa-solid fa-right-to-bracket';
      tabLogin.classList.add('bg-gray-100', 'border-[#0066cc]');
      tabRegister.classList.remove('bg-gray-100', 'border-[#0066cc]');
    } else {
      titleEl.textContent = t['auth.titleRegister'];
      submitText.textContent = t['auth.btnRegister'];
      btnIcon.className = 'fa-solid fa-user-plus';
      tabRegister.classList.add('bg-gray-100', 'border-[#0066cc]');
      tabLogin.classList.remove('bg-gray-100', 'border-[#0066cc]');
    }
  }

  document.getElementById('auth-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = document.getElementById('auth-email').value.trim();
    const password = document.getElementById('auth-password').value;

    const msgEl = document.getElementById('auth-message');
    msgEl.textContent = '';
    msgEl.className = 'text-sm h-5';

    const path = currentAuthMode === 'register' ? '/api/register' : '/api/login';

    try {
      const res = await fetch(API_BASE + path, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({email, password})
      });

      const data = await res.json();

      if (res.ok && data.ok) {
        const t = I18N[lang];
        if (currentAuthMode === 'login') {
          msgEl.textContent = t['auth.loginSuccess']; // åªé¡¯ç¤ºã€Œç™»å…¥æˆåŠŸã€
        } else {
          msgEl.textContent = t['auth.registerSuccess'];
        }
        msgEl.className = 'text-sm h-5 text-green-600';

        // å­˜ä¸€ä¸‹ç™»å…¥ç‹€æ…‹ï¼ˆç°¡å–®ç‰ˆï¼‰
        if (currentAuthMode === 'login') {
          localStorage.setItem('taimic_user', email);
        }
      } else if (res.status === 401) {
        msgEl.textContent = I18N[lang]['auth.invalid'];
        msgEl.className = 'text-sm h-5 text-red-600';
      } else {
        msgEl.textContent = I18N[lang]['auth.error'];
        msgEl.className = 'text-sm h-5 text-red-600';
      }
    } catch (err) {
      console.error(err);
      msgEl.textContent = I18N[lang]['auth.error'];
      msgEl.className = 'text-sm h-5 text-red-600';
    }
  });

  // ===== Globals (DOM cache) =====
  let chart;
  let btnUsd, btnTwd, optZh, optEn;
  let langMenu, userMenu, modalOverlay;

  window.onload = function () {
    const ctx = document.getElementById('geoChart').getContext('2d');
    chart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['US', 'TW'],
        datasets: [{
          data: [482500, 315200],
          backgroundColor: ['#0066cc', '#222222'],
          borderWidth: 0
        }]
      },
      options: {
        cutout: '75%',
        plugins: {legend: {display: false}}
      }
    });

    btnUsd = document.getElementById('btn-usd');
    btnTwd = document.getElementById('btn-twd');
    optZh = document.getElementById('opt-zh');
    optEn = document.getElementById('opt-en');
    langMenu = document.getElementById('lang-menu');
    userMenu = document.getElementById('user-menu');
    modalOverlay = document.getElementById('modal-overlay');

    render();
    updateAuthUI();

    const langToggle = document.getElementById('lang-toggle');
    const userToggle = document.getElementById('user-toggle');

    function closeAllMenus() {
      if (langMenu) langMenu.classList.add('hidden');
      if (userMenu) userMenu.classList.add('hidden');
    }

    if (langToggle && langMenu) {
      langToggle.addEventListener('click', (e) => {
        e.stopPropagation();
        const willOpen = langMenu.classList.contains('hidden');
        closeAllMenus();
        if (willOpen) langMenu.classList.remove('hidden');
      });
      langMenu.addEventListener('click', e => e.stopPropagation());
    }

    if (userToggle && userMenu) {
      userToggle.addEventListener('click', (e) => {
        e.stopPropagation();
        const willOpen = userMenu.classList.contains('hidden');
        closeAllMenus();
        if (willOpen) userMenu.classList.remove('hidden');
      });
      userMenu.addEventListener('click', e => e.stopPropagation());
    }

    document.addEventListener('click', closeAllMenus);
  };
</script>
</body>
</html>
