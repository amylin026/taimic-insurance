<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>TAIMIC | Global Wealth Management</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- FontAwesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
      -webkit-font-smoothing: antialiased;
      color: #222222;
      background-color: #f5f5f7;
    }

    :root {
      --brand-blue: #0066cc;
      --brand-dark: #004c99;
      --text-main: #222222;
    }

    /* ===== Logoï¼šæ·ºè—æ™‚é˜ï¼Œä¿ç•™ä½ åŸæœ¬é‚£é¡† ===== */
    .logo-clock { width: 44px; height: 44px; }

    .clock-outer {
      fill: none;
      stroke: #dbeafe;
      stroke-width: 2.5;
    }

    .clock-inner {
      fill: #eff6ff;
      stroke: #e5edff;
      stroke-width: 1.5;
    }

    .clock-core {
      fill: url(#clockGradient);
      opacity: 0.98;
    }

    .clock-tick-line {
      stroke: #cbd5f5;
      stroke-width: 1.4;
      stroke-linecap: round;
    }

    .hand {
      stroke-width: 2.6;
      stroke-linecap: round;
      transform-origin: 50% 50%;
    }

    .hand-hour {
      stroke: #1f2933;
      animation: rotate 1800s linear infinite;
    }

    .hand-minute {
      stroke: #3b82f6;
      animation: rotate 300s linear infinite;
    }

    .center-dot {
      fill: #ffffff;
      stroke: #3b82f6;
      stroke-width: 2;
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* ===== å°è¦½åˆ—ï¼šèµ°å°ç©é›»é‚£ç¨®æ‰å¹³ & åº•ç·šé«˜äº® ===== */
    .nav-link {
      font-size: 15px;
      font-weight: 500;
      color: #4b5563;
      padding: 0 16px;
      height: 72px;
      display: flex;
      align-items: center;
      border-bottom: 3px solid transparent;
      transition: all 0.15s ease-out;
      text-decoration: none;
      white-space: nowrap;
    }
    .nav-link:hover {
      color: var(--brand-blue);
      border-bottom-color: rgba(0,102,204,0.25);
    }
    .nav-link.active {
      color: #111827;
      font-weight: 600;
      border-bottom-color: var(--brand-blue);
    }

    /* ===== Dropdowns ===== */
    .dropdown-container {
      position: relative;
      height: 100%;
      display: flex;
      align-items: center;
    }
    .dropdown-menu {
      position: absolute;
      top: 64px;
      right: 0;
      background: white;
      border-radius: 4px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 10px 40px rgba(15,23,42,0.08);
      min-width: 180px;
      z-index: 50;
    }
    .dropdown-item {
      padding: 10px 18px;
      font-size: 14px;
      color: #4b5563;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background 0.15s, color 0.15s;
    }
    .dropdown-item:hover {
      background-color: #f3f4f6;
      color: var(--brand-blue);
    }
    .dropdown-item.active {
      font-weight: 600;
      color: var(--brand-blue);
    }

    .btn-corp {
      background-color: var(--brand-blue);
      color: #ffffff;
      font-size: 14px;
      font-weight: 600;
      padding: 10px 22px;
      border-radius: 999px;
      transition: background 0.15s ease-out, box-shadow 0.15s ease-out;
    }
    .btn-corp:hover {
      background-color: var(--brand-dark);
      box-shadow: 0 10px 24px rgba(0,102,204,0.25);
    }

    .scan-overlay {
      background: linear-gradient(to bottom, transparent, rgba(0, 102, 204, 0.18), transparent);
      animation: scan 2s linear infinite;
    }
    @keyframes scan {
      0% { transform: translateY(-100%); }
      100% { transform: translateY(100%); }
    }

    .animate-fade-in {
      animation: fadeIn 0.4s ease-out forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(4px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

<body class="flex flex-col min-h-screen">

  <!-- ========= HEADER ========= -->
  <header class="bg-white border-b border-gray-200 sticky top-0 z-40 shadow-sm">
    <div class="max-w-[1280px] mx-auto px-4 md:px-6 lg:px-8 flex items-center justify-between h-[72px]">

      <!-- Logo -->
      <a href="#" class="flex items-center gap-3">
        <svg class="logo-clock" viewBox="0 0 100 100">
          <defs>
            <linearGradient id="clockGradient" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#bfdbfe" />
              <stop offset="100%" stop-color="#60a5fa" />
            </linearGradient>
          </defs>
          <circle cx="50" cy="50" r="46" class="clock-outer" />
          <circle cx="50" cy="50" r="38" class="clock-inner" />
          <circle cx="50" cy="50" r="30" class="clock-core" />
          <line x1="50" y1="12" x2="50" y2="18" class="clock-tick-line" />
          <line x1="88" y1="50" x2="82" y2="50" class="clock-tick-line" />
          <line x1="50" y1="82" x2="50" y2="88" class="clock-tick-line" />
          <line x1="18" y1="50" x2="12" y2="50" class="clock-tick-line" />
          <line x1="50" y1="50" x2="50" y2="30" class="hand hand-hour" />
          <line x1="50" y1="50" x2="66" y2="34" class="hand hand-minute" />
          <circle cx="50" cy="50" r="3.2" class="center-dot" />
        </svg>

        <div class="flex flex-col leading-none">
          <span class="text-[22px] font-[700] tracking-tight text-[#0066cc]">TAIMIC</span>
          <span class="text-[10px] font-[600] tracking-[0.24em] text-gray-500 mt-1 uppercase">Global Wealth</span>
        </div>
      </a>

      <!-- Desktop Nav -->
      <nav class="hidden lg:flex h-full items-center flex-1 justify-center">
        <a href="#" class="nav-link active" data-i18n="nav.overview">è³‡ç”¢ç¸½è¦½</a>
        <a href="#" class="nav-link" data-i18n="nav.tax">ç¨…å‹™åˆè¦</a>
        <a href="#" class="nav-link" data-i18n="nav.estate">å®¶æ—å‚³æ‰¿</a>
        <a href="#" class="nav-link" data-i18n="nav.reports">åˆ†æå ±å‘Š</a>
      </nav>

      <!-- Right side -->
      <div class="flex items-center gap-4 h-full">

        <!-- Currency -->
        <div class="hidden sm:flex items-center text-[11px] font-medium text-gray-600 border border-gray-200 rounded-full overflow-hidden">
          <button id="btn-usd" onclick="setCurrency('USD')" class="px-3 py-1.5 hover:bg-gray-50 transition-colors">USD</button>
          <div class="w-px h-4 bg-gray-200"></div>
          <button id="btn-twd" onclick="setCurrency('TWD')" class="px-3 py-1.5 bg-gray-100 text-[#0066cc] font-semibold">TWD</button>
        </div>

        <!-- Language -->
        <div class="dropdown-container cursor-pointer">
          <button id="lang-toggle" type="button" class="flex items-center gap-1.5 text-gray-600 hover:text-[#0066cc] text-sm">
            <i class="fa-solid fa-globe text-lg"></i>
            <i class="fa-solid fa-caret-down text-[10px]"></i>
          </button>
          <div id="lang-menu" class="dropdown-menu hidden">
            <div id="opt-zh" class="dropdown-item active" onclick="changeLang('zh')">ç¹é«”ä¸­æ–‡</div>
            <div id="opt-en" class="dropdown-item" onclick="changeLang('en')">English</div>
          </div>
        </div>

        <!-- User -->
        <div class="dropdown-container cursor-pointer pl-4 border-l border-gray-200">
          <button id="user-toggle" type="button" class="w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center text-gray-600 hover:bg-[#0066cc] hover:text-white transition-colors">
            <i class="fa-solid fa-user text-[15px]"></i>
          </button>
          <div id="user-menu" class="dropdown-menu hidden">
            <div class="dropdown-item">
              <i class="fa-solid fa-right-to-bracket"></i>
              <span data-i18n="user.login">ç™»å…¥</span>
            </div>
            <div class="dropdown-item">
              <i class="fa-solid fa-user-plus"></i>
              <span data-i18n="user.register">è¨»å†Š</span>
            </div>
            <div class="border-t border-gray-100 my-1"></div>
            <div class="dropdown-item">
              <i class="fa-solid fa-circle-question"></i>
              <span>Help</span>
            </div>
          </div>
        </div>

      </div>
    </div>
  </header>

  <!-- ========= HEROï¼ˆå°ç©é›»å¼å¤§æ©«å¹…ï¼‰ ========= -->
  <section class="bg-gradient-to-r from-[#f3f7fc] via-white to-[#f5f5f7] border-b border-gray-200">
    <div class="max-w-[1280px] mx-auto px-4 md:px-6 lg:px-8 py-10 md:py-12 lg:py-14 grid md:grid-cols-2 gap-10 items-center">
      <!-- Left copy -->
      <div>
        <p class="text-xs font-semibold tracking-[0.18em] text-[#0066cc] uppercase mb-3">
          GLOBAL ASSET MANAGEMENT
        </p>
        <h1 class="text-[28px] md:text-[32px] lg:text-[36px] font-[700] tracking-tight text-gray-900 mb-4 leading-snug" data-i18n="page.title">
          è·¨åœ‹è³‡ç”¢æ•´åˆå¹³å°
        </h1>
        <p class="text-[14px] md:text-[15px] text-gray-600 leading-relaxed max-w-xl mb-6" data-i18n="page.desc">
          æ•´åˆå°ç£èˆ‡ç¾åœ‹è³‡ç”¢ï¼Œæä¾›å³æ™‚æ·¨å€¼åˆ†æèˆ‡è·¨å¢ƒç¨…å‹™é¢¨éšªæª¢æ¸¬ï¼Œè®“é«˜æ·¨å€¼è·¨åœ‹ç§»æ°‘ä¹Ÿèƒ½äº«æœ‰å®¶æ—è¾¦å…¬å®¤ç­‰ç´šçš„æ§ç›¤è¦–è§’ã€‚
        </p>
        <div class="flex flex-wrap gap-3 items-center">
          <button onclick="openModal()" class="btn-corp flex items-center gap-2 text-sm shadow-md">
            <i class="fa-solid fa-plus"></i>
            <span data-i18n="btn.add">æ–°å¢è³‡ç”¢</span>
          </button>
          <button class="text-sm font-medium text-[#0066cc] hover:text-[#004c99] flex items-center gap-1">
            <span>ç­è§£ FATCA / CRS æ–¹æ¡ˆ</span>
            <i class="fa-solid fa-arrow-right text-xs"></i>
          </button>
        </div>
      </div>

      <!-- Right â€“ summary panel -->
      <div class="bg-white/80 rounded-xl shadow-sm border border-gray-200 p-5 md:p-6 lg:p-7">
        <p class="text-xs font-semibold text-gray-500 tracking-wide mb-3" data-i18n="stat.global">
          å…¨çƒç¸½æ·¨å€¼
        </p>
        <div class="flex items-baseline gap-2 mb-4">
          <div id="val-global" class="text-[26px] md:text-[30px] font-mono font-bold text-[#0066cc] val-display" data-usd="797700">
            ...
          </div>
          <span class="text-[11px] text-gray-500 uppercase tracking-[0.16em]">AS OF TODAY</span>
        </div>
        <div class="grid grid-cols-2 gap-4 border-t border-gray-100 pt-4">
          <div>
            <p class="text-[11px] font-semibold text-gray-500 tracking-wide mb-1" data-i18n="stat.us">
              ç¾åœ‹ç¸½è³‡ç”¢
            </p>
            <div class="flex items-baseline gap-1 mb-1">
              <div class="text-[18px] font-mono font-semibold text-gray-900 val-display" data-usd="482500">...</div>
              <span class="text-sm">ğŸ‡ºğŸ‡¸</span>
            </div>
            <p class="text-[11px] text-emerald-600 flex items-center gap-1">
              <i class="fa-solid fa-arrow-trend-up"></i>
              <span>+4.2% YTD</span>
            </p>
          </div>
          <div>
            <p class="text-[11px] font-semibold text-gray-500 tracking-wide mb-1" data-i18n="stat.tw">
              å°ç£ç¸½è³‡ç”¢
            </p>
            <div class="flex items-baseline gap-1 mb-1">
              <div id="val-tw" class="text-[18px] font-mono font-semibold text-gray-900 val-display" data-usd="315200">...</div>
              <span class="text-sm">ğŸ‡¹ğŸ‡¼</span>
            </div>
            <p class="text-[11px] text-emerald-600 flex items-center gap-1">
              <i class="fa-solid fa-arrow-trend-up"></i>
              <span>+1.8% YTD</span>
            </p>
          </div>
        </div>

        <div class="mt-5 flex items-center gap-3 text-[11px] text-gray-500">
          <i class="fa-solid fa-shield-halved text-[#0066cc]"></i>
          <span data-i18n="stat.safe">éºç”¢ç¨…é¢¨éšªï¼šå®‰å…¨</span>
        </div>
      </div>
    </div>
  </section>

  <!-- ========= ä¸­æ®µï¼šè§£æ±ºæ–¹æ¡ˆæ¢å¸¶ï¼ˆæ¨¡ä»¿å°ç©é›» Solution å€ï¼‰ ========= -->
  <section class="bg-white border-b border-gray-200">
    <div class="max-w-[1280px] mx-auto px-4 md:px-6 lg:px-8 py-8 md:py-10">
      <div class="grid md:grid-cols-3 gap-6">
        <div class="md:col-span-2">
          <h2 class="text-[18px] md:text-[20px] font-semibold text-gray-900 mb-3">
            ä¸€å€‹å¹³å°ï¼Œçœ‹æ‡‚ä½ åœ¨å°ç£èˆ‡ç¾åœ‹çš„å…¨éƒ¨è³‡ç”¢
          </h2>
          <p class="text-[14px] text-gray-600 leading-relaxed max-w-2xl">
            TAIMIC å°‡ 401(k)ã€ç¾è‚¡å¸³æˆ¶ã€å°ç£å„²è“„éšªèˆ‡ä¸å‹•ç”¢æ‹‰é€²åŒä¸€å€‹ç•«é¢ï¼Œè®“ä½ ç”¨åŒä¸€ç¨®è²¨å¹£ã€åŒä¸€å€‹æ™‚é–“é»çœ‹æ¸…æ¥šã€Œå…¨å®¶è³‡ç”¢è¡¨ã€ï¼ŒåŒæ™‚è‡ªå‹•å°ç…§ FATCA / CRS è¦ç¯„ã€‚
          </p>
        </div>
        <div class="bg-[#f3f6fb] border border-blue-100 rounded-lg px-4 py-3 flex gap-3 items-start">
          <span class="mt-1 text-[#0066cc]">
            <i class="fa-solid fa-robot"></i>
          </span>
          <div>
            <p class="text-[11px] font-semibold tracking-[0.16em] text-[#0066cc] uppercase mb-1">
              AI TAX SCANNER
            </p>
            <p class="text-[13px] text-gray-700 leading-relaxed" data-i18n="alert.desc">
              ç³»çµ±æƒæåˆ°ä¸€å¼µæ–°å¢çš„å°ç£é«˜ç¾é‡‘åƒ¹å€¼ä¿å–®ã€‚æ­¤é‡‘é¡å·²è¶…é IRS Form 8938 çš„ 5 è¬ç¾å…ƒç”³å ±é–€æª»ã€‚
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ========= ä¸‹åŠéƒ¨ï¼šè³‡è¨Šå€ï¼ˆåŸæœ¬ Dashboard æ”¶é€²ä¾†ï¼‰ ========= -->
  <main class="flex-grow">
    <div class="max-w-[1280px] mx-auto px-4 md:px-6 lg:px-8 py-8 md:py-10 space-y-8">

      <!-- AI è­¦ç¤ºæ¢ï¼ˆå¯éš±è— / é¡¯ç¤ºï¼‰ -->
      <div id="ai-alert" class="hidden bg-orange-50 border border-orange-200 rounded-md px-4 py-3 flex gap-3 items-start animate-fade-in">
        <span class="text-orange-500 mt-0.5">
          <i class="fa-solid fa-triangle-exclamation"></i>
        </span>
        <div>
          <h3 class="text-[13px] font-semibold text-gray-900 mb-1" data-i18n="alert.title">
            AI ç¨…å‹™è­¦ç¤ºï¼šåµæ¸¬åˆ° FATCA é¢¨éšª
          </h3>
          <p class="text-[13px] text-gray-700 leading-relaxed" data-i18n="alert.desc">
            ç³»çµ±æƒæåˆ°ä¸€å¼µæ–°å¢çš„å°ç£é«˜ç¾é‡‘åƒ¹å€¼ä¿å–®ã€‚æ­¤é‡‘é¡å·²è¶…é IRS Form 8938 çš„ 5 è¬ç¾å…ƒç”³å ±é–€æª»ã€‚
          </p>
          <button class="mt-2 text-[11px] font-semibold text-[#0066cc] uppercase tracking-[0.18em] hover:text-[#004c99]">
            æª¢è¦–è©³ç´°åˆ†æå ±å‘Š â†’
          </button>
        </div>
      </div>

      <div class="grid lg:grid-cols-3 gap-8 items-start">

        <!-- å·¦å´ï¼šè¡¨æ ¼ + Export -->
        <section class="lg:col-span-2 space-y-4">
          <div class="flex justify-between items-end">
            <div>
              <h2 class="text-[16px] font-semibold text-gray-900" data-i18n="table.title">
                è³‡ç”¢æŒæœ‰æ¸…å–®
              </h2>
              <p class="text-[12px] text-gray-500 mt-1">
                ä¾ç…§æœ€æ–°åŒ¯ç‡æ›ç®—ï¼Œæ‰€æœ‰é‡‘é¡çš†ä»¥ç›®å‰é¸æ“‡è²¨å¹£å‘ˆç¾ã€‚
              </p>
            </div>
            <button class="text-[11px] text-[#0066cc] font-semibold uppercase tracking-[0.16em] flex items-center gap-1 hover:text-[#004c99]">
              <i class="fa-solid fa-file-export"></i>
              <span>Export</span>
            </button>
          </div>

          <div class="overflow-x-auto bg-white border border-gray-200 rounded-lg">
            <table class="w-full text-left text-[13px]">
              <thead class="bg-gray-50">
                <tr>
                  <th class="pl-3 pr-2 py-2.5 font-semibold text-gray-500" data-i18n="col.name">è³‡ç”¢åç¨±</th>
                  <th class="pr-2 py-2.5 font-semibold text-gray-500" data-i18n="col.region">åœ°å€</th>
                  <th class="pr-2 py-2.5 font-semibold text-gray-500" data-i18n="col.type">é¡åˆ¥</th>
                  <th class="pr-3 py-2.5 font-semibold text-gray-500 text-right" data-i18n="col.val">ç¾å€¼</th>
                </tr>
              </thead>
              <tbody id="asset-list" class="divide-y divide-gray-100 bg-white"></tbody>
            </table>
          </div>
        </section>

        <!-- å³å´ï¼šåœ“é¤…åœ– + èªªæ˜å¡ -->
        <section class="space-y-4">
          <div class="bg-white border border-gray-200 rounded-lg p-4">
            <h3 class="text-[12px] font-semibold tracking-[0.16em] text-gray-500 uppercase mb-4" data-i18n="chart.title">
              å€åŸŸè³‡ç”¢é…ç½®
            </h3>
            <div class="h-56 relative">
              <canvas id="geoChart"></canvas>
              <div class="pointer-events-none absolute inset-0 flex items-center justify-center">
                <div class="text-center">
                  <p class="text-[10px] font-semibold text-gray-400 uppercase tracking-[0.22em]">TOTAL</p>
                  <p class="text-[13px] font-semibold text-gray-900">100%</p>
                </div>
              </div>
            </div>
          </div>

          <div class="bg-[#f3f6fb] border border-blue-100 rounded-lg p-4">
            <div class="flex items-center gap-2 mb-1">
              <i class="fa-solid fa-robot text-[#0066cc] text-sm"></i>
              <span class="text-[11px] font-semibold tracking-[0.16em] text-[#0066cc] uppercase" data-i18n="chart.insight">
                AI Insight
              </span>
            </div>
            <p class="text-[13px] text-gray-700 leading-relaxed" data-i18n="chart.desc">
              æ‚¨çš„å°ç£è³‡ç”¢ä½”ç¸½æ·¨å€¼çš„ 40%ã€‚å»ºè­°é‡å°å°å¹£åŒ¯ç‡é¢¨éšªé€²è¡Œé¿éšªã€‚
            </p>
          </div>
        </section>
      </div>
    </div>
  </main>

  <!-- ========= FOOTER ========= -->
  <footer class="bg-[#f3f3f3] border-t border-gray-200 mt-8">
    <div class="max-w-[1280px] mx-auto px-4 md:px-6 lg:px-8 py-6 text-[11px] text-gray-500 flex flex-col md:flex-row md:items-center md:justify-between gap-2">
      <p>&copy; 2025 Taimic Inc. All Rights Reserved.</p>
      <p class="flex items-center gap-2">
        <span>FATCA / CRS Compliant Â· Cross-Border Wealth Platform</span>
      </p>
    </div>
  </footer>

  <!-- ========= Modalï¼šAI OCR æ–°å¢è³‡ç”¢ ========= -->
  <div id="modal-overlay" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-white w-full max-w-md rounded-lg shadow-2xl overflow-hidden">
      <div class="bg-[#0066cc] text-white px-5 py-3 flex items-center justify-between">
        <h3 class="text-[14px] font-semibold tracking-wide" data-i18n="modal.title">
          æ–°å¢å°ç£è³‡ç”¢ (AI OCR)
        </h3>
        <button class="text-lg hover:opacity-80" onclick="closeModal()">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>

      <div id="modal-step-1" class="p-6 space-y-4">
        <div class="w-14 h-14 rounded-full bg-blue-50 flex items-center justify-center mx-auto text-[#0066cc] mb-2">
          <i class="fa-solid fa-cloud-arrow-up text-xl"></i>
        </div>
        <p class="text-[13px] text-gray-600 text-center leading-relaxed" data-i18n="modal.desc">
          ä¸Šå‚³ä¿å–®é¦–é æˆ–éŠ€è¡Œå°å¸³å–®ï¼ŒAI å°‡è‡ªå‹•æå–é—œéµæ•¸æ“šã€‚
        </p>
        <button onclick="startScan()" class="w-full border-2 border-dashed border-gray-300 rounded-md py-4 text-[13px] text-gray-500 hover:border-[#0066cc] hover:text-[#0066cc] hover:bg-blue-50/40 transition-all font-semibold">
          <span data-i18n="btn.upload">é»æ“Šä¸Šå‚³æª”æ¡ˆ</span>
        </button>
      </div>

      <div id="modal-step-2" class="hidden relative h-64 bg-[#111827]">
        <div class="absolute inset-0 flex flex-col items-center justify-center z-10">
          <p class="text-white font-mono text-[13px] mb-3" data-i18n="modal.scanning">AI åˆ†æä¸­...</p>
          <div class="w-52 h-1.5 bg-gray-700 rounded-full overflow-hidden mb-4">
            <div id="scan-bar" class="h-full w-0 bg-[#3b82f6] transition-all duration-[2800ms] ease-linear"></div>
          </div>
          <div id="scan-log" class="text-[11px] text-emerald-300 font-mono h-14 flex flex-col items-center"></div>
        </div>
        <div class="scan-overlay absolute inset-0"></div>
      </div>
    </div>
  </div>

  <!-- ========= Script ========= -->
  <script>
    const RATE = 32.5;
    let curr = 'TWD';
    let lang = 'zh';

    const assets = [
      {
        id: 1,
        name: { en: 'Vanguard Total Stock (VTI)', zh: 'Vanguard å…¨çƒè‚¡ç¥¨ ETF (VTI)' },
        type: { en: 'ETF', zh: 'æŒ‡æ•¸å‹åŸºé‡‘' },
        region: 'US',
        usd: 145200
      },
      {
        id: 2,
        name: { en: 'Taipei Xinyi Condo', zh: 'å°åŒ—ä¿¡ç¾©å€å…¬å¯“' },
        type: { en: 'Real Estate', zh: 'æˆ¿åœ°ç”¢' },
        region: 'TW',
        usd: 280000
      },
      {
        id: 3,
        name: { en: 'Fidelity 401(k)', zh: 'å¯Œé”é€€ä¼‘é‡‘ 401(k)' },
        type: { en: 'Retirement', zh: 'é€€ä¼‘é‡‘' },
        region: 'US',
        usd: 98500
      }
    ];

    const I18N = {
      en: {
        'nav.overview': 'Overview',
        'nav.tax': 'Tax & Compliance',
        'nav.estate': 'Estate Planning',
        'nav.reports': 'Reports',

        'page.title': 'Cross-Border Wealth Platform',
        'page.desc': 'Integrated view of Taiwan & US assets with FATCA compliance checks.',

        'btn.add': 'Add Asset',
        'btn.upload': 'Click to Upload File',

        'stat.us': 'US Net Worth',
        'stat.tw': 'Taiwan Net Worth',
        'stat.global': 'Global Net Worth',
        'stat.safe': 'Estate Tax Risk: Safe',

        'table.title': 'Portfolio Holdings',
        'col.name': 'Asset Name',
        'col.region': 'Region',
        'col.type': 'Category',
        'col.val': 'Value',

        'alert.title': 'AI Tax Alert: FATCA Risk Detected',
        'alert.desc': 'We detected a new high cash value policy in Taiwan. This exceeds the $50,000 reporting threshold for IRS Form 8938.',

        'chart.title': 'Regional Allocation',
        'chart.insight': 'AI Insight',
        'chart.desc': 'Your Taiwan assets comprise 40% of your net worth. Consider hedging TWD currency risk.',

        'modal.title': 'Add Taiwan Asset (AI OCR)',
        'modal.desc': 'Upload policy or statement. AI will extract data.',
        'modal.scanning': 'AI Processing...',

        'user.login': 'Login',
        'user.register': 'Register'
      },
      zh: {
        'nav.overview': 'è³‡ç”¢ç¸½è¦½',
        'nav.tax': 'ç¨…å‹™åˆè¦',
        'nav.estate': 'å®¶æ—å‚³æ‰¿',
        'nav.reports': 'åˆ†æå ±å‘Š',

        'page.title': 'è·¨åœ‹è³‡ç”¢æ•´åˆå¹³å°',
        'page.desc': 'æ•´åˆå°ç£èˆ‡ç¾åœ‹è³‡ç”¢ï¼Œæä¾›å³æ™‚æ·¨å€¼åˆ†æèˆ‡è·¨å¢ƒç¨…å‹™é¢¨éšªæª¢æ¸¬ï¼Œè®“é«˜æ·¨å€¼è·¨åœ‹ç§»æ°‘ä¹Ÿèƒ½äº«æœ‰å®¶æ—è¾¦å…¬å®¤ç­‰ç´šçš„æ§ç›¤è¦–è§’ã€‚',

        'btn.add': 'æ–°å¢è³‡ç”¢',
        'btn.upload': 'é»æ“Šä¸Šå‚³æª”æ¡ˆ',

        'stat.us': 'ç¾åœ‹ç¸½è³‡ç”¢',
        'stat.tw': 'å°ç£ç¸½è³‡ç”¢',
        'stat.global': 'å…¨çƒç¸½æ·¨å€¼',
        'stat.safe': 'éºç”¢ç¨…é¢¨éšªï¼šå®‰å…¨',

        'table.title': 'è³‡ç”¢æŒæœ‰æ¸…å–®',
        'col.name': 'è³‡ç”¢åç¨±',
        'col.region': 'åœ°å€',
        'col.type': 'é¡åˆ¥',
        'col.val': 'ç¾å€¼',

        'alert.title': 'AI ç¨…å‹™è­¦ç¤ºï¼šåµæ¸¬åˆ° FATCA é¢¨éšª',
        'alert.desc': 'ç³»çµ±æƒæåˆ°ä¸€å¼µæ–°å¢çš„å°ç£é«˜ç¾é‡‘åƒ¹å€¼ä¿å–®ã€‚æ­¤é‡‘é¡å·²è¶…é IRS Form 8938 çš„ 5 è¬ç¾å…ƒç”³å ±é–€æª»ã€‚',

        'chart.title': 'å€åŸŸè³‡ç”¢é…ç½®',
        'chart.insight': 'AI æ™ºèƒ½åˆ†æ',
        'chart.desc': 'æ‚¨çš„å°ç£è³‡ç”¢ä½”ç¸½æ·¨å€¼çš„ 40%ã€‚å»ºè­°é‡å°å°å¹£åŒ¯ç‡é¢¨éšªé€²è¡Œé¿éšªã€‚',

        'modal.title': 'æ–°å¢å°ç£è³‡ç”¢ (AI OCR)',
        'modal.desc': 'ä¸Šå‚³ä¿å–®é¦–é æˆ–éŠ€è¡Œå°å¸³å–®ï¼ŒAI å°‡è‡ªå‹•æå–é—œéµæ•¸æ“šã€‚',
        'modal.scanning': 'AI åˆ†æä¸­...',

        'user.login': 'ç™»å…¥',
        'user.register': 'è¨»å†Š'
      }
    };

    function fmt(usd) {
      const val = curr === 'USD' ? usd : usd * RATE;
      return new Intl.NumberFormat(curr === 'USD' ? 'en-US' : 'zh-TW', {
        style: 'currency',
        currency: curr,
        maximumFractionDigits: 0
      }).format(val);
    }

    function render() {
      const t = I18N[lang];

      // æ–‡æ¡ˆ
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        if (t[key]) el.textContent = t[key];
      });

      // é‡‘é¡
      document.querySelectorAll('.val-display').forEach(el => {
        const usd = parseFloat(el.dataset.usd || '0');
        el.textContent = fmt(usd);
      });

      // è¡¨æ ¼
      const tbody = document.getElementById('asset-list');
      tbody.innerHTML = '';
      assets.forEach(a => {
        const name = a.name[lang];
        const type = a.type[lang];
        const flag = a.region === 'US' ? 'ğŸ‡ºğŸ‡¸' : 'ğŸ‡¹ğŸ‡¼';
        const badge = a.region === 'US'
          ? 'bg-blue-50 text-blue-700'
          : 'bg-emerald-50 text-emerald-700';
        const hlClass = a.new ? 'bg-orange-50/60' : '';

        const riskTag = a.risk
          ? `<span class="ml-2 inline-flex items-center px-1.5 py-0.5 rounded-full bg-orange-100 text-orange-700 text-[10px] font-semibold border border-orange-200">FATCA</span>`
          : '';

        tbody.innerHTML += `
          <tr class="group ${hlClass}">
            <td class="pl-3 pr-2 py-3">
              <div class="font-semibold text-gray-900 group-hover:text-[#0066cc] transition-colors">${name}</div>
            </td>
            <td class="pr-2 py-3">
              <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] font-semibold ${badge}">
                <span>${flag}</span><span>${a.region}</span>
              </span>
              ${riskTag}
            </td>
            <td class="pr-2 py-3 text-[13px] text-gray-600">
              ${type}
            </td>
            <td class="pr-3 py-3 text-right font-mono text-[13px] font-semibold text-gray-900">
              ${fmt(a.usd)}
            </td>
          </tr>
        `;
      });

      // Currency button state
      btnUsd.className = curr === 'USD'
        ? 'px-3 py-1.5 bg-gray-100 text-[#0066cc] font-semibold'
        : 'px-3 py-1.5 hover:bg-gray-50 transition-colors';

      btnTwd.className = curr === 'TWD'
        ? 'px-3 py-1.5 bg-gray-100 text-[#0066cc] font-semibold'
        : 'px-3 py-1.5 hover:bg-gray-50 transition-colors';

      // èªè¨€é¸é …
      optZh.classList.toggle('active', lang === 'zh');
      optEn.classList.toggle('active', lang === 'en');
    }

    function setCurrency(c) {
      curr = c;
      render();
    }

    function changeLang(l) {
      lang = l;
      render();
      langMenu.classList.add('hidden');
    }

    function openModal() {
      modalOverlay.classList.remove('hidden');
      document.getElementById('modal-step-1').classList.remove('hidden');
      document.getElementById('modal-step-2').classList.add('hidden');
      document.getElementById('scan-bar').style.width = '0%';
      document.getElementById('scan-log').innerHTML = '';
    }

    function closeModal() {
      modalOverlay.classList.add('hidden');
    }

    function startScan() {
      document.getElementById('modal-step-1').classList.add('hidden');
      document.getElementById('modal-step-2').classList.remove('hidden');

      const bar = document.getElementById('scan-bar');
      const log = document.getElementById('scan-log');

      setTimeout(() => { bar.style.width = '100%'; }, 80);
      setTimeout(() => { log.innerHTML = '&gt; Detecting Language: zh-TW'; }, 800);
      setTimeout(() => { log.innerHTML += '<br>&gt; Parsing: "å¯Œé‚¦äººå£½ (Fubon Life)"'; }, 1600);
      setTimeout(() => { log.innerHTML += '<br>&gt; Match IRS Code: 8938'; }, 2400);

      setTimeout(() => {
        assets.unshift({
          id: 99,
          name: { en: 'Fubon Life (Whole Life)', zh: 'å¯Œé‚¦äººå£½ (çµ‚èº«å£½éšª)' },
          type: { en: 'Insurance', zh: 'å„²è“„éšª' },
          region: 'TW',
          usd: 52000,
          new: true,
          risk: true
        });

        const twEl = document.getElementById('val-tw');
        twEl.dataset.usd = parseFloat(twEl.dataset.usd) + 52000;

        const gEl = document.getElementById('val-global');
        gEl.dataset.usd = parseFloat(gEl.dataset.usd) + 52000;

        chart.data.datasets[0].data[1] += 52000;
        chart.update();

        document.getElementById('ai-alert').classList.remove('hidden');
        render();
        closeModal();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }, 3000);
    }

    // ====== å…¨å±€ DOM å¿«å– ======
    let chart;
    let btnUsd, btnTwd, optZh, optEn;
    let langMenu, userMenu, modalOverlay;

    window.onload = function () {
      const ctx = document.getElementById('geoChart').getContext('2d');
      chart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['US', 'TW'],
          datasets: [{
            data: [482500, 315200],
            backgroundColor: ['#0066cc', '#111827'],
            borderWidth: 0
          }]
        },
        options: {
          cutout: '75%',
          plugins: {
            legend: { display: false }
          }
        }
      });

      btnUsd = document.getElementById('btn-usd');
      btnTwd = document.getElementById('btn-twd');
      optZh = document.getElementById('opt-zh');
      optEn = document.getElementById('opt-en');
      langMenu = document.getElementById('lang-menu');
      userMenu = document.getElementById('user-menu');
      modalOverlay = document.getElementById('modal-overlay');

      render();

      const langToggle = document.getElementById('lang-toggle');
      const userToggle = document.getElementById('user-toggle');

      function closeAllMenus() {
        langMenu.classList.add('hidden');
        userMenu.classList.add('hidden');
      }

      if (langToggle) {
        langToggle.addEventListener('click', (e) => {
          e.stopPropagation();
          const willOpen = langMenu.classList.contains('hidden');
          closeAllMenus();
          if (willOpen) langMenu.classList.remove('hidden');
        });
        langMenu.addEventListener('click', (e) => e.stopPropagation());
      }

      if (userToggle) {
        userToggle.addEventListener('click', (e) => {
          e.stopPropagation();
          const willOpen = userMenu.classList.contains('hidden');
          closeAllMenus();
          if (willOpen) userMenu.classList.remove('hidden');
        });
        userMenu.addEventListener('click', (e) => e.stopPropagation());
      }

      document.addEventListener('click', closeAllMenus);
    };
  </script>
</body>
</html>
