<!DOCTYPE html>
<html lang="en">
<head>
  <title>Taimic â€“ Operating System for Cross-Border Families | è·¨åœ‹å®¶åº­çš„ä½œæ¥­ç³»çµ±</title>

  <meta name="description" content="Taimic is the operating system for cross-border families and global citizens with assets in multiple countries. We consolidate bank accounts, insurance policies and properties across borders, track your global net worth, and use AI to help with tax, insurance and legacy planning. Taimic å°ˆç‚ºåœ¨ç¾å°ç£äººèˆ‡ Global Citizens è¨­è¨ˆï¼Œä¸€å€‹ App æ•´åˆå°ç£èˆ‡ç¾åœ‹è³‡ç”¢ï¼Œè¿½è¹¤å…¨çƒæ·¨å€¼ï¼Œä¸¦ç”¨ AI å¹«ä½ è™•ç†è·¨å¢ƒç¨…å‹™ã€ä¿éšªé…ç½®èˆ‡è³‡ç”¢å‚³æ‰¿ã€‚">

  <meta name="google-site-verification" content="gV1-KrDsf1kP8p7LjdDUhNCEhEJXMG9gvrFhZU9Ab_0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="main.css" />
</head>

<body class="min-h-screen bg-[#F5F7FA]">

  <!-- ======================== -->
  <!-- Marketing (pre-login) UI -->
  <!-- ======================== -->
  <div id="marketing-shell" class="flex flex-col min-h-screen">
    <header class="bg-white border-b border-gray-200 sticky top-0 z-40 shadow-sm h-[72px]">
      <div class="max-w-[1440px] mx-auto px-6 h-full flex justify-between items-center relative">
        <div class="flex items-center gap-4 cursor-pointer" onclick="switchSection('overview')">
          <svg class="logo-clock" viewBox="0 0 100 100">
            <defs>
              <linearGradient id="clockGradient" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#bfdbfe" />
                <stop offset="100%" stop-color="#60a5fa" />
              </linearGradient>
            </defs>
            <circle cx="50" cy="50" r="46" class="clock-outer" />
            <circle cx="50" cy="50" r="38" class="clock-inner" />
            <circle cx="50" cy="50" r="30" class="clock-core" />
            <line x1="50" y1="12" x2="50" y2="18" class="clock-tick-line" />
            <line x1="88" y1="50" x2="82" y2="50" class="clock-tick-line" />
            <line x1="50" y1="82" x2="50" y2="88" class="clock-tick-line" />
            <line x1="18" y1="50" x2="12" y2="50" class="clock-tick-line" />
            <line x1="50" y1="50" x2="50" y2="30" class="hand hand-hour" />
            <line x1="50" y1="50" x2="66" y2="34" class="hand hand-minute" />
            <circle cx="50" cy="50" r="3.2" class="center-dot" />
          </svg>
          <div class="flex flex-col justify-center">
            <span class="text-[22px] font-[700] tracking-tight text-[#0066cc] leading-none">TAIMIC</span>
            <span class="text-[10px] font-[600] tracking-[0.2em] text-gray-500 mt-1 uppercase">Global Wealth</span>
          </div>
        </div>

        <nav class="hidden lg:flex h-full items-center space-x-4">
          <a href="#" class="nav-link active" data-section="overview" data-i18n="nav.overview">Overview</a>
          <a href="#" class="nav-link" data-section="pricing" data-i18n="nav.pricing">Pricing</a>
          <a href="#" class="nav-link" data-section="reports" data-i18n="nav.reports">Reports</a>
          <a href="#" class="nav-link" data-section="about" data-i18n="nav.about">About Taimic</a>
        </nav>

        <div class="flex items-center gap-6 h-full">
          <div class="hidden sm:flex items-center text-xs font-medium text-gray-600 border border-gray-200 rounded-full overflow-hidden bg-gray-50 shadow-sm">
            <button id="btn-usd" onclick="setCurrency('USD')" class="px-4 py-2 transition-colors">USD</button>
            <button id="btn-twd" onclick="setCurrency('TWD')" class="px-4 py-2 transition-colors">TWD</button>
          </div>

          <div class="dropdown-container cursor-pointer h-full">
            <button id="lang-toggle" type="button" class="flex items-center gap-2 text-gray-600 hover:text-[#0066cc] transition-colors">
              <div class="w-9 h-9 rounded-full flex items-center justify-center bg-gray-50 border border-gray-200">
                <i class="fa-solid fa-globe text-sm"></i>
              </div>
              <i class="fa-solid fa-caret-down text-xs"></i>
            </button>
            <div id="lang-menu" class="dropdown-menu hidden">
              <div id="opt-zh" class="dropdown-item" onclick="changeLang('zh')">ç¹é«”ä¸­æ–‡</div>
              <div id="opt-en" class="dropdown-item active" onclick="changeLang('en')">English</div>
            </div>
          </div>

          <!-- ç™»å…¥å‰ / ç™»å…¥å¾Œ user menuï¼ˆåªåœ¨ marketing shell ç”¨ï¼‰ -->
          <div class="dropdown-container cursor-pointer h-full border-l border-gray-200 pl-4">
            <button id="user-toggle" type="button" class="w-10 h-10 bg-[#f3f4f6] text-gray-600 rounded-full flex items-center justify-center hover:bg-[#0066cc] hover:text-white transition-colors">
              <i class="fa-solid fa-user text-base"></i>
            </button>
            <div id="user-menu" class="dropdown-menu hidden">
              <!-- æœªç™»å…¥ç‹€æ…‹ -->
              <div id="user-menu-guest">
                <div class="dropdown-item" onclick="openAuthModal('login')">
                  <i class="fa-solid fa-right-to-bracket"></i>
                  <span data-i18n="user.login">Login</span>
                </div>
                <div class="dropdown-item" onclick="openAuthModal('register')">
                  <i class="fa-solid fa-user-plus"></i>
                  <span data-i18n="user.register">Sign up</span>
                </div>
                <div class="border-t border-gray-100 my-1"></div>
                <div class="dropdown-item">
                  <i class="fa-solid fa-circle-question"></i>
                  <span>Help</span>
                </div>
              </div>

              <!-- å·²ç™»å…¥ç‹€æ…‹ -->
              <div id="user-menu-loggedin" class="hidden">
                <div class="px-4 py-3 border-b border-gray-100">
                  <p class="text-[10px] text-slate-500 uppercase tracking-[0.16em]">Signed in as</p>
                  <p id="user-email-label" class="text-xs font-semibold text-slate-800 truncate"></p>
                </div>
                <div class="dropdown-item" onclick="goToReports()">
                  <i class="fa-solid fa-chart-line"></i>
                  <span>Open my reports</span>
                </div>
                <div class="border-t border-gray-100 my-1"></div>
                <div class="dropdown-item" onclick="handleLogout()">
                  <i class="fa-solid fa-arrow-right-from-bracket"></i>
                  <span>Logout</span>
                </div>
              </div>
            </div>
          </div>

          <button id="mobile-menu-btn" class="lg:hidden pl-2 text-gray-600 hover:text-[#0066cc] focus:outline-none">
            <i class="fa-solid fa-bars text-xl"></i>
          </button>
        </div>
      </div>

      <div id="mobile-menu" class="hidden lg:hidden bg-white border-t border-gray-100 absolute top-[72px] left-0 w-full shadow-lg z-30">
        <div class="flex flex-col p-4 space-y-2">
          <a href="#" class="mobile-nav-link block px-4 py-3 rounded-lg text-gray-600 font-medium hover:bg-gray-50 hover:text-[#0066cc]" data-section="overview" data-i18n="nav.overview">Overview</a>
          <a href="#" class="mobile-nav-link block px-4 py-3 rounded-lg text-gray-600 font-medium hover:bg-gray-50 hover:text-[#0066cc]" data-section="pricing" data-i18n="nav.pricing">Pricing</a>
          <a href="#" class="mobile-nav-link block px-4 py-3 rounded-lg text-gray-600 font-medium hover:bg-gray-50 hover:text-[#0066cc]" data-section="reports" data-i18n="nav.reports">Reports</a>
          <a href="#" class="mobile-nav-link block px-4 py-3 rounded-lg text-gray-600 font-medium hover:bg-gray-50 hover:text-[#0066cc]" data-section="about" data-i18n="nav.about">About Taimic</a>
          
          <div class="pt-2 mt-2 border-t border-gray-100 flex gap-2">
            <button onclick="setCurrency('USD')" class="flex-1 py-2 text-xs font-bold border border-gray-200 rounded text-center hover:bg-gray-50">USD</button>
            <button onclick="setCurrency('TWD')" class="flex-1 py-2 text-xs font-bold border border-gray-200 rounded text-center hover:bg-gray-50">TWD</button>
          </div>
        </div>
      </div>
    </header>

    <main class="flex-grow">
      <section id="section-overview">
        <!-- Hero / risk scan (unchanged structure) -->
        <section class="relative border-b border-slate-200 bg-gradient-to-b from-[#ecf3ff] via-[#f7f9ff] to-[#e5edf9]">
          <div id="hero-overlay" class="absolute inset-0 z-20 hidden cursor-pointer"></div>

          <div class="max-w-[1440px] mx-auto px-6 pt-16 pb-10 md:pt-20 md:pb-24">
            <div class="max-w-3xl mx-auto text-center space-y-6">
              <p class="text-xs font-semibold tracking-[0.28em] text-slate-500 uppercase">
                CROSS-BORDER WEALTH OS
              </p>
              <h1 class="text-[32px] sm:text-[40px] md:text-[46px] font-extrabold tracking-tight text-slate-900 leading-tight">
                The OS for your
                <span class="text-[#0066cc]">Cross-border Wealth.</span>
              </h1>
              <p class="text-sm md:text-base text-slate-600 leading-relaxed max-w-xl mx-auto">
                <span class="block">Automated FATCA compliance.</span>
                <span class="block">Real-time net worth tracking.</span>
                <span class="block">AI insights for global families.</span>
              </p>

              <div class="flex flex-wrap items-center justify-center gap-3">
                <button
                  id="hero-run-scan-btn"
                  type="button"
                  class="inline-flex items-center justify-center px-7 py-3 rounded-full bg-[#2563eb] hover:bg-[#1d4ed8] text-white text-sm md:text-base font-semibold shadow-[0_18px_60px_rgba(37,99,235,0.45)]">
                  Run Free Risk Scan
                </button>
              </div>

              <div class="flex items-center justify-center gap-2 text-[11px] text-slate-500 pt-1">
                <span>No sign-up for first scan</span>
                <span class="hidden sm:inline">Â·</span>
                <span>Takes 60 seconds</span>
              </div>
            </div>

            <div class="mt-10 md:mt-12 flex justify-center relative">
              <div
                id="compliance-card"
                class="w-full max-w-4xl hero-card-outer relative transition-all duration-500 ease-out z-30">
                <div class="bg-white/95 rounded-3xl shadow-[0_24px_80px_rgba(37,99,235,0.26)] border border-blue-100 px-6 py-6 md:px-8 md:py-7">
                  <div class="flex items-center justify-between mb-5">
                    <div>
                      <p class="text-[11px] font-semibold tracking-[0.18em] text-slate-500 uppercase">
                        Compliance Risk Screener
                      </p>
                      <div class="mt-2 inline-flex items-center gap-2 rounded-full bg-blue-50 border border-blue-100 px-2.5 py-1">
                        <span class="inline-flex w-1.5 h-1.5 rounded-full bg-emerald-500"></span>
                        <span class="text-[10px] font-semibold tracking-[0.18em] uppercase text-[#1d4ed8]">
                          Powered by Taimic AI
                        </span>
                      </div>
                    </div>
                    <div class="flex items-center gap-2 text-[11px] text-slate-500">
                      <div class="w-8 h-8 rounded-full bg-slate-50 border border-slate-200 flex items-center justify-center">
                        <i class="fa-solid fa-shield-halved text-xs text-[#1d4ed8]"></i>
                      </div>
                      <span class="uppercase tracking-[0.18em] font-semibold">
                        Bank-level encryption
                      </span>
                    </div>
                  </div>

                  <div class="space-y-5">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div class="space-y-4">
                        <input id="hero-identity" type="hidden" value="non-us" />
                        <input id="hero-residence" type="hidden" value="tw" />

                        <div class="space-y-2">
                          <p class="text-[11px] font-semibold tracking-[0.18em] text-slate-500 uppercase">
                            Tax Status
                          </p>
                          <div class="inline-flex rounded-full bg-slate-100 p-1 gap-1">
                            <button
                              type="button"
                              class="hero-identity-pill px-3.5 py-1.5 rounded-full text-[11px] font-semibold bg-slate-900 text-white shadow-sm"
                              onclick="
                                document.getElementById('hero-identity').value='non-us';
                                document.querySelectorAll('.hero-identity-pill').forEach(function(btn){
                                  btn.classList.remove('bg-slate-900','text-white');
                                  btn.classList.add('bg-transparent','text-slate-600');
                                });
                                this.classList.add('bg-slate-900','text-white');
                                this.classList.remove('bg-transparent','text-slate-600');
                                calculateHeroTotal();
                              "
                            >
                              Non-US Person
                            </button>
                            <button
                              type="button"
                              class="hero-identity-pill px-3.5 py-1.5 rounded-full text-[11px] font-semibold bg-transparent text-slate-600 hover:bg-slate-200/70"
                              onclick="
                                document.getElementById('hero-identity').value='us';
                                document.querySelectorAll('.hero-identity-pill').forEach(function(btn){
                                  btn.classList.remove('bg-slate-900','text-white');
                                  btn.classList.add('bg-transparent','text-slate-600');
                                });
                                this.classList.add('bg-slate-900','text-white');
                                this.classList.remove('bg-transparent','text-slate-600');
                                calculateHeroTotal();
                              "
                            >
                              US Citizen / Green Card
                            </button>
                          </div>
                        </div>

                        <div class="space-y-2">
                          <p class="text-[11px] font-semibold tracking-[0.18em] text-slate-500 uppercase">
                            Residence
                          </p>
                          <div class="inline-flex rounded-full bg-slate-100 p-1 gap-1">
                            <button
                              type="button"
                              class="hero-residence-pill px-3.5 py-1.5 rounded-full text-[11px] font-semibold bg-slate-900 text-white shadow-sm"
                              onclick="
                                document.getElementById('hero-residence').value='tw';
                                document.querySelectorAll('.hero-residence-pill').forEach(function(btn){
                                  btn.classList.remove('bg-slate-900','text-white');
                                  btn.classList.add('bg-transparent','text-slate-600');
                                });
                                this.classList.add('bg-slate-900','text-white');
                                this.classList.remove('bg-transparent','text-slate-600');
                                calculateHeroTotal();
                              "
                            >
                              Living in Taiwan
                            </button>
                            <button
                              type="button"
                              class="hero-residence-pill px-3.5 py-1.5 rounded-full text-[11px] font-semibold bg-transparent text-slate-600 hover:bg-slate-200/70"
                              onclick="
                                document.getElementById('hero-residence').value='us';
                                document.querySelectorAll('.hero-residence-pill').forEach(function(btn){
                                  btn.classList.remove('bg-slate-900','text-white');
                                  btn.classList.add('bg-transparent','text-slate-600');
                                });
                                this.classList.add('bg-slate-900','text-white');
                                this.classList.remove('bg-transparent','text-slate-600');
                                calculateHeroTotal();
                              "
                            >
                              Living in US
                            </button>
                          </div>
                        </div>

                        <div class="space-y-2">
                          <p class="text-[11px] font-semibold tracking-[0.18em] text-slate-500 uppercase">
                            Asset Types
                          </p>
                          <div class="flex flex-wrap gap-2">
                            <label class="inline-flex items-center gap-2 text-[11px] md:text-[12px] text-slate-600 bg-slate-50 border border-slate-200 rounded-full px-3 py-1.5">
                              <input
                                id="hero-asset-cash"
                                type="checkbox"
                                class="rounded border-slate-300"
                                onchange="calculateHeroTotal()"
                              />
                              <span>ç¾é‡‘å­˜æ¬¾ Cash</span>
                            </label>
                            <label class="inline-flex items-center gap-2 text-[11px] md:text-[12px] text-slate-600 bg-slate-50 border border-slate-200 rounded-full px-3 py-1.5">
                              <input
                                id="hero-asset-stocks"
                                type="checkbox"
                                class="rounded border-slate-300"
                                onchange="calculateHeroTotal()"
                              />
                              <span>è‚¡ç¥¨ Stocks</span>
                            </label>
                            <label class="inline-flex items-center gap-2 text-[11px] md:text-[12px] text-slate-600 bg-slate-50 border border-slate-200 rounded-full px-3 py-1.5">
                              <input
                                id="hero-asset-funds"
                                type="checkbox"
                                class="rounded border-slate-300"
                                onchange="calculateHeroTotal()"
                              />
                              <span>åŸºé‡‘ / ETF Funds <span class="text-[10px] text-red-500">ï¼ˆPFIC é«˜é¢¨éšªï¼‰</span></span>
                            </label>
                            <label class="inline-flex items-center gap-2 text-[11px] md:text-[12px] text-slate-600 bg-slate-50 border border-slate-200 rounded-full px-3 py-1.5">
                              <input
                                id="hero-asset-insurance"
                                type="checkbox"
                                class="rounded border-slate-300"
                                onchange="calculateHeroTotal()"
                              />
                              <span>ä¿éšª / å¹´é‡‘ Insurance <span class="text-[10px] text-red-500">ï¼ˆPFIC / Excise Taxï¼‰</span></span>
                            </label>
                          </div>
                          <p id="hero-assets-error" class="hidden text-[11px] text-red-500 mt-1">
                            è«‹è‡³å°‘å‹¾é¸ä¸€é …è³‡ç”¢é¡å‹ / Please select at least one asset type.
                          </p>
                        </div>
                      </div>

                      <div class="space-y-4">
                        <p class="text-[11px] font-semibold tracking-[0.18em] text-slate-500 uppercase">
                          Assets (TWD / USD)
                        </p>

                        <div class="space-y-2">
                          <label for="hero-twd" class="block text-[11px] font-medium text-slate-600 mb-1.5">
                            Taiwan Assets (TWD) / å°ç£è³‡ç”¢
                          </label>
                          <div class="relative">
                            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-[11px] text-slate-400">
                              NT$
                            </span>
                            <input
                              id="hero-twd"
                              type="number"
                              inputmode="decimal"
                              min="0"
                              oninput="calculateHeroTotal()"
                              class="w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50/80 focus:outline-none focus:ring-2 focus:ring-[#2563eb] focus:border-[#2563eb] text-sm text-slate-900"
                              placeholder="e.g. 12,000,000"
                            />
                          </div>
                        </div>

                        <div class="space-y-2">
                          <label for="hero-usd" class="block text-[11px] font-medium text-slate-600 mb-1.5">
                            US / Overseas Assets (USD) / ç¾åœ‹ãƒ»æµ·å¤–è³‡ç”¢
                          </label>
                          <div class="relative">
                            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-[11px] text-slate-400">
                              $
                            </span>
                            <input
                              id="hero-usd"
                              type="number"
                              inputmode="decimal"
                              min="0"
                              oninput="calculateHeroTotal()"
                              class="w-full pl-7 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50/80 focus:outline-none focus:ring-2 focus:ring-[#2563eb] focus:border-[#2563eb] text-sm text-slate-900"
                              placeholder="e.g. 450,000"
                            />
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="pt-4 border-t border-slate-100 flex flex-col md:flex-row items-center justify-between gap-3">
                      <p class="text-[11px] text-slate-500 flex items-center gap-1">
                        <i class="fa-solid fa-circle-info text-[10px] text-slate-400"></i>
                        <span>No sign-up for first scan Â· Takes about 60 seconds</span>
                      </p>
                      <button
                        type="button"
                        onclick="calculateHeroTotal()"
                        class="inline-flex items-center justify-center gap-2 rounded-full bg-[#111827] hover:bg-black text-white text-sm font-semibold px-6 py-2.5 shadow-sm transition"
                      >
                        <span>Analyze My Risks</span>
                        <i class="fa-solid fa-magnifying-glass-chart text-xs"></i>
                      </button>
                    </div>
                  </div>

                  <div id="hero-result" class="mt-6 hidden space-y-5 animate-fade-in">
                    <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-3">
                      <div>
                        <p class="text-[11px] font-semibold tracking-[0.2em] text-slate-500 uppercase mb-1">
                          Est. Global Net Worth (USD)
                        </p>
                        <div
                          id="hero-total"
                          class="text-3xl md:text-4xl font-bold text-slate-900 font-mono tracking-tight"
                        >
                          $0
                        </div>
                        <p class="mt-1 text-[11px] text-slate-500" id="hero-rate-label"></p>
                      </div>
                      <p class="text-[11px] text-slate-600 max-w-xs">
                        Across Taiwan, US and offshore accounts based on the amounts you entered.  
                        This is an estimate for screening, not a legal or tax opinion.
                      </p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                      <div
                        id="hero-us-status"
                        class="rounded-2xl border border-slate-200 bg-white px-4 py-3 flex flex-col gap-2"
                      >
                        <div class="flex items-center justify-between">
                          <div class="text-[11px] font-semibold tracking-[0.18em] text-slate-600 uppercase">
                            ğŸ‡ºğŸ‡¸ US Compliance
                          </div>
                          <div id="hero-us-tag" class="text-[10px] px-2 py-0.5 rounded-full font-semibold tracking-wide bg-slate-100 text-slate-600">
                            â€”
                          </div>
                        </div>
                        <div id="hero-us-body" class="text-xs text-slate-700 space-y-1.5"></div>
                      </div>

                      <div
                        id="hero-tw-status"
                        class="rounded-2xl border border-slate-200 bg-white px-4 py-3 flex flex-col gap-2"
                      >
                        <div class="flex items-center justify-between">
                          <div class="text-[11px] font-semibold tracking-[0.18em] text-slate-600 uppercase">
                            ğŸ‡¹ğŸ‡¼ Taiwan Tax Exposure
                          </div>
                          <div id="hero-tw-tag" class="text-[10px] px-2 py-0.5 rounded-full font-semibold tracking-wide bg-slate-100 text-slate-600">
                            â€”
                          </div>
                        </div>
                        <div id="hero-tw-body" class="text-xs text-slate-700 space-y-1.5"></div>
                      </div>
                    </div>

                    <div class="relative mt-4 overflow-hidden rounded-2xl border border-slate-200 bg-slate-50/80">
                      <div class="absolute inset-0 bg-slate-100/70 backdrop-blur-sm pointer-events-none"></div>
                      <div class="relative p-4 md:p-5 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                        <div class="flex items-start gap-3">
                          <div class="mt-0.5">
                            <div class="w-8 h-8 rounded-full bg-slate-900 flex items-center justify-center text-slate-50">
                              <i class="fa-solid fa-lock text-xs"></i>
                            </div>
                          </div>
                          <div class="space-y-1.5 text-[11px] text-slate-700">
                            <p class="text-sm md:text-[15px] font-semibold text-slate-900">
                              Unlock full cross-border report for your family.
                            </p>
                            <ul class="space-y-1.5">
                              <li class="flex items-start gap-1.5">
                                <i class="fa-solid fa-check text-[10px] text-emerald-600 mt-0.5"></i>
                                <span>Full FATCA / FBAR / CRS threshold checks across accounts.</span>
                              </li>
                              <li class="flex items-start gap-1.5">
                                <i class="fa-solid fa-check text-[10px] text-emerald-600 mt-0.5"></i>
                                <span>Detailed estate &amp; gift tax scenarios for cross-border families.</span>
                              </li>
                              <li class="flex items-start gap-1.5">
                                <i class="fa-solid fa-check text-[10px] text-emerald-600 mt-0.5"></i>
                                <span>AI-generated next steps tailored to your structure.</span>
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="flex md:flex-col md:items-end">
                          <button
                            id="hero-cta-btn"
                            type="button"
                            onclick="openAuthModal('register')"
                            class="hidden inline-flex items-center justify-center gap-2 rounded-full bg-[#2563eb] hover:bg-[#1d4ed8] text-white text-sm font-semibold px-6 py-2.5 shadow-md transition"
                          >
                            <span>Create a free Taimic account</span>
                            <i class="fa-solid fa-arrow-right-long text-xs"></i>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- hero-result end -->
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- ... existing marketing sections below stay unchanged structurally ... -->

        <section class="py-16 md:py-20 bg-[#f3f5f9]">
          <div class="max-w-[1100px] mx-auto px-6">
            <div class="text-center max-w-2xl mx-auto mb-10">
              <p class="text-xs font-semibold tracking-[0.22em] text-gray-500 uppercase mb-2">
                Built for globally mobile families
              </p>
              <h2 class="text-2xl md:text-[28px] font-bold tracking-tight text-slate-900 mb-3">
                See your global balance sheet in one place.
              </h2>
              <p class="text-sm md:text-base text-slate-600">
                Taimic helps you stop guessing and finally see how your Taiwan,
                US and offshore assets fit together â€” with compliance risks
                surfaced automatically.
              </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8">
              <div class="panel p-6 md:p-7 flex flex-col gap-3">
                <div class="w-10 h-10 rounded-full bg-blue-50 text-[#2563eb] flex items-center justify-center mb-1">
                  <i class="fa-solid fa-globe-asia text-sm"></i>
                </div>
                <h3 class="text-base font-semibold text-slate-900">
                  Global View
                </h3>
                <p class="text-sm text-slate-600 leading-relaxed">
                  æ•´åˆå°ç¾èˆ‡å¤šåœ‹è³‡ç”¢ï¼Œçµ±ä¸€ä»¥å–®ä¸€å¹£åˆ¥å‘ˆç¾å¸‚å€¼èˆ‡è³‡ç”¢é…ç½®ï¼Œ
                  ä¸¦è‡ªå‹•å¥—ç”¨å¯¦æ™‚åŒ¯ç‡ï¼Œè®“ä½ ä¸€çœ¼çœ‹æ‡‚æ•´é«”æ·¨å€¼çµæ§‹ã€‚
                </p>
              </div>

              <div class="panel p-6 md:p-7 flex flex-col gap-3">
                <div class="w-10 h-10 rounded-full bg-blue-50 text-[#2563eb] flex items-center justify-center mb-1">
                  <i class="fa-solid fa-shield-check text-sm"></i>
                </div>
                <h3 class="text-base font-semibold text-slate-900">
                  Compliance Radar
                </h3>
                <p class="text-sm text-slate-600 leading-relaxed">
                  è‡ªå‹•åŒ– FATCA / FBAR / CRS é¢¨éšªæª¢æ¸¬ï¼Œè¿½è¹¤é—œéµé–€æª»èˆ‡é¤˜é¡ï¼Œ
                  è®“ç¨…å‹™ä¸å†æ†‘å°è±¡ï¼Œè€Œæ˜¯æœ‰æ•¸æ“šã€æœ‰æé†’ã€æœ‰è„ˆçµ¡ã€‚
                </p>
              </div>

              <div class="panel p-6 md:p-7 flex flex-col gap-3">
                <div class="w-10 h-10 rounded-full bg-blue-50 text-[#2563eb] flex items-center justify-center mb-1">
                  <i class="fa-solid fa-bolt text-sm"></i>
                </div>
                <h3 class="text-base font-semibold text-slate-900">
                  AI Insights
                </h3>
                <p class="text-sm text-slate-600 leading-relaxed">
                  é‡å°ä½ å¯¦éš›æŒæœ‰çš„éƒ¨ä½ï¼Œæä¾› AI é©…å‹•çš„ç¨…å‹™é¢¨éšªæç¤ºã€
                  è³‡ç”¢é›†ä¸­åº¦åˆ†æèˆ‡æƒ…å¢ƒæ¨¡æ“¬ï¼Œå¹«ä½ æå‰çœ‹è¦‹å•é¡Œèˆ‡æ©Ÿæœƒã€‚
                </p>
              </div>
            </div>
          </div>
        </section>

        <section class="py-16 md:py-20 bg-gradient-to-r from-[#e0f2fe] via-[#bfdbfe] to-[#93c5fd] border-t border-blue-100">
          <div class="max-w-[1100px] mx-auto px-6">
            <div class="bg-white/95 rounded-3xl shadow-lg px-8 py-10 md:px-10 md:py-12 flex flex-col md:flex-row items-center justify-between gap-6">
              <div class="text-center md:text-left space-y-2">
                <p class="text-xs font-semibold tracking-[0.2em] text-[#2563eb] uppercase">
                  Stop living in spreadsheets
                </p>
                <h2 class="text-2xl md:text-[28px] font-bold tracking-tight text-slate-900">
                  Stop managing your millions in spreadsheets.
                </h2>
                <p class="text-sm md:text-base text-slate-600 max-w-xl">
                  Bring your Taiwan, US and offshore assetså›åˆ°åŒä¸€å€‹ç•«é¢ï¼Œ
                  è®“ Taimic å¹«ä½ è™•ç†åŒ¯ç‡ã€ç¨…å‹™é–€æª»èˆ‡çµæ§‹é¢¨éšªï¼Œä½ åªéœ€è¦å°ˆå¿ƒåšæ±ºç­–ã€‚
                </p>
              </div>

              <div class="flex justify-center md:justify-end w-full md:w-auto">
                <button
                  type="button"
                  class="inline-flex items-center justify-center px-7 py-3.5 rounded-full bg-white text-slate-900 text-sm md:text-base font-semibold shadow-md border border-slate-200 hover:shadow-lg hover:-translate-y-0.5 transition"
                  onclick="openAuthModal('register')"
                >
                  Create your Taimic account
                </button>
              </div>
            </div>
          </div>
        </section>

        <!-- Stats + chart section (hidden) -->
        <section class="py-10 hidden">
          <div class="max-w-[1440px] mx-auto px-6 w-full">
            <div class="panel px-6 md:px-8 lg:px-10 py-8 md:py-10">
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
                <div class="p-6 border border-gray-200 rounded-xl hover:border-[#0066cc] transition-colors bg-white">
                  <div class="flex justify-between items-start mb-4">
                    <h3 class="text-xs font-bold text-gray-500 uppercase tracking-[0.18em]" data-i18n="stat.us">
                      US Net Worth
                    </h3>
                    <span class="text-xl">ğŸ‡ºğŸ‡¸</span>
                  </div>
                  <div
                    class="text-3xl font-bold text-[#111827] font-mono tracking-tight val-display"
                    data-usd="482500"
                  >
                    ...
                  </div>
                  <div class="mt-2 text-xs font-medium text-green-600 flex items-center gap-1">
                    <i class="fa-solid fa-arrow-trend-up"></i> +4.2% YTD
                  </div>
                </div>

                <div class="p-6 border border-gray-200 rounded-xl hover:border-[#0066cc] transition-colors bg-white">
                  <div class="flex justify-between items-start mb-4">
                    <h3 class="text-xs font-bold text-gray-500 uppercase tracking-[0.18em]" data-i18n="stat.tw">
                      Taiwan Net Worth
                    </h3>
                    <span class="text-xl">ğŸ‡¹ğŸ‡¼</span>
                  </div>
                  <div
                    id="val-tw"
                    class="text-3xl font-bold text-[#111827] font-mono tracking-tight val-display"
                    data-usd="315200"
                  >
                    ...
                  </div>
                  <div class="mt-2 text-xs font-medium text-green-600 flex items-center gap-1">
                    <i class="fa-solid fa-arrow-trend-up"></i> +1.8% YTD
                  </div>
                </div>

                <div class="p-6 bg-[#eff4fb] border border-blue-100 rounded-xl">
                  <div class="flex justify-between items-start mb-4">
                    <h3 class="text-xs font-bold text-[#0066cc] uppercase tracking-[0.2em]" data-i18n="stat.global">
                      Global Net Worth
                    </h3>
                    <i class="fa-solid fa-globe text-[#0066cc]"></i>
                  </div>
                  <div
                    id="val-global"
                    class="text-3xl font-bold text-[#0066cc] font-mono tracking-tight val-display"
                    data-usd="797700"
                  >
                    ...
                  </div>
                  <div class="mt-2 text-xs font-medium text-gray-600 flex items-center gap-1">
                    <i class="fa-solid fa-shield-check text-[#0066cc]"></i>
                    <span data-i18n="stat.safe">Estate tax risk: safe</span>
                  </div>
                </div>
              </div>

              <div class="grid grid-cols-1 lg:grid-cols-3 gap-10">
                <div class="lg:col-span-2">
                  <div
                    id="ai-alert"
                    class="hidden mb-8 bg-orange-50 border-l-4 border-orange-500 rounded-lg p-5 flex gap-4 animate-fade-in"
                  >
                    <div class="text-orange-500 pt-1">
                      <i class="fa-solid fa-triangle-exclamation text-lg"></i>
                    </div>
                    <div>
                      <h4
                        class="font-bold text-[#111827] text-sm mb-1"
                        data-i18n="alert.title"
                      >
                        AI tax alert: potential FATCA risk detected
                      </h4>
                      <p
                        class="text-sm text-gray-700 leading-relaxed"
                        data-i18n="alert.desc"
                      >
                        A new high cash-value policy in Taiwan may exceed the
                        Form 8938 reporting threshold.
                      </p>
                      <button
                        class="mt-3 text-xs font-bold text-[#0066cc] uppercase tracking-wide hover:underline"
                      >
                        View detailed report &rarr;
                      </button>
                    </div>
                  </div>

                  <div class="flex justify-between items-end mb-4 pb-2 border-b border-gray-200">
                    <h3 class="text-lg font-bold text-[#111827]" data-i18n="table.title">
                      Holdings
                    </h3>
                    <button class="text-xs text-[#0066cc] font-bold uppercase hover:text-[#004c99] flex items-center gap-1">
                      <i class="fa-solid fa-file-export"></i> Export
                    </button>
                  </div>

                  <div class="overflow-x-auto">
                    <table class="w-full text-left text-sm">
                      <thead>
                        <tr class="text-xs text-gray-500 uppercase tracking-[0.16em]">
                          <th class="pl-2 pb-3 border-b-2 border-gray-100" data-i18n="col.name">
                            Asset
                          </th>
                          <th class="pb-3 border-b-2 border-gray-100" data-i18n="col.region">
                            Region
                          </th>
                          <th class="pb-3 border-b-2 border-gray-100" data-i18n="col.type">
                            Type
                          </th>
                          <th class="pr-2 pb-3 border-b-2 border-gray-100 text-right" data-i18n="col.val">
                            Value
                          </th>
                        </tr>
                      </thead>
                      <tbody id="asset-list"></tbody>
                    </table>
                  </div>
                </div>

                <div class="space-y-8">
                  <div class="border border-gray-200 rounded-3xl p-8 bg-white shadow-sm">
                    <h3 class="text-xs font-bold text-gray-500 uppercase mb-6 tracking-[0.18em]" data-i18n="chart.title">
                      Regional allocation
                    </h3>

                    <div class="relative w-full max-w-[320px] mx-auto aspect-square">
                      <canvas id="geoChart"></canvas>
                      <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                        <div class="relative text-center">
                          <div class="text-lg font-bold text-[#0f172a] leading-none">
                            100%
                          </div>
                          <div class="absolute left-1/2 -translate-x-1/2 -top-4 text-[10px] text-gray-400 font-bold uppercase tracking-[0.18em]">
                            TOTAL
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="bg-[#e6f0fa] p-4 rounded-2xl border border-blue-100 mt-6">
                      <div class="text-[10px] font-bold text-[#0066cc] mb-1 uppercase flex items-center gap-1">
                        <i class="fa-solid fa-robot"></i>
                        <span data-i18n="chart.insight">AI insight</span>
                      </div>
                      <p class="text-xs text-gray-700 leading-relaxed" data-i18n="chart.desc">
                        Taiwan assets make up 40% of your net worth. Consider
                        hedging TWD FX risk.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </section>

      <!-- Pricing section -->
      <section id="section-pricing" class="hidden bg-[#eef2ff] border-t border-gray-200">
        <div class="max-w-[1100px] mx-auto px-6 pt-14 pb-20">
          <div class="text-center">
            <div class="flex items-center justify-center gap-3 mb-3">
              <svg class="logo-clock-hero" viewBox="0 0 100 100">
                <defs>
                  <linearGradient id="clockGradient" x1="0" y1="0" x2="1" y2="1">
                    <stop offset="0%" stop-color="#bfdbfe" />
                    <stop offset="100%" stop-color="#60a5fa" />
                  </linearGradient>
                </defs>
                <circle cx="50" cy="50" r="46" class="clock-outer" />
                <circle cx="50" cy="50" r="38" class="clock-inner" />
                <circle cx="50" cy="50" r="30" class="clock-core" />
                <line x1="50" y1="12" x2="50" y2="18" class="clock-tick-line" />
                <line x1="88" y1="50" x2="82" y2="50" class="clock-tick-line" />
                <line x1="50" y1="82" x2="50" y2="88" class="clock-tick-line" />
                <line x1="18" y1="50" x2="12" y2="50" class="clock-tick-line" />
                <line x1="50" y1="50" x2="50" y2="30" class="hand hand-hour" />
                <line x1="50" y1="50" x2="66" y2="34" class="hand hand-minute" />
                <circle cx="50" cy="50" r="3.2" class="center-dot" />
              </svg>

              <h1 class="text-[34px] md:text-[40px] font-extrabold tracking-tight text-[#0f172a]">
                Start <span class="text-[#0066cc]">Taimic</span> for free.
              </h1>
            </div>

            <p class="text-sm md:text-base text-gray-600 max-w-2xl mx-auto">
              Whether youâ€™re just mapping your global balance sheet or preparing
              for FATCA / CRS, pick a plan that grows with your cross-border
              life.
            </p>

            <div class="flex items-center justify-center gap-4 mt-7">
              <span id="billing-label-monthly" class="text-sm font-medium text-gray-900">Monthly</span>
              <button
                type="button"
                onclick="toggleBilling()"
                class="relative w-11 h-6 rounded-full bg-gray-300 flex items-center px-1 transition-colors"
              >
                <div
                  id="billing-toggle-knob"
                  class="w-4 h-4 bg-white rounded-full shadow transform transition-transform translate-x-0"
                ></div>
              </button>
              <span id="billing-label-yearly" class="text-sm font-medium text-gray-500">Annually</span>
              <span class="text-[11px] text-[#2563eb] font-semibold bg-blue-50 border border-blue-100 rounded-full px-2 py-0.5">
                2 months free
              </span>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-12">
            <div class="bg-white rounded-3xl border border-gray-200 shadow-sm p-8 flex flex-col relative overflow-hidden group pricing-card">
              <div class="absolute inset-0 pointer-events-none bg-gradient-to-b from-blue-50/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
              <div class="relative z-10">
                <h3 class="text-sm font-semibold text-gray-700 mb-1">
                  Starter
                </h3>
                <p class="text-xs text-gray-500 mb-4">
                  For trying Taimic with a small cross-border portfolio.
                </p>
                <div class="flex items-baseline gap-1 mb-1">
                  <div
                    class="text-3xl font-bold text-gray-900"
                    data-plan-price
                    data-monthly="$0"
                    data-yearly="$0"
                  >
                    $0
                  </div>
                  <span class="text-sm text-gray-500">/ month</span>
                </div>
                <button class="mt-4 w-full py-2.5 rounded-xl bg-gray-900 text-white text-sm font-semibold hover:bg-black transition">
                  Get started
                </button>
                <ul class="mt-6 space-y-2 text-sm text-gray-600">
                  <li class="flex gap-2">
                    <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                    <span>Up to 3 brokerage / bank accounts</span>
                  </li>
                  <li class="flex gap-2">
                    <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                    <span>Basic global net-worth dashboard</span>
                  </li>
                  <li class="flex gap-2">
                    <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                    <span>Single-currency view (USD or TWD)</span>
                  </li>
                </ul>
              </div>
            </div>

            <div class="bg-white rounded-3xl border border-gray-200 shadow-sm p-8 flex flex-col relative overflow-hidden group pricing-card">
              <div class="absolute inset-0 pointer-events-none bg-gradient-to-b from-blue-50/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
              <div class="relative z-10">
                <div class="flex items-center justify-between mb-1">
                  <h3 class="text-sm font-semibold text-gray-800">Pro</h3>
                  <span class="text-[11px] font-semibold text-[#2563eb] bg-blue-50 px-2 py-0.5 rounded-full border border-blue-100">
                    Most popular
                  </span>
                </div>
                <p class="text-xs text-gray-500 mb-4">
                  For globally mobile families who want full visibility across
                  countries and currencies.
                </p>
                <div class="flex items-baseline gap-1 mb-1">
                  <div
                    class="text-3xl font-bold text-gray-900"
                    data-plan-price
                    data-monthly="$29"
                    data-yearly="$290"
                  >
                    $29
                  </div>
                  <span class="text-sm text-gray-500">/ month</span>
                </div>
                <p class="text-[11px] text-gray-500 mb-4">
                  Billed annually as $290 when yearly is selected.
                </p>
                <button class="mt-1 w-full py-2.5 rounded-xl bg-[#2563eb] text-white text-sm font-semibold hover:bg-[#1d4ed8] transition">
                  Subscribe
                </button>
                <ul class="mt-6 space-y-2 text-sm text-gray-700">
                  <li class="flex gap-2">
                    <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                    <span>Unlimited accounts across multiple countries</span>
                  </li>
                  <li class="flex gap-2">
                    <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                    <span>Multi-currency consolidated net-worth &amp; performance</span>
                  </li>
                  <li class="flex gap-2">
                    <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                    <span>FATCA / FBAR / CRS threshold monitoring</span>
                  </li>
                  <li class="flex gap-2">
                    <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                    <span>Basic inheritance &amp; â€œwhat-ifâ€ simulations</span>
                  </li>
                  <li class="flex gap-2">
                    <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                    <span>Email support with cross-border specialists</span>
                  </li>
                </ul>
              </div>
            </div>

            <div class="bg-white rounded-3xl border border-gray-200 shadow-sm p-8 flex flex-col relative overflow-hidden group pricing-card">
              <div class="absolute inset-0 pointer-events-none bg-gradient-to-b from-blue-50/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
              <div class="relative z-10">
                <h3 class="text-sm font-semibold text-gray-700 mb-1">
                  Family Office
                </h3>
                <p class="text-xs text-gray-500 mb-4">
                  For families working with tax / legal advisors who need deeper
                  structure &amp; export.
                </p>
                <div class="flex items-baseline gap-1 mb-1">
                  <div
                    class="text-3xl font-bold text-gray-900"
                    data-plan-price
                    data-monthly="$79"
                    data-yearly="$790"
                  >
                    $79
                  </div>
                  <span class="text-sm text-gray-500">/ month</span>
                </div>
                <p class="text-[11px] text-gray-500 mb-4">
                  Billed annually as $790 when yearly is selected.
                </p>
                <button class="mt-1 w-full py-2.5 rounded-xl bg-gray-900 text-white text-sm font-semibold hover:bg-black transition">
                  Talk to us
                </button>
                <ul class="mt-6 space-y-2 text-sm text-gray-600">
                  <li class="flex gap-2">
                    <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                    <span>Everything in Pro</span>
                  </li>
                  <li class="flex gap-2">
                    <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                    <span>Advanced entity / trust / beneficiary mapping</span>
                  </li>
                  <li class="flex gap-2">
                    <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                    <span>Downloadable reports for accountants &amp; lawyers</span>
                  </li>
                  <li class="flex gap-2">
                    <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                    <span>Dedicated onboarding &amp; priority support</span>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- About section -->
      <section id="section-about" class="bg-[#dbeafe] border-t border-gray-200">
        <div class="max-w-[1100px] mx-auto px-6 pt-16 pb-20">
          <header class="mb-10">
            <div class="text-xs md:text-sm font-bold tracking-[0.28em] text-gray-400 uppercase mb-1">
              HOME
            </div>

            <div class="flex items-center gap-3">
              <h1 class="text-[34px] md:text-[42px] font-extrabold tracking-tight text-[#0f172a]">
                About <span class="text-[#0066cc]">Taimic</span>
              </h1>

              <svg class="logo-clock-hero logo-clock-about" viewBox="0 0 100 100">
                <defs>
                  <linearGradient id="clockGradient" x1="0" y1="0" x2="1" y2="1">
                    <stop offset="0%" stop-color="#bfdbfe" />
                    <stop offset="100%" stop-color="#60a5fa" />
                  </linearGradient>
                </defs>
                <circle cx="50" cy="50" r="46" class="clock-outer" />
                <circle cx="50" cy="50" r="38" class="clock-inner" />
                <circle cx="50" cy="50" r="30" class="clock-core" />
                <line x1="50" y1="12" x2="50" y2="18" class="clock-tick-line" />
                <line x1="88" y1="50" x2="82" y2="50" class="clock-tick-line" />
                <line x1="50" y1="82" x2="50" y2="88" class="clock-tick-line" />
                <line x1="18" y1="50" x2="12" y2="50" class="clock-tick-line" />
                <line x1="50" y1="50" x2="50" y2="30" class="hand hand-hour" />
                <line x1="50" y1="50" x2="66" y2="34" class="hand hand-minute" />
                <circle cx="50" cy="50" r="3.2" class="center-dot" />
              </svg>
            </div>

            <p class="mt-4 text-sm md:text-base text-gray-700 max-w-2xl leading-relaxed">
              Taimic is an AI-enabled cross-border wealth and legacy management
              platform built for globally mobile families. We help you bring assets
              held in multiple countries back into a single view, reduce compliance
              risk under complex tax regimes, and think ahead about how your wealth
              will be structured and shared.
            </p>
          </header>

          <div class="bg-white/95 rounded-3xl shadow-sm border border-gray-200 p-6 md:p-8 leading-relaxed text-sm md:text-[15px] text-gray-800 space-y-6">
            <!-- About content zh / en (unchanged, omitted for brevity in comments, but structurally kept) -->
            <!-- ... ABOUT-ZH ... -->
            <div id="about-zh" class="space-y-6">
              <!-- (Content same as original) -->
              <!-- ... -->
              <p>
                å¦‚æœæ‚¨ä¹Ÿç›¸ä¿¡ï¼Œçœ‹æ‡‚è‡ªå·±çš„å…¨çƒè³‡ç”¢ï¼Œæ˜¯é‚å‘è²¡å‹™å®‰å…¨èˆ‡é•·æœŸè³‡ç”¢è¦åŠƒçš„ç¬¬ä¸€æ­¥ï¼Œ
                æ­¡è¿åŠ å…¥ Taimicï¼Œæ‹¿å›æ‚¨å°å…¨çƒè²¡å¯Œçš„æŒæ§æ¬Šã€‚
              </p>
            </div>

            <!-- ... ABOUT-EN ... -->
            <div id="about-en" class="hidden space-y-6">
              <!-- (Content same as original) -->
              <!-- ... -->
              <p>
                If you also believe that understanding your global assets is the
                first step toward financial security and long-term planning, weâ€™d
                love for you to join Taimic and take back control of your global
                wealth.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- Reports gate (pre-login) -->
      <section id="section-reports" class="hidden reports-section">
        <div class="reports-shell w-full">
          <div class="max-w-[1100px] mx-auto px-6 py-16 flex items-center justify-center">
            <div class="w-full max-w-md bg-white rounded-3xl border border-blue-100 shadow-xl md:shadow-2xl p-8 md:p-9 animate-fade-in">
              <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-blue-50 border border-blue-100 mb-5">
                <div class="w-6 h-6 rounded-full bg-[#e0edff] flex items-center justify-center text-[#1d4ed8]">
                  <i class="fa-solid fa-lock text-xs"></i>
                </div>
                <span class="text-[11px] font-semibold tracking-[0.16em] text-slate-600 uppercase">
                  Reports â€¢ Private area
                </span>
              </div>

              <div
                id="reports-gate-en"
                class="space-y-4 text-slate-900 text-sm md:text-[15px] leading-relaxed"
              >
                <h1 class="text-[22px] md:text-[24px] font-bold tracking-tight text-slate-900">
                  Unlock your asset insights.
                </h1>
                <p>
                  Sign in to see your full cross-border reports, tax thresholds and
                  AI insights â€” all based on your real holdings, not just demo
                  data.
                </p>

                <ul class="list-disc pl-5 space-y-1.5 text-slate-700">
                  <li>Consolidated Taiwan + global positions in one private report room.</li>
                  <li>FATCA / FBAR / CRS threshold tracking and risk flags.</li>
                  <li>Scenario views for your family, legacy and cross-border structure.</li>
                </ul>

                <div class="pt-1">
                  <p class="text-xs text-slate-500">
                    Reports are only available to logged-in Taimic users to protect
                    your privacy.
                  </p>
                </div>

                <div id="reports-loggedin-note-en" class="hidden pt-2 text-xs text-emerald-700">
                  You are signed in as
                  <span id="reports-email-en" class="font-semibold"></span>.
                  This is a demo front-end â€“ your real reports will appear here after we connect live data.
                </div>

                <div id="reports-auth-actions-en" class="pt-4 flex flex-col sm:flex-row gap-3">
                  <button
                    type="button"
                    onclick="openAuthModal('login')"
                    class="flex-1 inline-flex items-center justify-center gap-2 rounded-full bg-[#2563eb] hover:bg-[#1d4ed8] text-white text-sm font-semibold py-2.5 shadow-sm transition"
                  >
                    <i class="fa-solid fa-right-to-bracket text-xs"></i>
                    <span>Log in to Taimic</span>
                  </button>

                  <button
                    type="button"
                    onclick="openAuthModal('register')"
                    class="flex-1 inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 bg-white hover:bg-slate-50 text-sm font-semibold text-slate-800 py-2.5 transition"
                  >
                    <i class="fa-solid fa-user-plus text-xs"></i>
                    <span>Create an account</span>
                  </button>
                </div>
              </div>

              <div
                id="reports-gate-zh"
                class="hidden space-y-4 text-slate-900 text-sm md:text-[15px] leading-relaxed"
              >
                <h1 class="text-[22px] md:text-[24px] font-bold tracking-tight text-slate-900">
                  è§£é–ä½ çš„è·¨å¢ƒè³‡ç”¢è¦–è§’ã€‚
                </h1>
                <p>
                  ç™»å…¥å¾Œå³å¯æŸ¥çœ‹ä½ çš„å®Œæ•´å ±è¡¨ã€è·¨åœ‹é–€æª»è¿½è¹¤èˆ‡ AI æ´å¯Ÿ â€”â€” æ‰€æœ‰å…§å®¹éƒ½å»ºç«‹åœ¨ä½ çœŸå¯¦æŒæœ‰çš„è³‡ç”¢çµæ§‹ä¸Šï¼Œè€Œä¸æ˜¯ç¤ºæ„æ•¸å­—ã€‚
                </p>

                <ul class="list-disc pl-5 space-y-1.5 text-slate-700">
                  <li>æŠŠå°ç£ï¼‹æµ·å¤–è³‡ç”¢æ‹‰å›åŒä¸€å€‹ã€Œç§äººå ±è¡¨å®¤ã€ã€‚</li>
                  <li>è¿½è¹¤ FATCAï¼FBARï¼CRS ç­‰é—œéµé–€æª»èˆ‡é¢¨éšªæ¨™è¨˜ã€‚</li>
                  <li>é‡å°å®¶äººèˆ‡è³‡ç”¢å‚³æ‰¿åšæƒ…å¢ƒè©¦ç®—èˆ‡çµæ§‹æª¢è¦–ã€‚</li>
                </ul>

                <div class="pt-1">
                  <p class="text-xs text-slate-500">
                    ç‚ºä¿éšœä½ çš„éš±ç§ï¼Œå ±è¡¨åƒ…æä¾›ç™»å…¥ç”¨æˆ¶æŸ¥çœ‹ï¼Œä¸æœƒå°å¤–å…¬é–‹ã€‚
                  </p>
                </div>

                <div id="reports-loggedin-note-zh" class="hidden pt-2 text-xs text-emerald-700">
                  ç›®å‰ä»¥
                  <span id="reports-email-zh" class="font-semibold"></span>
                  èº«åˆ†ç™»å…¥ã€‚æ­¤é ç‚ºç¤ºç¯„ä»‹é¢ï¼Œæœªä¾†é€£ä¸ŠçœŸå¯¦è³‡æ–™å¾Œï¼Œä½ çš„å°ˆå±¬å ±è¡¨æœƒé¡¯ç¤ºåœ¨é€™è£¡ã€‚
                </div>

                <div id="reports-auth-actions-zh" class="pt-4 flex flex-col sm:flex-row gap-3">
                  <button
                    type="button"
                    onclick="openAuthModal('login')"
                    class="flex-1 inline-flex items-center justify-center gap-2 rounded-full bg-[#2563eb] hover:bg-[#1d4ed8] text-white text-sm font-semibold py-2.5 shadow-sm transition"
                  >
                    <i class="fa-solid fa-right-to-bracket text-xs"></i>
                    <span>ç™»å…¥ Taimic</span>
                  </button>

                  <button
                    type="button"
                    onclick="openAuthModal('register')"
                    class="flex-1 inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 bg-white hover:bg-slate-50 text-sm font-semibold text-slate-800 py-2.5 transition"
                  >
                    <i class="fa-solid fa-user-plus text-xs"></i>
                    <span>å»ºç«‹å¸³è™Ÿ</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="bg-[#f4f6fb] border-t border-gray-200">
      <div class="max-w-[1440px] mx-auto px-6 pt-10 pb-4">
        <div class="flex flex-col lg:flex-row gap-10 lg:gap-20 pb-8 border-b border-gray-200">
          <div class="flex-1">
            <div class="flex items-center gap-2 mb-4">
              <svg class="logo-clock" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="46" class="clock-outer" />
                <circle cx="50" cy="50" r="38" class="clock-inner" />
                <circle cx="50" cy="50" r="30" class="clock-core" />
              </svg>
              <div>
                <div class="text-[20px] font-bold text-[#0066cc] leading-none">
                  TAIMIC
                </div>
                <div class="text-[10px] tracking-[0.18em] text-gray-500 uppercase mt-1">
                  Global Wealth
                </div>
              </div>
            </div>
            <p class="text-sm text-gray-600 mb-4">
              Cross-border wealth OS for globally mobile families.
            </p>
          </div>

          <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-sm">
            <div>
              <div class="footer-col-title">SOLUTIONS</div>
              <div class="footer-link">Cross-border families</div>
              <div class="footer-link">Immigrants &amp; expats</div>
              <div class="footer-link">Family offices</div>
              <div class="footer-link">Advisors</div>
            </div>
            <div>
              <div class="footer-col-title">PLATFORM</div>
              <div class="footer-link">Global dashboard</div>
              <div class="footer-link">Compliance checks</div>
              <div class="footer-link">Scenario planning</div>
              <div class="footer-link">AI insights</div>
            </div>
            <div>
              <div class="footer-col-title">RESOURCES</div>
              <div class="footer-link">Insights</div>
              <div class="footer-link">Product updates</div>
              <div class="footer-link">Partner program</div>
              <div class="footer-link">Status</div>
            </div>
            <div>
              <div class="footer-col-title">LEGAL</div>
              <div class="footer-link">Privacy Policy</div>
              <div class="footer-link">Terms of Service</div>
              <div class="footer-link">Data Processing</div>
              <div class="footer-link">Subprocessors</div>
            </div>
          </div>
        </div>

        <div class="flex flex-col md:flex-row items-center justify-between gap-4 pt-4 pb-2 text-xs text-gray-500">
          <div>Â© 2025 Taimic Inc. All Rights Reserved.</div>
          <div class="flex items-center gap-4 text-gray-400">
            <i class="fa-brands fa-x-twitter"></i>
            <i class="fa-brands fa-discord"></i>
            <i class="fa-brands fa-instagram"></i>
            <i class="fa-brands fa-github"></i>
          </div>
        </div>
      </div>
    </footer>
  </div> <!-- /marketing-shell -->

  <!-- ====================== -->
  <!-- Logged-in Dashboard UI -->
  <!-- ====================== -->
  <div id="dashboard-shell" class="hidden min-h-screen">
    <div class="dashboard-layout">
      <!-- Sidebar -->
      <aside class="dashboard-sidebar">
        <div class="dashboard-sidebar-header">
          <svg class="logo-clock" viewBox="0 0 100 100">
            <defs>
              <linearGradient id="clockGradient-dash" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#bfdbfe" />
                <stop offset="100%" stop-color="#60a5fa" />
              </linearGradient>
            </defs>
            <circle cx="50" cy="50" r="46" class="clock-outer" />
            <circle cx="50" cy="50" r="38" class="clock-inner" />
            <circle cx="50" cy="50" r="30" class="clock-core" />
            <line x1="50" y1="12" x2="50" y2="18" class="clock-tick-line" />
            <line x1="88" y1="50" x2="82" y2="50" class="clock-tick-line" />
            <line x1="50" y1="82" x2="50" y2="88" class="clock-tick-line" />
            <line x1="18" y1="50" x2="12" y2="50" class="clock-tick-line" />
            <line x1="50" y1="50" x2="50" y2="30" class="hand hand-hour" />
            <line x1="50" y1="50" x2="66" y2="34" class="hand hand-minute" />
            <circle cx="50" cy="50" r="3.2" class="center-dot" />
          </svg>
          <div>
            <div class="dashboard-sidebar-title">TAIMIC</div>
            <div class="dashboard-sidebar-subtitle">Global Wealth OS</div>
          </div>
        </div>

        <nav class="dashboard-nav">
          <button class="dash-nav-item dash-nav-item-active" data-dash-view="overview">
            <div class="dash-nav-item-main">
              <span class="dash-nav-item-icon">
                <i class="fa-solid fa-gauge-high"></i>
              </span>
              <span>Dashboard</span>
            </div>
            <span class="text-[10px] text-slate-400 uppercase tracking-[0.14em]">Today</span>
          </button>

          <button class="dash-nav-item" data-dash-view="assets">
            <div class="dash-nav-item-main">
              <span class="dash-nav-item-icon">
                <i class="fa-solid fa-layer-group"></i>
              </span>
              <span>Holdings</span>
            </div>
          </button>

          <button class="dash-nav-item" data-dash-view="compliance">
            <div class="dash-nav-item-main">
              <span class="dash-nav-item-icon">
                <i class="fa-solid fa-scale-balanced"></i>
              </span>
              <span>Compliance</span>
            </div>
          </button>

          <button class="dash-nav-item" data-dash-view="settings">
            <div class="dash-nav-item-main">
              <span class="dash-nav-item-icon">
                <i class="fa-solid fa-gear"></i>
              </span>
              <span>Settings</span>
            </div>
          </button>
        </nav>

        <div class="dashboard-sidebar-footer">
          <div>Last sync: <span class="font-semibold">2 min ago</span></div>
          <div class="mt-1">All data encrypted at rest.</div>
        </div>
      </aside>

      <!-- Main -->
      <div class="dashboard-main-shell">
        <!-- Top header -->
        <header class="dashboard-header">
          <div>
            <div class="dashboard-breadcrumb">Home &gt; Dashboard</div>
            <div class="dashboard-header-title">
              <h1>Wealth Overview</h1>
              <span class="dashboard-header-tag">Signed in</span>
            </div>
          </div>
          <div class="dashboard-header-actions">
            <button class="btn-text-advisor" type="button">
              <i class="fa-regular fa-message"></i>
              <span>Contact advisor</span>
            </button>

            <button class="dashboard-icon-button" type="button" aria-label="Notifications">
              <i class="fa-regular fa-bell text-sm"></i>
              <span class="absolute -top-0.5 -right-0.5 w-2 h-2 rounded-full bg-rose-500 ring-2 ring-white"></span>
            </button>

            <div class="relative">
              <button id="dash-user-toggle" type="button" class="dashboard-user-avatar">
                <span id="dash-user-initial">T</span>
              </button>
              <div id="dash-user-menu" class="dash-user-menu hidden">
                <div class="dash-user-menu-header">
                  <div class="dash-user-menu-header-title">Signed in as</div>
                  <div id="dash-user-email" class="dash-user-menu-header-email">you@example.com</div>
                </div>
                <button class="dash-user-menu-item" type="button">
                  <i class="fa-solid fa-chart-line text-xs"></i>
                  <span>Open full reports</span>
                </button>
                <button class="dash-user-menu-item" type="button" onclick="handleLogout()">
                  <i class="fa-solid fa-arrow-right-from-bracket text-xs"></i>
                  <span>Logout</span>
                </button>
              </div>
            </div>
          </div>
        </header>

        <!-- Dashboard content -->
        <main class="dashboard-main">
          <!-- View: main overview (only one real view, others placeholders could be added later) -->
          <section id="dash-view-overview" class="space-y-6">
            <!-- Block A: Hero / Total Net Worth -->
            <section class="dashboard-card dashboard-hero-card p-6 md:p-7 lg:p-8">
              <div class="dashboard-hero-orb"></div>
              <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 relative z-10">
                <div class="space-y-4">
                  <div>
                    <p class="text-[11px] font-semibold tracking-[0.18em] uppercase text-[var(--text-muted)]">
                      Total Net Worth
                    </p>
                    <div class="mt-2 flex items-baseline gap-3 flex-wrap">
                      <span id="dash-networth-value" class="text-3xl md:text-4xl lg:text-5xl font-bold tracking-tight font-mono text-[var(--brand-blue)]">
                        $0
                      </span>
                      <span
                        id="dash-networth-currency-label"
                        class="text-[10px] font-semibold tracking-[0.16em] uppercase rounded-full border border-slate-200 px-2 py-0.5 text-[var(--text-muted)] bg-white/80"
                      >
                        Base: USD
                      </span>
                    </div>
                  </div>

                  <div class="flex flex-wrap items-center gap-3">
                    <div
                      id="dash-networth-change-pill"
                      class="inline-flex items-center px-2.5 py-1 rounded-full bg-emerald-50 text-emerald-700 text-[11px] font-medium"
                    >
                      <i id="dash-networth-change-icon" class="fa-solid fa-arrow-trend-up mr-1 text-[10px]"></i>
                      <span id="dash-networth-change-value">+$0 (Today)</span>
                    </div>
                    <p class="text-[11px] text-[var(--text-muted)]">
                      Based on all connected Taiwan &amp; global positions.
                    </p>
                  </div>
                </div>

                <div class="grid grid-cols-2 gap-4 w-full max-w-md">
                  <div class="rounded-2xl border border-slate-100 bg-white/80 px-4 py-3">
                    <p class="text-[11px] font-semibold tracking-[0.16em] uppercase text-[var(--text-muted)]">
                      Taiwan
                    </p>
                    <p id="dash-region-tw-value" class="mt-1 text-sm font-mono font-semibold text-slate-900">
                      $0
                    </p>
                    <p id="dash-region-tw-percent" class="text-[11px] text-[var(--text-muted)] mt-1">
                      0% of total
                    </p>
                  </div>
                  <div class="rounded-2xl border border-slate-100 bg-white/80 px-4 py-3">
                    <p class="text-[11px] font-semibold tracking-[0.16em] uppercase text-[var(--text-muted)]">
                      US &amp; Offshore
                    </p>
                    <p id="dash-region-us-value" class="mt-1 text-sm font-mono font-semibold text-slate-900">
                      $0
                    </p>
                    <p id="dash-region-us-percent" class="text-[11px] text-[var(--text-muted)] mt-1">
                      0% of total
                    </p>
                  </div>
                </div>
              </div>
            </section>

            <!-- Block B + C row -->
            <section class="grid lg:grid-cols-[1.6fr,1fr] gap-6">
              <!-- Block B: Global Asset Map -->
              <section class="dashboard-card p-6 md:p-7 flex flex-col gap-4">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-[11px] font-semibold tracking-[0.18em] uppercase text-[var(--text-muted)]">
                      Global View
                    </p>
                    <h2 class="text-sm md:text-base font-semibold text-[var(--text-main)] mt-1">
                      Geo-Asset Map
                    </h2>
                  </div>
                  <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-[#EFF6FF] text-[11px] text-[#1D4ED8] font-medium">
                    <i class="fa-solid fa-globe text-xs"></i>
                    <span>Live positions</span>
                  </div>
                </div>

                <div class="dashboard-map-wrapper h-72 md:h-80 mt-2">
                  <!-- Super minimal world map silhouette -->
                  <svg viewBox="0 0 800 400" class="w-full h-full opacity-70">
                    <rect x="0" y="0" width="800" height="400" fill="#E2E8F0"></rect>
                    <path
                      d="M75 120h210l80-25 90 20 70-10 50 10 80-15 60 35-30 70-70 35-90-15-90 25-120-10-110-35-80-60z"
                      fill="#CBD5E1"
                    ></path>
                    <path
                      d="M470 220l70 10 40 40-20 60-80 10-40-40z"
                      fill="#CBD5E1"
                    ></path>
                    <path
                      d="M180 250l60 10 20 40-40 50-70-10-20-50z"
                      fill="#CBD5E1"
                    ></path>
                  </svg>

                  <!-- Rippling asset dots -->
                  <!-- USA -->
                  <div class="asset-dot" style="top: 42%; left: 24%;">
                    <div class="asset-tooltip">
                      US: <span id="dash-tooltip-us">$0</span> (Brokerage &amp; Retirement)
                    </div>
                  </div>
                  <!-- Taiwan -->
                  <div class="asset-dot" style="top: 50%; left: 63%;">
                    <div class="asset-tooltip">
                      Taiwan: <span id="dash-tooltip-tw">$0</span> (Cash + Real Estate)
                    </div>
                  </div>
                  <!-- Singapore (sample) -->
                  <div class="asset-dot" style="top: 60%; left: 69%;">
                    <div class="asset-tooltip">
                      Singapore: $85,000 (ETF &amp; Cash)
                    </div>
                  </div>
                </div>

                <div class="flex flex-wrap items-center justify-between gap-3 mt-3">
                  <div class="flex flex-wrap gap-3 text-[11px] text-[var(--text-muted)]">
                    <span class="inline-flex items-center gap-1">
                      <span class="w-2 h-2 rounded-full bg-[var(--brand-blue)]"></span>
                      <span>Active country with positions</span>
                    </span>
                    <span>Hover a dot to see country breakdown.</span>
                  </div>
                  <button
                    type="button"
                    class="text-[11px] font-semibold text-[var(--brand-blue)] inline-flex items-center gap-1"
                  >
                    <i class="fa-solid fa-up-right-from-square text-[10px]"></i>
                    <span>Open full geo view</span>
                  </button>
                </div>
              </section>

              <!-- Block C: Risk & Allocation (two subcards) -->
              <section class="flex flex-col gap-6">
                <!-- FX Exposure -->
                <section class="dashboard-subcard p-5 md:p-6">
                  <div class="flex items-center justify-between mb-3">
                    <div>
                      <p class="text-[11px] font-semibold tracking-[0.18em] uppercase text-[var(--text-muted)]">
                        FX Exposure
                      </p>
                      <h2 class="mt-1 text-sm font-semibold text-[var(--text-main)]">
                        Currency Impact
                      </h2>
                    </div>
                    <span class="text-[11px] text-[var(--text-muted)]">
                      vs base currency: <span class="font-semibold">USD</span>
                    </span>
                  </div>

                  <div class="space-y-3">
                    <div class="flex items-center justify-between text-[10px] text-[var(--text-muted)]">
                      <span>-5%</span>
                      <span>0</span>
                      <span>+5%</span>
                    </div>
                    <div class="fx-bar mt-1">
                      <div class="fx-bar-zero-line"></div>
                      <!-- indicator: default to right side (positive) -->
                      <div id="fx-impact-indicator" class="fx-bar-indicator" style="left: 66%;"></div>
                    </div>
                    <p class="text-[11px] text-[var(--text-muted)]">
                      A <span class="font-semibold">+2.3%</span> move in TWD vs USD would change your net worth by
                      <span id="fx-impact-value" class="font-semibold text-emerald-600">+$0</span>.
                    </p>
                  </div>
                </section>

                <!-- Asset Allocation donut -->
                <section class="dashboard-subcard p-5 md:p-6 flex flex-col gap-4">
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="text-[11px] font-semibold tracking-[0.18em] uppercase text-[var(--text-muted)]">
                        Allocation
                      </p>
                      <h2 class="mt-1 text-sm font-semibold text-[var(--text-main)]">
                        Asset Allocation
                      </h2>
                    </div>
                    <span class="text-[11px] text-[var(--text-muted)]">
                      By asset class
                    </span>
                  </div>

                  <div class="flex items-center gap-4">
                    <div class="w-32 h-32 md:w-36 md:h-36 relative">
                      <canvas id="allocationChart"></canvas>
                    </div>
                    <div class="flex-1 space-y-2 text-[11px] text-[var(--text-muted)]">
                      <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2">
                          <span class="w-2 h-2 rounded-full" style="background:#0f5ad8;"></span>
                          <span>Market (Equities / Funds)</span>
                        </div>
                        <span id="alloc-market-percent">--%</span>
                      </div>
                      <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2">
                          <span class="w-2 h-2 rounded-full" style="background:rgba(15,90,216,0.6);"></span>
                          <span>Real Estate</span>
                        </div>
                        <span id="alloc-realestate-percent">--%</span>
                      </div>
                      <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2">
                          <span class="w-2 h-2 rounded-full" style="background:#60a5fa;"></span>
                          <span>Defensive (Cash / Insurance)</span>
                        </div>
                        <span id="alloc-defensive-percent">--%</span>
                      </div>
                    </div>
                  </div>

                  <p id="alloc-summary-text" class="text-[11px] text-[var(--text-muted)] mt-1">
                    Your largest sleeve is <span class="font-semibold">Market</span>. Consider whether this mix matches your risk tolerance and time horizon.
                  </p>
                </section>
              </section>
            </section>

            <!-- Block D: Compliance Timeline -->
            <section class="dashboard-card p-6 md:p-7 lg:p-8">
              <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4">
                <div>
                  <p class="text-[11px] font-semibold tracking-[0.18em] uppercase text-[var(--text-muted)]">
                    Compliance Center
                  </p>
                  <h2 class="mt-1 text-sm md:text-base font-semibold text-[var(--text-main)]">
                    Upcoming Compliance Deadlines
                  </h2>
                </div>
                <button type="button" class="dashboard-upload-btn">
                  <i class="fa-solid fa-cloud-arrow-up text-sm"></i>
                  <span>Upload documents</span>
                </button>
              </div>

              <div class="timeline-wrapper">
                <div class="timeline-line"></div>
                <ol class="timeline-list">
                  <!-- Completed -->
                  <li class="timeline-item">
                    <div class="timeline-node timeline-node-completed">
                      <i class="fa-solid fa-check text-[10px]"></i>
                    </div>
                    <div class="timeline-date">Apr 15</div>
                    <div class="timeline-label">US Tax Return</div>
                    <div class="timeline-meta">Filed â€¢ 2024</div>
                  </li>

                  <!-- Upcoming -->
                  <li class="timeline-item">
                    <div class="timeline-node timeline-node-upcoming">
                      <span class="w-1.5 h-1.5 rounded-full bg-[var(--brand-blue)]"></span>
                    </div>
                    <div class="timeline-date">Jun 30</div>
                    <div class="timeline-label">FBAR Filing</div>
                    <div class="timeline-meta">Foreign accounts &gt; $10k</div>
                  </li>

                  <!-- Urgent -->
                  <li class="timeline-item">
                    <div class="timeline-node timeline-node-urgent">
                      <i class="fa-solid fa-exclamation text-[10px]"></i>
                    </div>
                    <div class="timeline-date">In 5 days</div>
                    <div class="timeline-label">Quarterly Tax</div>
                    <div class="timeline-meta text-amber-600">
                      Estimated payment due
                    </div>
                  </li>

                  <!-- Future -->
                  <li class="timeline-item">
                    <div class="timeline-node timeline-node-upcoming">
                      <span class="w-1.5 h-1.5 rounded-full bg-[var(--brand-blue)]"></span>
                    </div>
                    <div class="timeline-date">Dec 31</div>
                    <div class="timeline-label">TW AMT Review</div>
                    <div class="timeline-meta">Overseas income check</div>
                  </li>
                </ol>
              </div>

              <p class="mt-4 text-[11px] text-[var(--text-muted)]">
                Timeline is based on your current residency and asset footprint. For specific filing requirements, please confirm with your tax advisor.
              </p>
            </section>
          </section>
        </main>
      </div>
    </div>
  </div> <!-- /dashboard-shell -->

  <!-- ===================== -->
  <!-- Modals + Auth (same) -->
  <!-- ===================== -->
  <div
    id="modal-overlay"
    class="hidden fixed inset-0 bg-[#111827]/60 backdrop-blur-sm z-50 flex items-center justify-center p-4"
  >
    <div
      class="bg-white w-full max-w-md shadow-2xl rounded-xl overflow-hidden relative transform transition-all"
    >
      <div class="bg-[#0066cc] p-4 flex justify-between items-center text-white">
        <h3 class="font-bold text-sm tracking-wide" data-i18n="modal.title">
          Add Taiwan asset (AI OCR)
        </h3>
        <i
          class="fa-solid fa-xmark cursor-pointer hover:opacity-80 text-lg"
          onclick="closeUploadModal()"
        ></i>
      </div>

      <div id="modal-step-1" class="p-8 text-center">
        <div class="w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4 text-[#0066cc]">
          <i class="fa-solid fa-cloud-arrow-up text-2xl"></i>
        </div>
        <p class="text-sm text-gray-600 mb-6 leading-relaxed" data-i18n="modal.desc">
          Upload a policy front page or bank statement, Taimic will extract key
          data with AI.
        </p>
        <button
          onclick="startScan()"
          class="w-full border-2 border-dashed border-gray-300 py-4 rounded-xl hover:border-[#0066cc] hover:bg-blue-50 transition-all text-gray-500 hover:text-[#0066cc] font-bold text-sm"
        >
          <span data-i18n="btn.upload">Click to upload file</span>
        </button>
      </div>

      <div id="modal-step-2" class="hidden relative h-64 bg-[#050816]">
        <div class="absolute inset-0 flex flex-col items-center justify-center z-10">
          <p class="text-white font-mono text-sm mb-2" data-i18n="modal.scanning">
            AI processing...
          </p>
          <div class="w-48 h-1 bg-gray-700 rounded overflow-hidden mb-4">
            <div
              id="scan-bar"
              class="h-full bg-[#3b82f6] w-0 transition-all duration-[3000ms] ease-linear"
            ></div>
          </div>
          <div id="scan-log" class="text-[10px] text-green-400 font-mono h-12 flex flex-col items-center gap-1"></div>
        </div>
        <div class="scan-overlay absolute inset-0"></div>
      </div>
    </div>
  </div>

  <div
    id="auth-overlay"
    class="hidden fixed inset-0 bg-[#111827]/60 backdrop-blur-sm z-50 flex items-center justify-center p-4"
  >
    <div class="bg-white w-full max-w-lg rounded-xl shadow-2xl overflow-hidden">
      <div class="bg-[#1d4ed8] px-6 py-4 flex items-center justify-between text-white">
        <h3 id="auth-title" class="font-bold text-base">
          Create a Taimic account
        </h3>
        <button onclick="closeAuthModal()" class="hover:opacity-80">
          <i class="fa-solid fa-xmark text-xl"></i>
        </button>
      </div>
      <div class="px-8 py-8 space-y-6">
        <div class="space-y-2">
          <label class="block text-sm font-medium text-gray-700">Email</label>
          <input
            id="auth-email"
            type="email"
            placeholder="you@gmail.com"
            class="w-full border border-gray-300 rounded-lg px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-[#2563eb] focus:border-[#2563eb] placeholder-gray-400"
          />
        </div>
        <div class="space-y-2">
          <label class="block text-sm font-medium text-gray-700">Password</label>
          <input
            id="auth-password"
            type="password"
            placeholder="At least 6 characters"
            class="w-full border border-gray-300 rounded-lg px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-[#2563eb] focus:border-[#2563eb]"
          />
        </div>
        <p id="auth-message" class="text-sm h-5 text-center"></p>
        <button
          id="auth-submit"
          class="w-full bg-[#2563eb] hover:bg-[#1d4ed8] text-white font-semibold text-sm py-3 rounded-full flex items-center justify-center gap-2 transition"
        >
          <i class="fa-solid fa-arrow-right-to-bracket"></i>
          <span id="auth-submit-text">Sign up</span>
        </button>
      </div>
    </div>
  </div>

  <!-- ================= -->
  <!-- Main JS (updated) -->
  <!-- ================= -->
  <script>
    // åŒ¯ç‡ï¼šå„ªå…ˆ APIï¼Œå‚™æ´å¸¸æ•¸ 31.0ï¼ˆåš´æ ¼èªå®šï¼‰
    const RATE_FALLBACK = 31.0;
    let RATE = RATE_FALLBACK;

    const FX_API = "https://open.er-api.com/v6/latest/USD";

    const RATE_LABEL_TEXT = {
      en: "Rates updated: Just now",
      zh: "åŒ¯ç‡æ›´æ–°æ–¼ï¼šå‰›å‰›",
    };

    const RATE_LABEL_PREFIX = "1 USD â‰ˆ ";

    const I18N = {
      en: {
        "nav.overview": "Overview",
        "nav.pricing": "Pricing",
        "nav.reports": "Reports",
        "nav.about": "About Taimic",
        "page.title": "Cross-border wealth platform",
        "page.desc":
          "Integrated view of Taiwan & US assets with FATCA / CRS compliance checks and AI insights.",
        "btn.add": "Add asset",
        "btn.upload": "Click to upload file",
        "stat.us": "US net worth",
        "stat.tw": "Taiwan net worth",
        "stat.global": "Global net worth",
        "stat.safe": "Estate tax risk: safe",
        "table.title": "Holdings",
        "col.name": "Asset",
        "col.region": "Region",
        "col.type": "Type",
        "col.val": "Value",
        "alert.title": "AI tax alert: potential FATCA risk detected",
        "alert.desc":
          "A new high cash-value policy in Taiwan may exceed the Form 8938 reporting threshold.",
        "chart.title": "Regional allocation",
        "chart.insight": "AI insight",
        "chart.desc":
          "Taiwan assets make up 40% of your net worth. Consider hedging TWD FX risk.",
        "modal.title": "Add Taiwan asset (AI OCR)",
        "modal.desc":
          "Upload a policy front page or bank statement, Taimic will extract key data with AI.",
        "modal.scanning": "AI processing...",
        "user.login": "Login",
        "user.register": "Sign up",
      },
      zh: {
        "nav.overview": "è³‡ç”¢ç¸½è¦½",
        "nav.pricing": "åƒ¹æ ¼",
        "nav.reports": "åˆ†æå ±å‘Š",
        "nav.about": "é—œæ–¼ Taimic",
        "page.title": "è·¨åœ‹è³‡ç”¢æ•´åˆå¹³å°",
        "page.desc":
          "æ•´åˆå°ç£èˆ‡æµ·å¤–è³‡ç”¢ï¼Œæ­é… FATCA / CRS ç¨…å‹™æª¢æ¸¬èˆ‡ AI åˆ†æï¼Œè®“è·¨å¢ƒè²¡å‹™ä¸€çœ¼çœ‹æ‡‚ã€‚",
        "btn.add": "æ–°å¢è³‡ç”¢",
        "btn.upload": "é»æ“Šä¸Šå‚³æª”æ¡ˆ",
        "stat.us": "ç¾åœ‹ç¸½è³‡ç”¢",
        "stat.tw": "å°ç£ç¸½è³‡ç”¢",
        "stat.global": "å…¨çƒç¸½æ·¨å€¼",
        "stat.safe": "éºç”¢ç¨…é¢¨éšªï¼šå®‰å…¨",
        "table.title": "è³‡ç”¢æŒæœ‰æ¸…å–®",
        "col.name": "è³‡ç”¢åç¨±",
        "col.region": "åœ°å€",
        "col.type": "é¡åˆ¥",
        "col.val": "ç¾å€¼",
        "alert.title": "AI ç¨…å‹™è­¦ç¤ºï¼šåµæ¸¬åˆ° FATCA é¢¨éšª",
        "alert.desc":
          "ç³»çµ±æƒæåˆ°ä¸€å¼µæ–°å¢çš„å°ç£é«˜ç¾é‡‘åƒ¹å€¼ä¿å–®ï¼Œå¯èƒ½è¶…é IRS Form 8938 ç”³å ±é–€æª»ã€‚",
        "chart.title": "å€åŸŸè³‡ç”¢é…ç½®",
        "chart.insight": "AI æ™ºèƒ½åˆ†æ",
        "chart.desc": "æ‚¨çš„å°ç£è³‡ç”¢ä½”ç¸½æ·¨å€¼ç´„ 40%ï¼Œå»ºè­°è©•ä¼°å°å¹£åŒ¯ç‡é¢¨éšªã€‚",
        "modal.title": "æ–°å¢å°ç£è³‡ç”¢ (AI OCR)",
        "modal.desc":
          "ä¸Šå‚³ä¿å–®é¦–é æˆ–éŠ€è¡Œå°å¸³å–®ï¼ŒAI å°‡è‡ªå‹•æå–é—œéµæ•¸æ“šã€‚",
        "modal.scanning": "AI åˆ†æä¸­...",
        "user.login": "ç™»å…¥",
        "user.register": "è¨»å†Š",
      },
    };

    const assets = [
      {
        id: 1,
        name: {
          en: "Vanguard Total Stock (VTI)",
          zh: "Vanguard å…¨çƒè‚¡ç¥¨ ETF (VTI)",
        },
        type: { en: "ETF", zh: "æŒ‡æ•¸å‹åŸºé‡‘" },
        region: "US",
        usd: 145200,
      },
      {
        id: 2,
        name: { en: "Taipei Xinyi Condo", zh: "å°åŒ—ä¿¡ç¾©å€å…¬å¯“" },
        type: { en: "Real Estate", zh: "æˆ¿åœ°ç”¢" },
        region: "TW",
        usd: 280000,
      },
      {
        id: 3,
        name: { en: "Fidelity 401(k)", zh: "å¯Œé”é€€ä¼‘é‡‘ 401(k)" },
        type: { en: "Retirement", zh: "é€€ä¼‘é‡‘" },
        region: "US",
        usd: 98500,
      },
    ];

    let curr = "TWD";
    let lang = "en";
    let currentSection = "overview";
    let billing = "monthly";
    const API_BASE = "https://cool-cell-b227.amy20060226.workers.dev";

    // Dashboard state
    let loggedInEmail = null;
    let dashboardInitialized = false;

    // Hero Screener slide-up ç‹€æ…‹
    let heroCardOpen = false;
    let heroCardOuterEl = null;
    let heroOverlayEl = null;

    function fmt(usd) {
      const val = curr === "USD" ? usd : usd * RATE;
      return new Intl.NumberFormat(
        curr === "USD" ? "en-US" : "zh-TW",
        {
          style: "currency",
          currency: curr,
          maximumFractionDigits: 0,
        }
      ).format(val);
    }

    function fmtAbs(usd) {
      const val = curr === "USD" ? usd : usd * RATE;
      return new Intl.NumberFormat(
        curr === "USD" ? "en-US" : "zh-TW",
        {
          style: "currency",
          currency: curr,
          maximumFractionDigits: 0,
        }
      ).format(Math.abs(val));
    }

    function updateRateLabel() {
      const label = document.getElementById("hero-rate-label");
      if (!label) return;
      const prefix = `${RATE_LABEL_PREFIX}${RATE.toFixed(2)} TWD`;
      const suffix = RATE_LABEL_TEXT[lang] || RATE_LABEL_TEXT.en;
      label.textContent = `${prefix} â€¢ ${suffix}`;
    }

    async function fetchFXRate() {
      try {
        const res = await fetch(FX_API);
        if (!res.ok) throw new Error("FX API error");
        const data = await res.json();
        const r = data && data.rates && data.rates.TWD;
        if (typeof r === "number" && r > 0) {
          RATE = r;
        } else {
          RATE = RATE_FALLBACK;
        }
      } catch (e) {
        RATE = RATE_FALLBACK;
      } finally {
        updateRateLabel();
        render();
        calculateHeroTotal();
        if (loggedInEmail) {
          updateDashboardStats();
        }
      }
    }

    function render() {
      const t = I18N[lang];

      document.querySelectorAll("[data-i18n]").forEach((el) => {
        const key = el.dataset.i18n;
        if (t[key]) el.textContent = t[key];
      });

      document.querySelectorAll(".val-display").forEach((el) => {
        el.textContent = fmt(parseFloat(el.dataset.usd));
      });

      const tbody = document.getElementById("asset-list");
      if (tbody) {
        tbody.innerHTML = "";
        assets.forEach((a) => {
          const n = a.name[lang];
          const tp = a.type[lang];
          const flag = a.region === "US" ? "ğŸ‡ºğŸ‡¸" : "ğŸ‡¹ğŸ‡¼";
          const badge =
            a.region === "US"
              ? "bg-blue-50 text-blue-700"
              : "bg-green-50 text-green-700";
          const hl = a.new ? "bg-orange-50 animate-fade-in" : "";
          const riskTag = a.risk
            ? `<span class="ml-2 inline-flex items-center px-2 py-0.5 bg-orange-100 text-orange-700 text-[10px] font-bold rounded-full border border-orange-200">FATCA</span>`
            : "";
          tbody.innerHTML += `
            <tr class="group transition-colors hover:bg-gray-50 border-b border-gray-100 last:border-0 ${hl}">
              <td class="py-4 pl-2">
                <div class="font-semibold text-[#111827] group-hover:text-[#0066cc] transition-colors">${n}</div>
              </td>
              <td class="py-4">
                <span class="px-2 py-1 rounded-full text-xs font-bold ${badge}">${flag} ${a.region}</span>${riskTag}
              </td>
              <td class="py-4 text-sm text-gray-600">${tp}</td>
              <td class="py-4 pr-2 text-right font-mono font-bold text-[#111827] tracking-tight">${fmt(
                a.usd
              )}</td>
            </tr>`;
        });
      }

      const btnUsd = document.getElementById("btn-usd");
      const btnTwd = document.getElementById("btn-twd");
      if (btnUsd && btnTwd) {
        if (curr === "USD") {
          btnUsd.className = "px-4 py-2 bg-white text-[#0066cc] font-semibold";
          btnTwd.className = "px-4 py-2 text-gray-500 hover:bg-gray-100";
        } else {
          btnTwd.className = "px-4 py-2 bg-white text-[#0066cc] font-semibold";
          btnUsd.className = "px-4 py-2 text-gray-500 hover:bg-gray-100";
        }
      }

      const aboutZh = document.getElementById("about-zh");
      const aboutEn = document.getElementById("about-en");
      if (aboutZh && aboutEn) {
        if (lang === "zh") {
          aboutZh.classList.remove("hidden");
          aboutEn.classList.add("hidden");
        } else {
          aboutEn.classList.remove("hidden");
          aboutZh.classList.add("hidden");
        }
      }

      const reportsZh = document.getElementById("reports-gate-zh");
      const reportsEn = document.getElementById("reports-gate-en");
      if (reportsZh && reportsEn) {
        if (lang === "zh") {
          reportsZh.classList.remove("hidden");
          reportsEn.classList.add("hidden");
        } else {
          reportsEn.classList.remove("hidden");
          reportsZh.classList.add("hidden");
        }
      }

      updatePricing();
      updateRateLabel();
    }

    function setCurrency(c) {
      curr = c;
      render();
      calculateHeroTotal();
      if (loggedInEmail) updateDashboardStats();
    }

    function changeLang(l) {
      lang = l;
      render();
      langMenu.classList.add("hidden");
      calculateHeroTotal();
    }

    function switchSection(section) {
      const ids = ["overview", "pricing", "about", "reports"];
      ids.forEach((id) => {
        const el = document.getElementById(`section-${id}`);
        if (el) el.classList.toggle("hidden", id !== section);
      });
      document.querySelectorAll("nav .nav-link").forEach((link) => {
        link.classList.toggle("active", link.dataset.section === section);
      });
      currentSection = section;

      if (section === "reports") {
        try {
          const raw = localStorage.getItem("taimic_demo_data");
          const hasDemo = !!raw;
          const headingEn = document.querySelector("#reports-gate-en h1");
          if (headingEn) {
            headingEn.textContent = hasDemo
              ? "Your Report is Ready! Sign in to view details."
              : "Unlock your asset insights.";
          }
        } catch (e) {
          console.error(e);
        }
      }

      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function updatePricing() {
      document.querySelectorAll("[data-plan-price]").forEach((el) => {
        const m = el.dataset.monthly;
        const y = el.dataset.yearly;
        if (!m || !y) return;
        el.textContent = billing === "monthly" ? m : y;
      });
      const knob = document.getElementById("billing-toggle-knob");
      if (knob) {
        knob.classList.toggle("translate-x-0", billing === "monthly");
        knob.classList.toggle("translate-x-5", billing === "yearly");
      }
      const mLabel = document.getElementById("billing-label-monthly");
      const yLabel = document.getElementById("billing-label-yearly");
      if (mLabel && yLabel) {
        mLabel.classList.toggle("text-gray-900", billing === "monthly");
        mLabel.classList.toggle("text-gray-500", billing !== "monthly");
        yLabel.classList.toggle("text-gray-900", billing === "yearly");
        yLabel.classList.toggle("text-gray-500", billing !== "yearly");
      }
    }

    function toggleBilling() {
      billing = billing === "monthly" ? "yearly" : "monthly";
      updatePricing();
    }

    // Hero é‡‘é¡é¡¯ç¤ºç¸®å¯«
    function formatUSDAbbrev(value) {
      const n = Number(value) || 0;
      const abs = Math.abs(n);
      if (abs >= 1e9) {
        const v = n / 1e9;
        const num = v >= 100 ? v.toFixed(0) : v.toFixed(1);
        return `$${num}B`;
      } else if (abs >= 1e6) {
        const v = n / 1e6;
        const num = v >= 100 ? v.toFixed(0) : v.toFixed(1);
        return `$${num}M`;
      } else if (abs >= 1e3) {
        const v = n / 1e3;
        const num = v >= 100 ? v.toFixed(0) : v.toFixed(1);
        return `$${num}K`;
      }
      return new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
        maximumFractionDigits: 0,
      }).format(n);
    }

    // Hero å¿«ç¯©å¼•æ“ï¼ˆåŸæœ¬ï¼‰
    function calculateHeroTotal() {
      const twdInput = document.getElementById("hero-twd");
      const usdInput = document.getElementById("hero-usd");
      const resultBox = document.getElementById("hero-result");
      const totalEl = document.getElementById("hero-total");

      const identityEl = document.getElementById("hero-identity");
      const residenceEl = document.getElementById("hero-residence");
      const cashChk = document.getElementById("hero-asset-cash");
      const stocksChk = document.getElementById("hero-asset-stocks");
      const fundsChk = document.getElementById("hero-asset-funds");
      const insuranceChk = document.getElementById("hero-asset-insurance");
      const assetsError = document.getElementById("hero-assets-error");

      if (
        !twdInput ||
        !usdInput ||
        !resultBox ||
        !totalEl ||
        !identityEl ||
        !residenceEl ||
        !cashChk ||
        !stocksChk ||
        !fundsChk ||
        !insuranceChk
      ) {
        return;
      }

      const twdRaw = (twdInput.value || "").replace(/,/g, "");
      const usdRaw = (usdInput.value || "").replace(/,/g, "");

      const twd = parseFloat(twdRaw) || 0;
      const usd = parseFloat(usdRaw) || 0;
      const hasAmount = twd > 0 || usd > 0;

      const assetsSelected =
        cashChk.checked ||
        stocksChk.checked ||
        fundsChk.checked ||
        insuranceChk.checked;

      if (!assetsSelected) {
        if (assetsError) assetsError.classList.remove("hidden");
      } else if (assetsError) {
        assetsError.classList.add("hidden");
      }

      const ctaBtn = document.getElementById("hero-cta-btn");
      if (!hasAmount || !assetsSelected) {
        resultBox.classList.add("hidden");
        if (ctaBtn) ctaBtn.classList.add("hidden");
        return;
      }

      const identity = identityEl.value;
      const residence = residenceEl.value;
      const isUSPerson = identity === "us";

      const hasFunds = !!fundsChk.checked;
      const hasInsurance = !!insuranceChk.checked;
      const hasHighRiskPFIC = hasFunds || hasInsurance;

      const globalUsd = twd / RATE + usd;
      const usAssetsUsd = usd;
      const totalTwd = globalUsd * RATE;

      const overseasROIusd = usAssetsUsd * 0.05;
      const overseasROItwd = overseasROIusd * RATE;

      totalEl.textContent = formatUSDAbbrev(globalUsd);
      updateRateLabel();

      // US Compliance
      let usStatus = "safe";
      let hasUsRisk = false;

      let hitFBAR = false;
      let hitFATCA = false;
      let hitPFIC = false;
      let hitEstateNonUS = false;

      if (isUSPerson) {
        hitFBAR = globalUsd > 10000;
        hitFATCA = residence === "tw" && globalUsd > 200000;
        hitPFIC = hasHighRiskPFIC;

        if (hitPFIC || hitFATCA) {
          usStatus = "critical";
          hasUsRisk = true;
        } else if (hitFBAR) {
          usStatus = "warning";
          hasUsRisk = true;
        } else {
          usStatus = "safe";
          hasUsRisk = false;
        }
      } else {
        hitEstateNonUS = usAssetsUsd > 60000;
        if (hitEstateNonUS) {
          usStatus = "critical";
          hasUsRisk = true;
        } else {
          usStatus = "safe";
          hasUsRisk = false;
        }
      }

      // Taiwan ç¨…å‹™æª¢æŸ¥
      const hitAMT = overseasROItwd > 1000000;
      const hitTWEstate = totalTwd > 13330000;
      let twStatus = (hitAMT || hitTWEstate) ? "review" : "optimized";
      let hasTwRisk = hitAMT || hitTWEstate;

      const usCard = document.getElementById("hero-us-status");
      const usTag = document.getElementById("hero-us-tag");
      const usBody = document.getElementById("hero-us-body");
      const twCard = document.getElementById("hero-tw-status");
      const twTag = document.getElementById("hero-tw-tag");
      const twBody = document.getElementById("hero-tw-body");

      resultBox.classList.remove("hidden");

      if (usCard) {
        let cls =
          "rounded-2xl border px-4 py-3 flex flex-col gap-2 ";
        if (usStatus === "critical") {
          cls += "border-red-200 bg-red-50";
        } else if (usStatus === "warning") {
          cls += "border-amber-200 bg-amber-50";
        } else {
          cls += "border-emerald-200 bg-emerald-50";
        }
        usCard.className = cls;
      }
      if (usTag) {
        usTag.className =
          "text-[10px] px-2 py-0.5 rounded-full font-semibold tracking-wide";
        if (usStatus === "critical") {
          usTag.classList.add("bg-red-100", "text-red-700");
          usTag.textContent = "ğŸš¨ Critical";
        } else if (usStatus === "warning") {
          usTag.classList.add("bg-amber-100", "text-amber-700");
          usTag.textContent = "âš ï¸ Warning";
        } else {
          usTag.classList.add("bg-emerald-100", "text-emerald-700");
          usTag.textContent = "âœ… Safe";
        }
      }

      if (usBody) {
        if (isUSPerson) {
          if (usStatus === "safe") {
            usBody.innerHTML = `
              <p class="text-xs font-semibold text-emerald-900">
                âœ… Safe â€¢ Compliant: No US Reporting Required
              </p>
              <p class="text-[11px] text-emerald-800 mt-1">
                åˆè¦ï¼šç›®å‰ç„¡é ˆå‘ç¾åœ‹ç”³å ±ï¼ˆå°šæœªè§¸ç™¼ FBARã€FATCA æˆ– PFIC ç›¸é—œé–€æª»ï¼‰ã€‚
              </p>
              <p class="mt-1 text-[11px] text-emerald-700">
                æœ¬çµæœç‚ºæ™ºèƒ½å¿«ç¯©ï¼Œå¯¦éš›ç”³å ±ç¾©å‹™èˆ‡ç´°ç¯€è«‹èˆ‡åˆæ ¼ç¨…å‹™é¡§å•ç¢ºèªã€‚
              </p>
            `;
          } else if (usStatus === "warning") {
            usBody.innerHTML = `
              <p class="text-xs font-semibold text-amber-900">
                âš ï¸ Warning â€” FBAR Threshold Reached
              </p>
              <p class="text-[11px] mt-1 text-slate-800">
                Filing Required: FinCEN Form 114 (FBAR)
              </p>
              <p class="text-[11px] text-slate-800">
                éœ€ç”³å ±ï¼šè‚¥å’–æ¢æ¬¾ FBAR (Form 114)
              </p>
              <p class="mt-2 text-[11px] font-medium text-slate-900">
                Est. Penalty Risk: <span class="font-bold">$10,000+ USD / Year</span>
              </p>
              <p class="mt-1 text-[11px] text-slate-500">
                Form details: <span class="font-semibold text-slate-700">[ğŸ”’ Login to view]</span>
              </p>
            `;
          } else {
            let lines = `
              <p class="text-xs font-semibold text-red-900">
                ğŸš¨ Critical â€” US Compliance Risk Detected
              </p>
            `;

            if (hitFATCA) {
              lines += `
                <p class="text-[11px] mt-1 text-slate-800">
                  Critical Alert: Form 8938 Filing Required
                </p>
                <p class="text-[11px] text-slate-800">
                  é«˜é¢¨éšªè­¦å‘Šï¼šéœ€ç”³å ± FATCA (Form 8938)
                </p>
              `;
            }

            if (hitPFIC) {
              lines += `
                <p class="text-[11px] mt-1 text-slate-800">
                  Complex Tax Risk: PFIC / Excise Tax Detected
                </p>
                <p class="text-[11px] text-slate-800">
                  è¤‡é›œç¨…å‹™é¢¨éšªï¼šæª¢æ¸¬åˆ° PFIC / æµ·å¤–ä¿å–®ç¨…å‹™å•é¡Œ
                </p>
              `;
            }

            if (hitFBAR) {
              lines += `
                <p class="text-[11px] mt-1 text-slate-800">
                  Filing Required: FinCEN Form 114 (FBAR)
                </p>
                <p class="text-[11px] text-slate-800">
                  éœ€ç”³å ±ï¼šè‚¥å’–æ¢æ¬¾ FBAR (Form 114)
                </p>
              `;
            }

            lines += `
              <p class="mt-2 text-[11px] font-medium text-slate-900">
                Est. Penalty Risk: <span class="font-bold">$10,000+ USD / Year</span>
              </p>
              <p class="mt-1 text-[11px] text-slate-500">
                Key Forms / é—œéµè¡¨å–®ï¼š<span class="font-semibold text-slate-700">[ğŸ”’ Login to view]</span>
              </p>
            `;

            usBody.innerHTML = lines;
          }
        } else {
          if (usStatus === "critical" && hitEstateNonUS) {
            usBody.innerHTML = `
              <p class="text-xs font-semibold text-red-900">
                ğŸš¨ Critical â€” US Estate Tax Exposure
              </p>
              <p class="text-[11px] mt-1 text-slate-800">
                Critical: Exceeds $60k Estate Tax Exemption (40% Tax Risk)
              </p>
              <p class="text-[11px] text-slate-800">
                åš´é‡è­¦å‘Šï¼šè¶…ééç¾ç±å…ç¨…é¡ï¼ˆé¢è‡¨ç´„ 40% ç¾åœ‹éºç”¢ç¨…é¢¨éšªï¼‰ã€‚
              </p>
              <p class="mt-2 text-[11px] font-medium text-slate-900">
                Est. Penalty Risk: <span class="font-bold">$10,000+ USD / Year</span>
              </p>
              <p class="mt-1 text-[11px] text-slate-500">
                IRS exposure details: <span class="font-semibold text-slate-700">[ğŸ”’ Login to view]</span>
              </p>
            `;
          } else {
            usBody.innerHTML = `
              <p class="text-xs font-semibold text-emerald-900">
                âœ… Safe â€¢ Compliant: No US Reporting Required
              </p>
              <p class="text-[11px] text-emerald-800 mt-1">
                åˆè¦ï¼šç›®å‰ç„¡é ˆå‘ç¾åœ‹ç”³å ±ï¼ˆéç¾ç±ä¸”ç¾åœ‹å¢ƒå…§è³‡ç”¢æœªè¶…é $60,000 USD éºç”¢ç¨…å…ç¨…é¡ï¼‰ã€‚
              </p>
              <p class="mt-1 text-[11px] text-emerald-700">
                æœ¬çµæœç‚ºåˆæ­¥å¿«ç¯©ï¼Œå¯¦éš›ç¨…å‹™å½±éŸ¿ä»å»ºè­°èˆ‡å°ˆæ¥­é¡§å•ç¢ºèªã€‚
              </p>
            `;
          }
        }
      }

      if (twCard) {
        let cls = "rounded-2xl border px-4 py-3 flex flex-col gap-2 ";
        if (twStatus === "review") {
          cls += "border-sky-200 bg-sky-50";
        } else {
          cls += "border-emerald-200 bg-emerald-50";
        }
        twCard.className = cls;
      }
      if (twTag) {
        twTag.className =
          "text-[10px] px-2 py-0.5 rounded-full font-semibold tracking-wide";
        if (twStatus === "review") {
          twTag.classList.add("bg-sky-100", "text-sky-800");
          twTag.textContent = "â„¹ï¸ Review Needed";
        } else {
          twTag.classList.add("bg-emerald-100", "text-emerald-700");
          twTag.textContent = "âœ… Optimized";
        }
      }

      if (twBody) {
        if (twStatus === "review") {
          let lines = `
            <p class="text-xs font-semibold text-sky-900">
              â„¹ï¸ Review Needed â€” Taiwan Tax Exposure
            </p>
          `;

          if (hitAMT) {
            lines += `
              <p class="text-[11px] mt-1 text-slate-800">
                Attention: Overseas Income may require AMT Filing
              </p>
              <p class="text-[11px] text-slate-800">
                ç•™æ„ï¼šæµ·å¤–æ‰€å¾—å¯èƒ½é”æœ€ä½ç¨…è² åˆ¶ç”³å ±é–€æª»ï¼ˆæ¨ä¼° US Assets Ã— 5% å·²è¶…é NT$ 1,000,000ï¼‰ã€‚
              </p>
            `;
          }

          if (hitTWEstate) {
            lines += `
              <p class="text-[11px] mt-1 text-slate-800">
                Planning Recommended: TW Estate Tax Exposure
              </p>
              <p class="text-[11px] text-slate-800">
                å»ºè­°è¦åŠƒï¼šå…¨çƒè³‡ç”¢ç¸½é¡å·²é”å°ç£éºç”¢ç¨…èª²ç¨…é–€æª»ï¼ˆç´„ NT$ 13,330,000 ä»¥ä¸Šï¼‰ã€‚
              </p>
            `;
          }

          lines += `
            <p class="mt-2 text-[11px] font-medium text-slate-900">
              Potential Tax Exposure: <span class="font-bold">20% AMT / Estate Tax</span>
            </p>
            <p class="mt-1 text-[11px] text-slate-500">
              Rule details: <span class="font-semibold text-slate-700">[ğŸ”’ Login to view]</span>
            </p>
          `;

          twBody.innerHTML = lines;
        } else {
          twBody.innerHTML = `
            <p class="text-xs font-semibold text-emerald-900">
              âœ… Optimized â€” No Immediate TW Tax Signal
            </p>
            <p class="text-[11px] text-emerald-800 mt-1">
              ç›®å‰ä¼°ç®—ä¸‹ï¼Œå°šæœªæ˜é¡¯è½å…¥å°ç£æœ€ä½ç¨…è² åˆ¶æˆ–éºç”¢ç¨…çš„é«˜å£“å€é–“ï¼Œè³‡ç”¢çµæ§‹ç›¸å°å¥åº·ã€‚
            </p>
            <p class="mt-1 text-[11px] text-emerald-700">
              è‹¥æœªä¾†æµ·å¤–è³‡ç”¢æˆ–å…¨çƒç¸½é¡é€²ä¸€æ­¥æ”¾å¤§ï¼Œå»ºè­°æå‰èˆ‡é¡§å•è¨è«– CFCã€AMT èˆ‡å‚³æ‰¿è¦åŠƒã€‚
            </p>
          `;
        }
      }

      const hasAnyRisk = hasUsRisk || hasTwRisk;
      if (ctaBtn) {
        ctaBtn.classList.toggle("hidden", !hasAnyRisk);
      }

      // æŠŠå¿«ç¯©çµæœä¹Ÿå­˜èµ·ä¾†ï¼ŒDashboard å¯ä»¥ç”¨
      try {
        const payload = { twd, usd, totalUsd: globalUsd };
        localStorage.setItem("taimic_demo_data", JSON.stringify(payload));
      } catch (e) {
        console.error(e);
      }

      if (loggedInEmail && dashboardInitialized) {
        updateDashboardStats();
      }
    }

    function saveAndRedirect() {
      const twdInput = document.getElementById("hero-twd");
      const usdInput = document.getElementById("hero-usd");

      if (!twdInput || !usdInput) {
        switchSection("reports");
        return;
      }

      const twd = parseFloat((twdInput.value || "").replace(/,/g, "")) || 0;
      const usd = parseFloat((usdInput.value || "").replace(/,/g, "")) || 0;
      const totalUsd = twd / RATE + usd;

      try {
        const payload = { twd, usd, totalUsd };
        localStorage.setItem("taimic_demo_data", JSON.stringify(payload));
      } catch (e) {
        console.error(e);
      }

      switchSection("reports");
    }

    function openUploadModal() {
      modalOverlay.classList.remove("hidden");
      document.getElementById("modal-step-1").classList.remove("hidden");
      document.getElementById("modal-step-2").classList.add("hidden");
    }
    function closeUploadModal() {
      modalOverlay.classList.add("hidden");
    }

    function startScan() {
      document.getElementById("modal-step-1").classList.add("hidden");
      document.getElementById("modal-step-2").classList.remove("hidden");
      const bar = document.getElementById("scan-bar");
      bar.style.width = "0";
      setTimeout(() => (bar.style.width = "100%"), 100);

      const log = document.getElementById("scan-log");
      log.innerHTML = "";
      setTimeout(
        () => (log.innerHTML = "&gt; Detecting Language: zh-TW"),
        800
      );
      setTimeout(
        () => (log.innerHTML += '<br>&gt; Parsing: "å¯Œé‚¦äººå£½ (Fubon Life)"'),
        1600
      );
      setTimeout(
        () => (log.innerHTML += "<br>&gt; Match IRS Code: 8938"),
        2400
      );

      setTimeout(() => {
        assets.unshift({
          id: 99,
          name: {
            en: "Fubon Life (Whole Life)",
            zh: "å¯Œé‚¦äººå£½ (çµ‚èº«å£½éšª)",
          },
          type: { en: "Insurance", zh: "å„²è“„éšª" },
          region: "TW",
          usd: 52000,
          new: true,
          risk: true,
        });

        const tEl = document.getElementById("val-tw");
        if (tEl) tEl.dataset.usd = parseFloat(tEl.dataset.usd) + 52000;
        const gEl = document.getElementById("val-global");
        if (gEl) gEl.dataset.usd = parseFloat(gEl.dataset.usd) + 52000;
        if (geoChart) {
          geoChart.data.datasets[0].data[1] += 52000;
          geoChart.update();
        }

        const aiAlert = document.getElementById("ai-alert");
        if (aiAlert) aiAlert.classList.remove("hidden");
        render();
        closeUploadModal();
        window.scrollTo({ top: 0, behavior: "smooth" });

        if (loggedInEmail && dashboardInitialized) {
          updateDashboardStats();
        }
      }, 3000);
    }

    let authMode = "register";

    function applyAuthUI(email) {
      loggedInEmail = email || null;

      const userToggleBtn = document.getElementById("user-toggle");
      const userMenuGuest = document.getElementById("user-menu-guest");
      const userMenuLogged = document.getElementById("user-menu-loggedin");
      const userEmailLabel = document.getElementById("user-email-label");

      const marketingShell = document.getElementById("marketing-shell");
      const dashboardShell = document.getElementById("dashboard-shell");

      if (userToggleBtn) {
        if (email) {
          userToggleBtn.className =
            "w-10 h-10 bg-emerald-500 text-white rounded-full flex items-center justify-center hover:bg-emerald-600 hover:text-white transition-colors";
          const initial = email.charAt(0).toUpperCase();
          userToggleBtn.innerHTML = `<span class="text-sm font-semibold">${initial}</span>`;
        } else {
          userToggleBtn.className =
            "w-10 h-10 bg-[#f3f4f6] text-gray-600 rounded-full flex items-center justify-center hover:bg-[#0066cc] hover:text-white transition-colors";
          userToggleBtn.innerHTML = `<i class="fa-solid fa-user text-base"></i>`;
        }
      }

      if (userMenuGuest && userMenuLogged) {
        if (email) {
          userMenuGuest.classList.add("hidden");
          userMenuLogged.classList.remove("hidden");
        } else {
          userMenuGuest.classList.remove("hidden");
          userMenuLogged.classList.add("hidden");
        }
      }
      if (userEmailLabel) {
        userEmailLabel.textContent = email || "";
      }

      const noteEn = document.getElementById("reports-loggedin-note-en");
      const noteZh = document.getElementById("reports-loggedin-note-zh");
      const actionsEn = document.getElementById("reports-auth-actions-en");
      const actionsZh = document.getElementById("reports-auth-actions-zh");
      const reportsEmailEn = document.getElementById("reports-email-en");
      const reportsEmailZh = document.getElementById("reports-email-zh");

      if (email) {
        if (actionsEn) actionsEn.classList.add("hidden");
        if (actionsZh) actionsZh.classList.add("hidden");
        if (noteEn) noteEn.classList.remove("hidden");
        if (noteZh) noteZh.classList.remove("hidden");
        if (reportsEmailEn) reportsEmailEn.textContent = email;
        if (reportsEmailZh) reportsEmailZh.textContent = email;
      } else {
        if (actionsEn) actionsEn.classList.remove("hidden");
        if (actionsZh) actionsZh.classList.remove("hidden");
        if (noteEn) noteEn.classList.add("hidden");
        if (noteZh) noteZh.classList.add("hidden");
        if (reportsEmailEn) reportsEmailEn.textContent = "";
        if (reportsEmailZh) reportsEmailZh.textContent = "";
      }

      // Dashboard shell åˆ‡æ›ï¼šç™»å…¥å¾Œç›´æ¥é€² Dashboardï¼Œè€Œä¸æ˜¯ Overview
      if (marketingShell && dashboardShell) {
        if (email) {
          marketingShell.classList.add("hidden");
          dashboardShell.classList.remove("hidden");
          if (!dashboardInitialized) {
            initDashboard();
          }
          updateDashboardStats();
        } else {
          dashboardShell.classList.add("hidden");
          marketingShell.classList.remove("hidden");
          switchSection("overview");
        }
      }

      // Dashboard header avatar & email
      const dashUserInitial = document.getElementById("dash-user-initial");
      const dashUserEmail = document.getElementById("dash-user-email");
      if (dashUserInitial && dashUserEmail) {
        if (email) {
          dashUserInitial.textContent = email.charAt(0).toUpperCase();
          dashUserEmail.textContent = email;
        } else {
          dashUserInitial.textContent = "T";
          dashUserEmail.textContent = "you@example.com";
        }
      }
    }

    function handleLogout() {
      try {
        localStorage.removeItem("taimic-user-email");
      } catch (e) {
        console.error(e);
      }
      applyAuthUI(null);
      if (authOverlay) {
        closeAuthModal();
      }
      if (userMenu) {
        userMenu.classList.add("hidden");
      }
      if (dashUserMenu) {
        dashUserMenu.classList.add("hidden");
      }
    }

    function goToReports() {
      switchSection("reports");
      if (userMenu) {
        userMenu.classList.add("hidden");
      }
    }

    function openAuthModal(mode) {
      authMode = mode;
      const title = document.getElementById("auth-title");
      const btnText = document.getElementById("auth-submit-text");
      const msg = document.getElementById("auth-message");
      msg.textContent = "";
      msg.className = "text-sm h-5 text-center";

      if (mode === "login") {
        title.textContent = "Login to Taimic";
        btnText.textContent = "Login";
      } else {
        title.textContent = "Create a Taimic account";
        btnText.textContent = "Sign up";
      }

      document.getElementById("auth-email").value = "";
      document.getElementById("auth-password").value = "";

      authOverlay.classList.remove("hidden");
    }

    function closeAuthModal() {
      authOverlay.classList.add("hidden");
    }

    async function callAuthAPI(path, payload) {
      const res = await fetch(`${API_BASE}${path}`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload),
      });
      return await res.json();
    }

    async function handleAuthSubmit() {
      const email = document.getElementById("auth-email").value.trim();
      const password = document.getElementById("auth-password").value;
      const msg = document.getElementById("auth-message");
      msg.textContent = "";
      msg.className = "text-sm h-5 text-center";

      if (!email || !password) {
        msg.textContent =
          lang === "zh"
            ? "è«‹è¼¸å…¥ email èˆ‡å¯†ç¢¼ã€‚"
            : "Please enter email and password.";
        msg.classList.add("text-red-500");
        return;
      }

      try {
        const path = authMode === "register" ? "/api/register" : "/api/login";
        const data = await callAuthAPI(path, { email, password });

        if (data.ok) {
          msg.textContent =
            authMode === "register"
              ? lang === "zh"
                ? "è¨»å†ŠæˆåŠŸï¼Œè«‹é‡æ–°ç™»å…¥ã€‚"
                : "Sign up successful, please log in."
              : lang === "zh"
              ? `ç™»å…¥æˆåŠŸï¼Œæ­¡è¿ ${data.user?.email || email}`
              : `Welcome back, ${data.user?.email || email}`;
          msg.classList.add("text-green-600");

          if (authMode === "login") {
            const savedEmail = data.user?.email || email;
            try {
              localStorage.setItem("taimic-user-email", savedEmail);
            } catch (e) {
              console.error(e);
            }
            applyAuthUI(savedEmail);
            setTimeout(closeAuthModal, 800);
          }
        } else {
          msg.textContent =
            data.message ||
            (lang === "zh"
              ? "æ“ä½œå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚"
              : "Something went wrong, please try again.");
          msg.classList.add("text-red-500");
        }
      } catch (e) {
        console.error(e);
        msg.textContent =
          lang === "zh"
            ? "ä¼ºæœå™¨éŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚"
            : "Server error, please try again.";
        msg.classList.add("text-red-500");
      }
    }

    // Dashboard helper: aggregate numbers
    function computeDashboardData() {
      const data = {
        totalUsd: 0,
        byRegion: {},
        categories: { market: 0, realEstate: 0, defensive: 0 },
      };

      assets.forEach((a) => {
        if (!a.usd) return;
        data.totalUsd += a.usd;
        const region = a.region || "Other";
        data.byRegion[region] = (data.byRegion[region] || 0) + a.usd;

        const typeEn = (a.type && a.type.en) || "";
        if (typeEn.includes("Estate")) {
          data.categories.realEstate += a.usd;
        } else if (typeEn.includes("Insurance") || typeEn.includes("Cash")) {
          data.categories.defensive += a.usd;
        } else {
          data.categories.market += a.usd;
        }
      });

      // å¦‚æœ user æœ‰è·‘ hero å¿«ç¯©ï¼Œç”¨é‚£å€‹ totalUsd è¦†è“‹ demo è³‡æ–™
      try {
        const raw = localStorage.getItem("taimic_demo_data");
        if (raw) {
          const payload = JSON.parse(raw);
          if (typeof payload.totalUsd === "number" && payload.totalUsd > 0) {
            data.totalUsd = payload.totalUsd;
            const twd = payload.twd || 0;
            const usd = payload.usd || 0;
            data.byRegion["TW"] = twd / RATE;
            data.byRegion["US"] = usd;
          }
        }
      } catch (e) {
        console.error(e);
      }

      return data;
    }

    let geoChart;
    let allocationChart;
    let langMenu, userMenu, modalOverlay, authOverlay, mobileMenu, dashUserMenu;

    function initDashboard() {
      dashboardInitialized = true;

      // Allocation donut chart
      const allocCanvas = document.getElementById("allocationChart");
      if (allocCanvas) {
        const ctxAlloc = allocCanvas.getContext("2d");
        allocationChart = new Chart(ctxAlloc, {
          type: "doughnut",
          data: {
            labels: ["Market", "Real Estate", "Defensive"],
            datasets: [
              {
                data: [40, 30, 30],
                backgroundColor: ["#0f5ad8", "rgba(15,90,216,0.6)", "#60a5fa"],
                borderWidth: 0,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            cutout: "68%",
            plugins: {
              legend: { display: false },
            },
          },
        });
      }

      updateDashboardStats();
    }

    function updateDashboardStats() {
      const data = computeDashboardData();
      const totalUsd = data.totalUsd || 0;
      const twUsd = data.byRegion["TW"] || 0;
      const usUsd = data.byRegion["US"] || 0;
      const otherUsd = Math.max(totalUsd - twUsd - usUsd, 0);

      const networthEl = document.getElementById("dash-networth-value");
      const curLabelEl = document.getElementById("dash-networth-currency-label");
      const changePill = document.getElementById("dash-networth-change-pill");
      const changeIcon = document.getElementById("dash-networth-change-icon");
      const changeVal = document.getElementById("dash-networth-change-value");

      const twValEl = document.getElementById("dash-region-tw-value");
      const twPctEl = document.getElementById("dash-region-tw-percent");
      const usValEl = document.getElementById("dash-region-us-value");
      const usPctEl = document.getElementById("dash-region-us-percent");

      const fxValueEl = document.getElementById("fx-impact-value");
      const tooltipTwEl = document.getElementById("dash-tooltip-tw");
      const tooltipUsEl = document.getElementById("dash-tooltip-us");

      const allocMarketPct = document.getElementById("alloc-market-percent");
      const allocRealPct = document.getElementById("alloc-realestate-percent");
      const allocDefPct = document.getElementById("alloc-defensive-percent");
      const allocSummary = document.getElementById("alloc-summary-text");

      if (!networthEl) return;

      networthEl.textContent = fmt(totalUsd);
      if (curLabelEl) {
        curLabelEl.textContent = curr === "USD" ? "Base: USD" : "Base: TWD";
      }

      const dailyChangeUsd = totalUsd * 0.0123; // demo 1.23%
      const isPositive = dailyChangeUsd >= 0;
      if (changePill && changeIcon && changeVal) {
        changePill.className =
          "inline-flex items-center px-2.5 py-1 rounded-full text-[11px] font-medium " +
          (isPositive
            ? "bg-emerald-50 text-emerald-700"
            : "bg-rose-50 text-rose-700");
        changeIcon.className =
          "mr-1 text-[10px] fa-solid " +
          (isPositive ? "fa-arrow-trend-up" : "fa-arrow-trend-down");
        changeVal.textContent =
          (isPositive ? "+" : "-") + fmtAbs(dailyChangeUsd) + " (Today)";
      }

      const twPct = totalUsd ? Math.round((twUsd / totalUsd) * 100) : 0;
      const usPct = totalUsd ? Math.round((usUsd / totalUsd) * 100) : 0;

      if (twValEl) twValEl.textContent = fmtAbs(twUsd);
      if (twPctEl) twPctEl.textContent = `${twPct}% of total`;
      if (usValEl) usValEl.textContent = fmtAbs(usUsd + otherUsd);
      if (usPctEl) usPctEl.textContent = `${Math.min(
        100,
        100 - twPct
      )}% of total`;

      if (tooltipTwEl) tooltipTwEl.textContent = fmtAbs(twUsd);
      if (tooltipUsEl) tooltipUsEl.textContent = fmtAbs(usUsd);

      if (fxValueEl) {
        const fxImpactUsd = totalUsd * 0.023;
        fxValueEl.textContent = (fxImpactUsd >= 0 ? "+" : "-") + fmtAbs(fxImpactUsd);
      }

      // Allocation chart data
      const cats = data.categories;
      const totalAlloc = cats.market + cats.realEstate + cats.defensive || 1;
      const mPct = Math.round((cats.market / totalAlloc) * 100);
      const rPct = Math.round((cats.realEstate / totalAlloc) * 100);
      const dPct = Math.max(0, 100 - mPct - rPct);

      if (allocationChart) {
        allocationChart.data.datasets[0].data = [
          cats.market || 0.1,
          cats.realEstate || 0.1,
          cats.defensive || 0.1,
        ];
        allocationChart.update();
      }

      if (allocMarketPct) allocMarketPct.textContent = `${mPct}%`;
      if (allocRealPct) allocRealPct.textContent = `${rPct}%`;
      if (allocDefPct) allocDefPct.textContent = `${dPct}%`;

      if (allocSummary) {
        let largest = "Market";
        let largestValue = mPct;
        if (rPct > largestValue) {
          largest = "Real Estate";
          largestValue = rPct;
        }
        if (dPct > largestValue) {
          largest = "Defensive";
          largestValue = dPct;
        }
        allocSummary.innerHTML =
          `Your largest sleeve is <span class="font-semibold">${largest}</span> at ` +
          `<span class="font-semibold">${largestValue}%</span>. ` +
          `Review if this aligns with your risk tolerance and cash needs.`;
      }
    }

    window.onload = function () {
      // Geo chart (marketing)
      const geoCanvas = document.getElementById("geoChart");
      if (geoCanvas) {
        const ctx = geoCanvas.getContext("2d");
        geoChart = new Chart(ctx, {
          type: "doughnut",
          data: {
            labels: ["US", "TW"],
            datasets: [
              {
                data: [482500, 315200],
                backgroundColor: ["#2563eb", "#111827"],
                borderWidth: 0,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            cutout: "72%",
            plugins: {
              legend: { display: false },
            },
          },
        });
      }

      langMenu = document.getElementById("lang-menu");
      userMenu = document.getElementById("user-menu");
      mobileMenu = document.getElementById("mobile-menu");
      modalOverlay = document.getElementById("modal-overlay");
      authOverlay = document.getElementById("auth-overlay");
      dashUserMenu = document.getElementById("dash-user-menu");

      render();

      // ä¸€é€²é é¢å°±çœ‹ localStorage æœ‰æ²’æœ‰ç™»å…¥é
      try {
        const storedEmail = localStorage.getItem("taimic-user-email");
        if (storedEmail) {
          applyAuthUI(storedEmail);
        } else {
          applyAuthUI(null);
        }
      } catch (e) {
        console.error(e);
        applyAuthUI(null);
      }

      // Hero Screener slide-up åˆå§‹åŒ–
      heroCardOuterEl = document.getElementById("compliance-card");
      heroOverlayEl = document.getElementById("hero-overlay");
      const heroRunScanBtn = document.getElementById("hero-run-scan-btn");

      if (heroRunScanBtn && heroCardOuterEl && heroOverlayEl) {
        heroRunScanBtn.addEventListener("click", function () {
          openHeroCard();
        });

        heroOverlayEl.addEventListener("click", function () {
          if (heroCardOpen) {
            closeHeroCard();
          }
        });
      }

      const langToggle = document.getElementById("lang-toggle");
      const userToggle = document.getElementById("user-toggle");
      const mobileBtn = document.getElementById("mobile-menu-btn");
      const dashUserToggle = document.getElementById("dash-user-toggle");

      function closeAllMenus() {
        if (langMenu) langMenu.classList.add("hidden");
        if (userMenu) userMenu.classList.add("hidden");
        if (mobileMenu) mobileMenu.classList.add("hidden");
        if (dashUserMenu) dashUserMenu.classList.add("hidden");
      }

      if (langToggle) {
        langToggle.addEventListener("click", (e) => {
          e.stopPropagation();
          const open = langMenu && langMenu.classList.contains("hidden");
          closeAllMenus();
          if (open && langMenu) langMenu.classList.remove("hidden");
        });
      }
      if (langMenu) langMenu.addEventListener("click", (e) => e.stopPropagation());

      if (userToggle) {
        userToggle.addEventListener("click", (e) => {
          e.stopPropagation();
          const open = userMenu && userMenu.classList.contains("hidden");
          closeAllMenus();
          if (open && userMenu) userMenu.classList.remove("hidden");
        });
      }
      if (userMenu) userMenu.addEventListener("click", (e) => e.stopPropagation());

      if (mobileBtn) {
        mobileBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          const open = mobileMenu && mobileMenu.classList.contains("hidden");
          closeAllMenus();
          if (open && mobileMenu) mobileMenu.classList.remove("hidden");
        });
      }

      if (dashUserToggle) {
        dashUserToggle.addEventListener("click", (e) => {
          e.stopPropagation();
          const open = dashUserMenu && dashUserMenu.classList.contains("hidden");
          closeAllMenus();
          if (open && dashUserMenu) dashUserMenu.classList.remove("hidden");
        });
      }
      if (dashUserMenu) dashUserMenu.addEventListener("click", (e) => e.stopPropagation());

      document.querySelectorAll(".mobile-nav-link").forEach((link) => {
        link.addEventListener("click", (e) => {
          e.preventDefault();
          const section = link.dataset.section;
          if (section) switchSection(section);
          if (mobileMenu) mobileMenu.classList.add("hidden");
        });
      });

      document.addEventListener("click", closeAllMenus);

      const authSubmitBtn = document.getElementById("auth-submit");
      if (authSubmitBtn) {
        authSubmitBtn.addEventListener("click", handleAuthSubmit);
      }

      document.querySelectorAll("nav .nav-link").forEach((link) => {
        link.addEventListener("click", (e) => {
          e.preventDefault();
          const section = link.dataset.section;
          if (section) switchSection(section);
        });
      });

      // Dashboard nav click (ç¾åœ¨åªæœ‰ä¸€å€‹å¯¦éš›ç•«é¢ï¼Œç”¨ active æ¨£å¼å³å¯)
      document.querySelectorAll(".dash-nav-item").forEach((btn) => {
        btn.addEventListener("click", () => {
          document
            .querySelectorAll(".dash-nav-item")
            .forEach((b) => b.classList.remove("dash-nav-item-active"));
          btn.classList.add("dash-nav-item-active");
        });
      });

      switchSection("overview");
      fetchFXRate();
    };

    function openHeroCard() {
      if (!heroCardOuterEl || !heroOverlayEl) return;
      heroCardOuterEl.classList.add("hero-card-open");
      heroOverlayEl.classList.remove("hidden");
      heroOverlayEl.classList.add("hero-overlay-active");
      heroCardOpen = true;
    }

    function closeHeroCard() {
      if (!heroCardOuterEl || !heroOverlayEl) return;
      heroCardOuterEl.classList.remove("hero-card-open");
      heroOverlayEl.classList.add("hidden");
      heroOverlayEl.classList.remove("hero-overlay-active");
      heroCardOpen = false;
    }
  </script>
</body>
</html>
