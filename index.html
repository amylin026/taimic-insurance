<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TAIMIC | Global Wealth Management</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- FontAwesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
      background-color: #f5f5f5;
      color: #333333;
      -webkit-font-smoothing: antialiased;
    }

    :root {
      --brand-blue: #0066cc;
      --brand-dark: #004c99;
      --text-main: #222222;
    }

    /* --- Logo Clock --- */
    .logo-clock { width: 44px; height: 44px; }

    .clock-outer {
      fill: none;
      stroke: #dbeafe;
      stroke-width: 2.5;
    }

    .clock-inner {
      fill: #eff6ff;
      stroke: #e5edff;
      stroke-width: 1.5;
    }

    .clock-core {
      fill: url(#clockGradient);
      opacity: 0.98;
    }

    .clock-tick-line {
      stroke: #cbd5f5;
      stroke-width: 1.4;
      stroke-linecap: round;
    }

    .hand {
      stroke-width: 2.6;
      stroke-linecap: round;
      transform-origin: 50% 50%;
    }

    .hand-hour {
      stroke: #1f2933;
      animation: rotate 1800s linear infinite;
    }

    .hand-minute {
      stroke: #3b82f6;
      animation: rotate 300s linear infinite;
    }

    .center-dot {
      fill: #ffffff;
      stroke: #3b82f6;
      stroke-width: 2;
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }

    /* --- Nav --- */
    .nav-link {
      font-size: 15px; 
      font-weight: 500; 
      color: #555;
      padding: 0 20px; 
      height: 72px; 
      display: flex; 
      align-items: center;
      border-bottom: 3px solid transparent; 
      transition: all .2s; 
      text-decoration: none;
    }
    .nav-link:hover { 
      color: var(--brand-blue); 
    }
    .nav-link.active { 
      color: #000; 
      font-weight: 700; 
      border-bottom-color: var(--brand-blue); 
    }

    /* --- Dropdown --- */
    .dropdown-container {
      position: relative;
      height: 100%;
      display: flex;
      align-items: center;
    }
    .dropdown-menu {
      position: absolute;
      top: 70px;
      right: 0;
      background: white;
      border: 1px solid #e5e7eb;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.12);
      min-width: 180px;
      z-index: 50;
      border-radius: 12px;
      padding: 6px 0;
      overflow: hidden;
    }
    .dropdown-item {
      padding: 10px 18px;
      font-size: 14px;
      color: #4b5563;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background .15s, color .15s;
    }
    .dropdown-item:hover {
      background-color: #f3f4ff;
      color: var(--brand-blue);
    }
    .dropdown-item.active {
      font-weight: 700;
      color: var(--brand-blue);
      background-color: #eef2ff;
    }

    .btn-corp {
      background-color: var(--brand-blue);
      color: white;
      font-size: 14px;
      font-weight: 600;
      padding: 10px 24px;
      border-radius: 9999px;
      transition: background .2s, transform .1s;
    }
    .btn-corp:hover {
      background-color: var(--brand-dark);
      transform: translateY(-1px);
    }

    .scan-overlay {
      background: linear-gradient(to bottom, transparent, rgba(0, 102, 204, 0.15), transparent);
      animation: scan 2s linear infinite;
    }
    @keyframes scan {
      0% { transform: translateY(-100%); }
      100% { transform: translateY(100%); }
    }

    .animate-fade-in {
      animation: fadeIn .4s ease-out forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(4px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* --- Card --- */
    .panel {
      background: white;
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 6px 18px rgba(15, 23, 42, 0.04);
    }

    /* --- Footer --- */
    .footer-col-title {
      font-size: 13px;
      font-weight: 700;
      letter-spacing: .08em;
      text-transform: uppercase;
      color: #6b7280;
      margin-bottom: 10px;
    }
    .footer-link {
      font-size: 14px;
      color: #4b5563;
      padding: 4px 0;
      cursor: pointer;
    }
    .footer-link:hover {
      color: var(--brand-blue);
    }
  </style>
</head>

<body class="flex flex-col min-h-screen bg-[#f3f5f9]">

  <!-- ============= HEADER ============= -->
  <header class="bg-white border-b border-gray-200 sticky top-0 z-40 shadow-sm h-[72px]">
    <div class="max-w-[1440px] mx-auto px-6 h-full flex justify-between items-center">

      <!-- Logo -->
      <div class="flex items-center gap-4 cursor-pointer">
        <svg class="logo-clock" viewBox="0 0 100 100">
          <defs>
            <linearGradient id="clockGradient" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#bfdbfe" />
              <stop offset="100%" stop-color="#60a5fa" />
            </linearGradient>
          </defs>
          <circle cx="50" cy="50" r="46" class="clock-outer" />
          <circle cx="50" cy="50" r="38" class="clock-inner" />
          <circle cx="50" cy="50" r="30" class="clock-core" />
          <line x1="50" y1="12" x2="50" y2="18" class="clock-tick-line" />
          <line x1="88" y1="50" x2="82" y2="50" class="clock-tick-line" />
          <line x1="50" y1="82" x2="50" y2="88" class="clock-tick-line" />
          <line x1="18" y1="50" x2="12" y2="50" class="clock-tick-line" />
          <line x1="50" y1="50" x2="50" y2="30" class="hand hand-hour" />
          <line x1="50" y1="50" x2="66" y2="34" class="hand hand-minute" />
          <circle cx="50" cy="50" r="3.2" class="center-dot" />
        </svg>
        <div class="flex flex-col justify-center">
          <span class="text-[22px] font-[700] tracking-tight text-[#0066cc] leading-none">TAIMIC</span>
          <span class="text-[10px] font-[600] tracking-[0.2em] text-gray-500 mt-1 uppercase">Global Wealth</span>
        </div>
      </div>

      <!-- Nav -->
      <nav class="hidden lg:flex h-full items-center space-x-4">
        <a href="#" class="nav-link active" data-section="overview" data-i18n="nav.overview">Overview</a>
        <a href="#" class="nav-link" data-section="pricing" data-i18n="nav.pricing">Pricing</a>
        <a href="#" class="nav-link" data-section="reports" data-i18n="nav.reports">Reports</a>
        <a href="#" class="nav-link" data-section="about" data-i18n="nav.about">About Taimic</a>
      </nav>

      <!-- Right tools -->
      <div class="flex items-center gap-6 h-full">

        <!-- Currency -->
        <div class="hidden sm:flex items-center text-xs font-medium text-gray-600 border border-gray-200 rounded-full overflow-hidden bg-gray-50 shadow-sm">
          <button id="btn-usd" onclick="setCurrency('USD')" class="px-4 py-2 transition-colors">
            USD
          </button>
          <button id="btn-twd" onclick="setCurrency('TWD')" class="px-4 py-2 transition-colors">
            TWD
          </button>
        </div>

        <!-- Language -->
        <div class="dropdown-container cursor-pointer h-full">
          <button id="lang-toggle" type="button" class="flex items-center gap-2 text-gray-600 hover:text-[#0066cc] transition-colors">
            <div class="w-9 h-9 rounded-full flex items-center justify-center bg-gray-50 border border-gray-200">
              <i class="fa-solid fa-globe text-sm"></i>
            </div>
            <i class="fa-solid fa-caret-down text-xs"></i>
          </button>
          <div id="lang-menu" class="dropdown-menu hidden">
            <div id="opt-zh" class="dropdown-item" onclick="changeLang('zh')">ÁπÅÈ´î‰∏≠Êñá</div>
            <div id="opt-en" class="dropdown-item active" onclick="changeLang('en')">English</div>
          </div>
        </div>

        <!-- User -->
        <div class="dropdown-container cursor-pointer h-full border-l border-gray-200 pl-4">
          <button id="user-toggle" type="button" class="w-10 h-10 bg-[#f3f4f6] text-gray-600 rounded-full flex items-center justify-center hover:bg-[#0066cc] hover:text-white transition-colors">
            <i class="fa-solid fa-user text-base"></i>
          </button>
          <div id="user-menu" class="dropdown-menu hidden">
            <div class="dropdown-item" onclick="openAuthModal('login')">
              <i class="fa-solid fa-right-to-bracket"></i>
              <span data-i18n="user.login">Login</span>
            </div>
            <div class="dropdown-item" onclick="openAuthModal('register')">
              <i class="fa-solid fa-user-plus"></i>
              <span data-i18n="user.register">Sign up</span>
            </div>
            <div class="border-t border-gray-100 my-1"></div>
            <div class="dropdown-item">
              <i class="fa-solid fa-circle-question"></i>
              <span>Help</span>
            </div>
          </div>
        </div>

      </div>
    </div>
  </header>

  <!-- ============= MAIN (ALL SECTIONS) ============= -->
  <main class="flex-grow">

    <!-- ===== Overview (Dashboard) ===== -->
    <section id="section-overview">
      <!-- HERO / SUMMARY -->
      <section class="border-b border-gray-200 bg-[#e5ebf5]">
        <div class="max-w-[1440px] mx-auto px-6 py-8 md:py-10">
          <div class="panel px-8 py-8 md:px-10 md:py-9 flex flex-col md:flex-row md:items-center md:justify-between gap-8">
            <div>
              <div class="text-xs font-bold text-gray-400 uppercase tracking-[0.2em] mb-2">
                Global Asset Management / Dashboard
              </div>
              <h1 class="text-[28px] md:text-[32px] font-[700] text-[#111827] tracking-tight mb-3" data-i18n="page.title">
                Cross-border wealth platform
              </h1>
              <p class="text-gray-600 text-sm md:text-[15px] max-w-2xl leading-relaxed" data-i18n="page.desc">
                Integrated view of Taiwan & US assets with FATCA / CRS compliance checks and AI insights.
              </p>
            </div>

            <div class="flex flex-col items-start md:items-end gap-3">
              <button onclick="openUploadModal()" class="btn-corp flex items-center gap-2 shadow-sm">
                <i class="fa-solid fa-plus"></i>
                <span data-i18n="btn.add">Add asset</span>
              </button>
              <div class="text-[11px] text-gray-500 flex items-center gap-2">
                <i class="fa-solid fa-shield-halved text-[#0066cc]"></i>
                <span>FATCA / CRS real-time risk scan</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- DASHBOARD BODY -->
      <section class="py-10">
        <div class="max-w-[1440px] mx-auto px-6 w-full">
          <div class="panel px-6 md:px-8 lg:px-10 py-8 md:py-10">

            <!-- Stats -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
              <div class="p-6 border border-gray-200 rounded-xl hover:border-[#0066cc] transition-colors bg-white">
                <div class="flex justify-between items-start mb-4">
                  <h3 class="text-xs font-bold text-gray-500 uppercase tracking-[0.18em]" data-i18n="stat.us">US Net Worth</h3>
                  <span class="text-xl">üá∫üá∏</span>
                </div>
                <div class="text-3xl font-bold text-[#111827] font-mono tracking-tight val-display" data-usd="482500">...</div>
                <div class="mt-2 text-xs font-medium text-green-600 flex items-center gap-1">
                  <i class="fa-solid fa-arrow-trend-up"></i> +4.2% YTD
                </div>
              </div>

              <div class="p-6 border border-gray-200 rounded-xl hover:border-[#0066cc] transition-colors bg-white">
                <div class="flex justify-between items-start mb-4">
                  <h3 class="text-xs font-bold text-gray-500 uppercase tracking-[0.18em]" data-i18n="stat.tw">Taiwan Net Worth</h3>
                  <span class="text-xl">üáπüáº</span>
                </div>
                <div id="val-tw" class="text-3xl font-bold text-[#111827] font-mono tracking-tight val-display" data-usd="315200">...</div>
                <div class="mt-2 text-xs font-medium text-green-600 flex items-center gap-1">
                  <i class="fa-solid fa-arrow-trend-up"></i> +1.8% YTD
                </div>
              </div>

              <div class="p-6 bg-[#eff4fb] border border-blue-100 rounded-xl">
                <div class="flex justify-between items-start mb-4">
                  <h3 class="text-xs font-bold text-[#0066cc] uppercase tracking-[0.2em]" data-i18n="stat.global">Global Net Worth</h3>
                  <i class="fa-solid fa-globe text-[#0066cc]"></i>
                </div>
                <div id="val-global" class="text-3xl font-bold text-[#0066cc] font-mono tracking-tight val-display" data-usd="797700">...</div>
                <div class="mt-2 text-xs font-medium text-gray-600 flex items-center gap-1">
                  <i class="fa-solid fa-shield-check text-[#0066cc]"></i>
                  <span data-i18n="stat.safe">Estate tax risk: safe</span>
                </div>
              </div>
            </div>

            <!-- Table + Chart -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-10">

              <!-- Table -->
              <div class="lg:col-span-2">

                <!-- AI Alert -->
                <div id="ai-alert" class="hidden mb-8 bg-orange-50 border-l-4 border-orange-500 rounded-lg p-5 flex gap-4 animate-fade-in">
                  <div class="text-orange-500 pt-1">
                    <i class="fa-solid fa-triangle-exclamation text-lg"></i>
                  </div>
                  <div>
                    <h4 class="font-bold text-[#111827] text-sm mb-1" data-i18n="alert.title">
                      AI tax alert: potential FATCA risk detected
                    </h4>
                    <p class="text-sm text-gray-700 leading-relaxed" data-i18n="alert.desc">
                      A new high cash-value policy in Taiwan may exceed the Form 8938 reporting threshold.
                    </p>
                    <button class="mt-3 text-xs font-bold text-[#0066cc] uppercase tracking-wide hover:underline">
                      View detailed report &rarr;
                    </button>
                  </div>
                </div>

                <div class="flex justify-between items-end mb-4 pb-2 border-b border-gray-200">
                  <h3 class="text-lg font-bold text-[#111827]" data-i18n="table.title">Holdings</h3>
                  <button class="text-xs text-[#0066cc] font-bold uppercase hover:text-[#004c99] flex items-center gap-1">
                    <i class="fa-solid fa-file-export"></i> Export
                  </button>
                </div>

                <div class="overflow-x-auto">
                  <table class="w-full text-left text-sm">
                    <thead>
                      <tr class="text-xs text-gray-500 uppercase tracking-[0.16em]">
                        <th class="pl-2 pb-3 border-b-2 border-gray-100" data-i18n="col.name">Asset</th>
                        <th class="pb-3 border-b-2 border-gray-100" data-i18n="col.region">Region</th>
                        <th class="pb-3 border-b-2 border-gray-100" data-i18n="col.type">Type</th>
                        <th class="pr-2 pb-3 border-b-2 border-gray-100 text-right" data-i18n="col.val">Value</th>
                      </tr>
                    </thead>
                    <tbody id="asset-list"></tbody>
                  </table>
                </div>
              </div>

              <!-- Chart -->
              <div class="space-y-8">
                <div class="border border-gray-200 rounded-3xl p-8 bg-white shadow-sm">
                  <h3 class="text-xs font-bold text-gray-500 uppercase mb-6 tracking-[0.18em]" data-i18n="chart.title">
                    Regional allocation
                  </h3>

                  <div class="relative w-full max-w-[320px] mx-auto aspect-square">
                    <canvas id="geoChart"></canvas>
                    <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                      <div class="relative text-center">
                        <div class="text-lg font-bold text-[#0f172a] leading-none">
                          100%
                        </div>
                        <div
                          class="absolute left-1/2 -translate-x-1/2 -top-4
                                 text-[10px] text-gray-400 font-bold uppercase tracking-[0.18em]">
                          TOTAL
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="bg-[#e6f0fa] p-4 rounded-2xl border border-blue-100 mt-6">
                    <div class="text-[10px] font-bold text-[#0066cc] mb-1 uppercase flex items-center gap-1">
                      <i class="fa-solid fa-robot"></i>
                      <span data-i18n="chart.insight">AI insight</span>
                    </div>
                    <p class="text-xs text-gray-700 leading-relaxed" data-i18n="chart.desc">
                      Taiwan assets make up 40% of your net worth. Consider hedging TWD FX risk.
                    </p>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </section>
    </section>

    <!-- ===== Pricing (Cluely-style) ===== -->
    <section id="section-pricing" class="hidden bg-[#eef2ff] border-t border-gray-200">
      <div class="max-w-[1100px] mx-auto px-6 pt-14 pb-20">
        <!-- Hero -->
        <div class="text-center">
          <h1 class="text-[34px] md:text-[40px] font-extrabold tracking-tight text-[#0f172a] mb-3">
            Start Taimic for free.
          </h1>
          <p class="text-sm md:text-base text-gray-600 max-w-2xl mx-auto">
            Whether you‚Äôre just mapping your global balance sheet or preparing for FATCA / CRS, pick a plan that grows with your cross-border life.
          </p>

          <!-- Billing toggle -->
          <div class="flex items-center justify-center gap-4 mt-7">
            <span id="billing-label-monthly" class="text-sm font-medium text-gray-900">Monthly</span>
            <button type="button"
                    onclick="toggleBilling()"
                    class="relative w-11 h-6 rounded-full bg-gray-300 flex items-center px-1 transition-colors">
              <div id="billing-toggle-knob"
                   class="w-4 h-4 bg-white rounded-full shadow transform transition-transform translate-x-0"></div>
            </button>
            <span id="billing-label-yearly" class="text-sm font-medium text-gray-500">Annually</span>
            <span class="text-[11px] text-[#2563eb] font-semibold bg-blue-50 border border-blue-100 rounded-full px-2 py-0.5">
              2 months free
            </span>
          </div>
        </div>

        <!-- Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-12">
          <!-- Starter -->
          <div class="bg-white rounded-3xl border border-gray-200 shadow-sm p-8 flex flex-col">
            <h3 class="text-sm font-semibold text-gray-700 mb-1">Starter</h3>
            <p class="text-xs text-gray-500 mb-4">For trying Taimic with a small cross-border portfolio.</p>
            <div class="flex items-baseline gap-1 mb-1">
              <div class="text-3xl font-bold text-gray-900" 
                   data-plan-price 
                   data-monthly="$0" 
                   data-yearly="$0">
                $0
              </div>
              <span class="text-sm text-gray-500">/ month</span>
            </div>
            <button class="mt-4 w-full py-2.5 rounded-xl bg-gray-900 text-white text-sm font-semibold hover:bg-black transition">
              Get started
            </button>
            <ul class="mt-6 space-y-2 text-sm text-gray-600">
              <li class="flex gap-2">
                <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                <span>Up to 3 brokerage / bank accounts</span>
              </li>
              <li class="flex gap-2">
                <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                <span>Basic global net-worth dashboard</span>
              </li>
              <li class="flex gap-2">
                <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                <span>Single-currency view (USD or TWD)</span>
              </li>
            </ul>
          </div>

          <!-- Pro -->
          <div class="bg-white rounded-3xl border border-blue-400 shadow-[0_20px_50px_rgba(37,99,235,0.25)] p-8 flex flex-col relative overflow-hidden">
            <div class="absolute inset-0 pointer-events-none bg-gradient-to-b from-blue-50/70 to-transparent"></div>
            <div class="relative z-10">
              <div class="flex items-center justify-between mb-1">
                <h3 class="text-sm font-semibold text-gray-800">Pro</h3>
                <span class="text-[11px] font-semibold text-[#2563eb] bg-blue-50 px-2 py-0.5 rounded-full border border-blue-100">
                  Most popular
                </span>
              </div>
              <p class="text-xs text-gray-500 mb-4">
                For globally mobile families who want full visibility across countries and currencies.
              </p>
              <div class="flex items-baseline gap-1 mb-1">
                <div class="text-3xl font-bold text-gray-900" 
                     data-plan-price 
                     data-monthly="$29" 
                     data-yearly="$290">
                  $29
                </div>
                <span class="text-sm text-gray-500">/ month</span>
              </div>
              <p class="text-[11px] text-gray-500 mb-4">Billed annually as $290 when yearly is selected.</p>
              <button class="mt-1 w-full py-2.5 rounded-xl bg-[#2563eb] text-white text-sm font-semibold hover:bg-[#1d4ed8] transition">
                Subscribe
              </button>
              <ul class="mt-6 space-y-2 text-sm text-gray-700">
                <li class="flex gap-2">
                  <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                  <span>Unlimited accounts across multiple countries</span>
                </li>
                <li class="flex gap-2">
                  <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                  <span>Multi-currency consolidated net-worth &amp; performance</span>
                </li>
                <li class="flex gap-2">
                  <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                  <span>FATCA / FBAR / CRS threshold monitoring</span>
                </li>
                <li class="flex gap-2">
                  <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                  <span>Basic inheritance &amp; ‚Äúwhat-if‚Äù simulations</span>
                </li>
                <li class="flex gap-2">
                  <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                  <span>Email support with cross-border specialists</span>
                </li>
              </ul>
            </div>
          </div>

          <!-- Pro+ -->
          <div class="bg-white rounded-3xl border border-gray-200 shadow-sm p-8 flex flex-col">
            <h3 class="text-sm font-semibold text-gray-700 mb-1">Family Office</h3>
            <p class="text-xs text-gray-500 mb-4">
              For families working with tax / legal advisors who need deeper structure &amp; export.
            </p>
            <div class="flex items-baseline gap-1 mb-1">
              <div class="text-3xl font-bold text-gray-900" 
                   data-plan-price 
                   data-monthly="$79" 
                   data-yearly="$790">
                $79
              </div>
              <span class="text-sm text-gray-500">/ month</span>
            </div>
            <p class="text-[11px] text-gray-500 mb-4">Billed annually as $790 when yearly is selected.</p>
            <button class="mt-1 w-full py-2.5 rounded-xl bg-gray-900 text-white text-sm font-semibold hover:bg-black transition">
              Talk to us
            </button>
            <ul class="mt-6 space-y-2 text-sm text-gray-600">
              <li class="flex gap-2">
                <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                <span>Everything in Pro</span>
              </li>
              <li class="flex gap-2">
                <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                <span>Advanced entity / trust / beneficiary mapping</span>
              </li>
              <li class="flex gap-2">
                <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                <span>Downloadable reports for accountants &amp; lawyers</span>
              </li>
              <li class="flex gap-2">
                <i class="fa-solid fa-check text-[#16a34a] mt-1 text-xs"></i>
                <span>Dedicated onboarding &amp; priority support</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== About Taimic (Á∞°ÁâàËã±ÊñáÔºå‰Ω†ÂèØ‰πãÂæåÊîπÊàê‰∏≠/Ëã±ÈõôÊ¨Ñ) ===== -->
    <section id="section-about" class="hidden bg-[#e5ebf5] border-t border-gray-200">
      <div class="max-w-[960px] mx-auto px-6 pt-14 pb-20">
        <h1 class="text-[32px] font-extrabold tracking-tight text-[#111827] mb-3">
          About Taimic
        </h1>
        <p class="text-sm md:text-base text-gray-700 leading-relaxed mb-6">
          Taimic is an AI-enabled cross-border wealth and legacy management platform built for globally
          mobile families. We bring assets held in multiple countries back into a single view, reduce
          compliance risk under complex tax regimes, and help you think ahead about how your wealth will
          be structured and shared ‚Äì without living inside Excel and manual FX calculations every day.
        </p>

        <h2 class="text-lg font-semibold text-[#111827] mt-8 mb-2">What problem we are solving</h2>
        <p class="text-sm text-gray-700 leading-relaxed mb-3">
          In reality, life for a cross-border family often looks like this:
        </p>
        <ul class="list-disc pl-5 text-sm text-gray-700 space-y-2 mb-6">
          <li>Brokerage accounts in one country, pensions and insurance in another, property in a third.</li>
          <li>Cash, deposits, funds and ETFs scattered across banks and platforms with different currencies.</li>
          <li>To answer ‚Äúwhat am I actually worth?‚Äù or ‚Äúwill I trigger FATCA / FBAR / CRS thresholds?‚Äù you have to download statements, check FX history and reconcile everything in Excel.</li>
          <li>If something happens to one family member, the others may not even know what assets exist, let alone how they will be taxed and distributed.</li>
        </ul>

        <h2 class="text-lg font-semibold text-[#111827] mt-8 mb-2">How Taimic works</h2>
        <p class="text-sm text-gray-700 leading-relaxed mb-3">
          At its core, Taimic combines multi-country asset consolidation, compliance &amp; risk analytics and AI-driven insights.
        </p>
        <ul class="list-disc pl-5 text-sm text-gray-700 space-y-2 mb-6">
          <li><strong>Consolidated multi-country view</strong> ‚Äì bring brokerage, cash, insurance and property from different jurisdictions into one dashboard, with a single base currency.</li>
          <li><strong>Compliance &amp; risk analytics</strong> ‚Äì track FATCA / FBAR / CRS thresholds and see where risk is concentrated by country, asset class and single name exposure.</li>
          <li><strong>AI-driven insights</strong> ‚Äì surface regulation changes, ‚Äúwhat-if‚Äù scenarios and questions you should ask your human advisors before you walk into the meeting room.</li>
        </ul>

        <h2 class="text-lg font-semibold text-[#111827] mt-8 mb-2">Who Taimic is for</h2>
        <p class="text-sm text-gray-700 leading-relaxed mb-6">
          Taimic is built for families who effectively live inside more than one system ‚Äì long-term in more than
          one country, with assets, pensions and policies spread across multiple jurisdictions ‚Äì and who want a
          clearer, calmer way to manage and eventually pass on that wealth.
        </p>
      </div>
    </section>

    <!-- ===== Reports placeholder ===== -->
    <section id="section-reports" class="hidden">
      <div class="max-w-[960px] mx-auto px-6 pt-14 pb-20">
        <h1 class="text-[28px] font-bold text-[#111827] mb-3">Reports</h1>
        <p class="text-sm text-gray-700">
          Analytics &amp; downloadable reports are coming soon. For now, use the dashboard and pricing plans while we keep building.
        </p>
      </div>
    </section>

  </main>

  <!-- ============= FOOTER ============= -->
  <footer class="bg-[#f4f6fb] border-t border-gray-200">
    <div class="max-w-[1440px] mx-auto px-6 pt-10 pb-4">
      <div class="flex flex-col lg:flex-row gap-10 lg:gap-20 pb-8 border-b border-gray-200">
        <!-- brand -->
        <div class="flex-1">
          <div class="flex items-center gap-2 mb-4">
            <svg class="logo-clock" viewBox="0 0 100 100">
              <circle cx="50" cy="50" r="46" class="clock-outer" />
              <circle cx="50" cy="50" r="38" class="clock-inner" />
              <circle cx="50" cy="50" r="30" class="clock-core" />
            </svg>
            <div>
              <div class="text-[20px] font-bold text-[#0066cc] leading-none">TAIMIC</div>
              <div class="text-[10px] tracking-[0.18em] text-gray-500 uppercase mt-1">Global Wealth</div>
            </div>
          </div>
          <p class="text-sm text-gray-600 mb-4">
            Cross-border wealth OS for globally mobile families.
          </p>
        </div>

        <!-- Columns -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-sm">
          <div>
            <div class="footer-col-title">SOLUTIONS</div>
            <div class="footer-link">Cross-border families</div>
            <div class="footer-link">Immigrants &amp; expats</div>
            <div class="footer-link">Family offices</div>
            <div class="footer-link">Advisors</div>
          </div>
          <div>
            <div class="footer-col-title">PLATFORM</div>
            <div class="footer-link">Global dashboard</div>
            <div class="footer-link">Compliance checks</div>
            <div class="footer-link">Scenario planning</div>
            <div class="footer-link">AI insights</div>
          </div>
          <div>
            <div class="footer-col-title">RESOURCES</div>
            <div class="footer-link">Insights</div>
            <div class="footer-link">Product updates</div>
            <div class="footer-link">Partner program</div>
            <div class="footer-link">Status</div>
          </div>
          <div>
            <div class="footer-col-title">LEGAL</div>
            <div class="footer-link">Privacy Policy</div>
            <div class="footer-link">Terms of Service</div>
            <div class="footer-link">Data Processing</div>
            <div class="footer-link">Subprocessors</div>
          </div>
        </div>
      </div>

      <div class="flex flex-col md:flex-row items-center justify-between gap-4 pt-4 pb-2 text-xs text-gray-500">
        <div>¬© 2025 Taimic Inc. All Rights Reserved.</div>
        <div class="flex items-center gap-4 text-gray-400">
          <i class="fa-brands fa-x-twitter"></i>
          <i class="fa-brands fa-discord"></i>
          <i class="fa-brands fa-instagram"></i>
          <i class="fa-brands fa-github"></i>
        </div>
      </div>
    </div>
  </footer>

  <!-- ===== Upload Modal ===== -->
  <div id="modal-overlay" class="hidden fixed inset-0 bg-[#111827]/60 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-white w-full max-w-md shadow-2xl rounded-xl overflow-hidden relative transform transition-all">
      <div class="bg-[#0066cc] p-4 flex justify-between items-center text-white">
        <h3 class="font-bold text-sm tracking-wide" data-i18n="modal.title">Add Taiwan asset (AI OCR)</h3>
        <i class="fa-solid fa-xmark cursor-pointer hover:opacity-80 text-lg" onclick="closeUploadModal()"></i>
      </div>

      <!-- step 1 -->
      <div id="modal-step-1" class="p-8 text-center">
        <div class="w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4 text-[#0066cc]">
          <i class="fa-solid fa-cloud-arrow-up text-2xl"></i>
        </div>
        <p class="text-sm text-gray-600 mb-6 leading-relaxed" data-i18n="modal.desc">
          Upload a policy front page or bank statement, Taimic will extract key data with AI.
        </p>
        <button onclick="startScan()" class="w-full border-2 border-dashed border-gray-300 py-4 rounded-xl hover:border-[#0066cc] hover:bg-blue-50 transition-all text-gray-500 hover:text-[#0066cc] font-bold text-sm">
          <span data-i18n="btn.upload">Click to upload file</span>
        </button>
      </div>

      <!-- step 2 -->
      <div id="modal-step-2" class="hidden relative h-64 bg-[#050816]">
        <div class="absolute inset-0 flex flex-col items-center justify-center z-10">
          <p class="text-white font-mono text-sm mb-2" data-i18n="modal.scanning">AI processing...</p>
          <div class="w-48 h-1 bg-gray-700 rounded overflow-hidden mb-4">
            <div id="scan-bar" class="h-full bg-[#3b82f6] w-0 transition-all duration-[3000ms] ease-linear"></div>
          </div>
          <div id="scan-log" class="text-[10px] text-green-400 font-mono h-12 flex flex-col items-center gap-1"></div>
        </div>
        <div class="scan-overlay absolute inset-0"></div>
      </div>
    </div>
  </div>

  <!-- ===== Auth Modal ===== -->
  <div id="auth-overlay" class="hidden fixed inset-0 bg-[#111827]/60 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-white w-full max-w-lg rounded-xl shadow-2xl overflow-hidden">
      <div class="bg-[#1d4ed8] px-6 py-4 flex items-center justify-between text-white">
        <h3 id="auth-title" class="font-bold text-base">Create a Taimic account</h3>
        <button onclick="closeAuthModal()" class="hover:opacity-80">
          <i class="fa-solid fa-xmark text-xl"></i>
        </button>
      </div>
      <div class="px-8 py-8 space-y-6">
        <div class="space-y-2">
          <label class="block text-sm font-medium text-gray-700">Email</label>
          <input id="auth-email" type="email" placeholder="you@gmail.com"
                 class="w-full border border-gray-300 rounded-lg px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-[#2563eb] focus:border-[#2563eb] placeholder-gray-400" />
        </div>
        <div class="space-y-2">
          <label class="block text-sm font-medium text-gray-700">Password</label>
          <input id="auth-password" type="password" placeholder="At least 6 characters"
                 class="w-full border border-gray-300 rounded-lg px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-[#2563eb] focus:border-[#2563eb]" />
        </div>
        <p id="auth-message" class="text-sm h-5 text-center"></p>
        <button id="auth-submit" class="w-full bg-[#2563eb] hover:bg-[#1d4ed8] text-white font-semibold text-sm py-3 rounded-full flex items-center justify-center gap-2 transition">
          <i class="fa-solid fa-arrow-right-to-bracket"></i>
          <span id="auth-submit-text">Sign up</span>
        </button>
      </div>
    </div>
  </div>

  <!-- ============= SCRIPT ============= -->
  <script>
    const RATE = 32.5;
    let curr = 'TWD';
    let lang = 'en';           // È†êË®≠Ëã±Êñá
    let currentSection = 'overview';
    let billing = 'monthly';
    const API_BASE = "https://cool-cell-b227.amy20060226.workers.dev";

    const assets = [
      { id: 1, name: {en:'Vanguard Total Stock (VTI)', zh:'Vanguard ÂÖ®ÁêÉËÇ°Á•® ETF (VTI)'}, type: {en:'ETF', zh:'ÊåáÊï∏ÂûãÂü∫Èáë'}, region:'US', usd: 145200 },
      { id: 2, name: {en:'Taipei Xinyi Condo',      zh:'Âè∞Âåó‰ø°Áæ©ÂçÄÂÖ¨ÂØì'},  type: {en:'Real Estate', zh:'ÊàøÂú∞Áî¢'},        region:'TW', usd: 280000 },
      { id: 3, name: {en:'Fidelity 401(k)',         zh:'ÂØåÈÅîÈÄÄ‰ºëÈáë 401(k)'}, type: {en:'Retirement', zh:'ÈÄÄ‰ºëÈáë'},       region:'US', usd: 98500 },
    ];

    const I18N = {
      en: {
        'nav.overview':'Overview',
        'nav.pricing':'Pricing',
        'nav.reports':'Reports',
        'nav.about':'About Taimic',
        'page.title':'Cross-border wealth platform',
        'page.desc':'Integrated view of Taiwan & US assets with FATCA / CRS compliance checks and AI insights.',
        'btn.add':'Add asset','btn.upload':'Click to upload file',
        'stat.us':'US net worth','stat.tw':'Taiwan net worth','stat.global':'Global net worth','stat.safe':'Estate tax risk: safe',
        'table.title':'Holdings','col.name':'Asset','col.region':'Region','col.type':'Type','col.val':'Value',
        'alert.title':'AI tax alert: potential FATCA risk detected','alert.desc':'A new high cash-value policy in Taiwan may exceed the Form 8938 reporting threshold.',
        'chart.title':'Regional allocation','chart.insight':'AI insight','chart.desc':'Taiwan assets make up 40% of your net worth. Consider hedging TWD FX risk.',
        'modal.title':'Add Taiwan asset (AI OCR)','modal.desc':'Upload a policy front page or bank statement, Taimic will extract key data with AI.','modal.scanning':'AI processing...',
        'user.login':'Login','user.register':'Sign up'
      },
      zh: {
        'nav.overview':'Ë≥áÁî¢Á∏ΩË¶Ω',
        'nav.pricing':'ÂÉπÊ†º',
        'nav.reports':'ÂàÜÊûêÂ†±Âëä',
        'nav.about':'ÈóúÊñº Taimic',
        'page.title':'Ë∑®ÂúãË≥áÁî¢Êï¥ÂêàÂπ≥Âè∞',
        'page.desc':'Êï¥ÂêàÂè∞ÁÅ£ËàáÊµ∑Â§ñË≥áÁî¢ÔºåÊê≠ÈÖç FATCA / CRS Á®ÖÂãôÊ™¢Ê∏¨Ëàá AI ÂàÜÊûêÔºåËÆìË∑®Â¢ÉË≤°Âãô‰∏ÄÁúºÁúãÊáÇ„ÄÇ',
        'btn.add':'Êñ∞Â¢ûË≥áÁî¢','btn.upload':'ÈªûÊìä‰∏äÂÇ≥Ê™îÊ°à',
        'stat.us':'ÁæéÂúãÁ∏ΩË≥áÁî¢','stat.tw':'Âè∞ÁÅ£Á∏ΩË≥áÁî¢','stat.global':'ÂÖ®ÁêÉÁ∏ΩÊ∑®ÂÄº','stat.safe':'ÈÅ∫Áî¢Á®ÖÈ¢®Èö™ÔºöÂÆâÂÖ®',
        'table.title':'Ë≥áÁî¢ÊåÅÊúâÊ∏ÖÂñÆ','col.name':'Ë≥áÁî¢ÂêçÁ®±','col.region':'Âú∞ÂçÄ','col.type':'È°ûÂà•','col.val':'ÁèæÂÄº',
        'alert.title':'AI Á®ÖÂãôË≠¶Á§∫ÔºöÂÅµÊ∏¨Âà∞ FATCA È¢®Èö™','alert.desc':'Á≥ªÁµ±ÊéÉÊèèÂà∞‰∏ÄÂºµÊñ∞Â¢ûÁöÑÂè∞ÁÅ£È´òÁèæÈáëÂÉπÂÄº‰øùÂñÆÔºåÂèØËÉΩË∂ÖÈÅé IRS Form 8938 Áî≥Â†±ÈñÄÊ™ª„ÄÇ',
        'chart.title':'ÂçÄÂüüË≥áÁî¢ÈÖçÁΩÆ','chart.insight':'AI Êô∫ËÉΩÂàÜÊûê','chart.desc':'ÊÇ®ÁöÑÂè∞ÁÅ£Ë≥áÁî¢‰ΩîÁ∏ΩÊ∑®ÂÄºÁ¥Ñ 40%ÔºåÂª∫Ë≠∞Ë©ï‰º∞Âè∞Âπ£ÂåØÁéáÈ¢®Èö™„ÄÇ',
        'modal.title':'Êñ∞Â¢ûÂè∞ÁÅ£Ë≥áÁî¢ (AI OCR)','modal.desc':'‰∏äÂÇ≥‰øùÂñÆÈ¶ñÈ†ÅÊàñÈäÄË°åÂ∞çÂ∏≥ÂñÆÔºåAI Â∞áËá™ÂãïÊèêÂèñÈóúÈçµÊï∏Êìö„ÄÇ','modal.scanning':'AI ÂàÜÊûê‰∏≠...',
        'user.login':'ÁôªÂÖ•','user.register':'Ë®ªÂÜä'
      }
    };

    function fmt(usd) {
      const val = curr === 'USD' ? usd : usd * RATE;
      return new Intl.NumberFormat(curr === 'USD' ? 'en-US' : 'zh-TW', {
        style: 'currency', currency: curr, maximumFractionDigits: 0
      }).format(val);
    }

    function render() {
      const t = I18N[lang];

      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        if (t[key]) el.textContent = t[key];
      });

      document.querySelectorAll('.val-display').forEach(el => {
        el.textContent = fmt(parseFloat(el.dataset.usd));
      });

      const tbody = document.getElementById('asset-list');
      tbody.innerHTML = '';
      assets.forEach(a => {
        const n = a.name[lang];
        const tp = a.type[lang];
        const flag = a.region === 'US' ? 'üá∫üá∏' : 'üáπüáº';
        const badge = a.region === 'US'
          ? 'bg-blue-50 text-blue-700'
          : 'bg-green-50 text-green-700';
        const hl = a.new ? 'bg-orange-50 animate-fade-in' : '';
        const riskTag = a.risk
          ? `<span class="ml-2 inline-flex items-center px-2 py-0.5 bg-orange-100 text-orange-700 text-[10px] font-bold rounded-full border border-orange-200">FATCA</span>`
          : '';
        tbody.innerHTML += `
          <tr class="group transition-colors hover:bg-gray-50 border-b border-gray-100 last:border-0 ${hl}">
            <td class="py-4 pl-2">
              <div class="font-semibold text-[#111827] group-hover:text-[#0066cc] transition-colors">${n}</div>
            </td>
            <td class="py-4">
              <span class="px-2 py-1 rounded-full text-xs font-bold ${badge}">${flag} ${a.region}</span>${riskTag}
            </td>
            <td class="py-4 text-sm text-gray-600">${tp}</td>
            <td class="py-4 pr-2 text-right font-mono font-bold text-[#111827] tracking-tight">${fmt(a.usd)}</td>
          </tr>`;
      });

      const btnUsd = document.getElementById('btn-usd');
      const btnTwd = document.getElementById('btn-twd');
      if (curr === 'USD') {
        btnUsd.className = 'px-4 py-2 bg-white text-[#0066cc] font-semibold';
        btnTwd.className = 'px-4 py-2 text-gray-500 hover:bg-gray-100';
      } else {
        btnTwd.className = 'px-4 py-2 bg-white text-[#0066cc] font-semibold';
        btnUsd.className = 'px-4 py-2 text-gray-500 hover:bg-gray-100';
      }

      document.getElementById('opt-zh').classList.toggle('active', lang === 'zh');
      document.getElementById('opt-en').classList.toggle('active', lang === 'en');

      updatePricing();
    }

    function setCurrency(c) {
      curr = c;
      render();
    }

    function changeLang(l) {
      lang = l;
      render();
      langMenu.classList.add('hidden');
    }

    function switchSection(section) {
      const ids = ['overview','pricing','about','reports'];
      ids.forEach(id => {
        const el = document.getElementById(`section-${id}`);
        if (el) el.classList.toggle('hidden', id !== section);
      });
      document.querySelectorAll('nav .nav-link').forEach(link => {
        link.classList.toggle('active', link.dataset.section === section);
      });
      currentSection = section;
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // pricing toggle
    function updatePricing() {
      document.querySelectorAll('[data-plan-price]').forEach(el => {
        const m = el.dataset.monthly;
        const y = el.dataset.yearly;
        if (!m || !y) return;
        el.textContent = billing === 'monthly' ? m : y;
      });
      const knob = document.getElementById('billing-toggle-knob');
      if (knob) {
        knob.classList.toggle('translate-x-0', billing === 'monthly');
        knob.classList.toggle('translate-x-5', billing === 'yearly');
      }
      const mLabel = document.getElementById('billing-label-monthly');
      const yLabel = document.getElementById('billing-label-yearly');
      if (mLabel && yLabel) {
        mLabel.classList.toggle('text-gray-900', billing === 'monthly');
        mLabel.classList.toggle('text-gray-500', billing !== 'monthly');
        yLabel.classList.toggle('text-gray-900', billing === 'yearly');
        yLabel.classList.toggle('text-gray-500', billing !== 'yearly');
      }
    }
    function toggleBilling() {
      billing = billing === 'monthly' ? 'yearly' : 'monthly';
      updatePricing();
    }

    function openUploadModal() {
      modalOverlay.classList.remove('hidden');
      document.getElementById('modal-step-1').classList.remove('hidden');
      document.getElementById('modal-step-2').classList.add('hidden');
    }
    function closeUploadModal() {
      modalOverlay.classList.add('hidden');
    }

    function startScan() {
      document.getElementById('modal-step-1').classList.add('hidden');
      document.getElementById('modal-step-2').classList.remove('hidden');
      const bar = document.getElementById('scan-bar');
      bar.style.width = '0';
      setTimeout(() => bar.style.width = '100%', 100);

      const log = document.getElementById('scan-log');
      log.innerHTML = '';
      setTimeout(() => log.innerHTML = '&gt; Detecting Language: zh-TW', 800);
      setTimeout(() => log.innerHTML += '<br>&gt; Parsing: "ÂØåÈÇ¶‰∫∫Â£Ω (Fubon Life)"', 1600);
      setTimeout(() => log.innerHTML += '<br>&gt; Match IRS Code: 8938', 2400);

      setTimeout(() => {
        assets.unshift({
          id: 99,
          name: {en:'Fubon Life (Whole Life)', zh:'ÂØåÈÇ¶‰∫∫Â£Ω (ÁµÇË∫´Â£ΩÈö™)'},
          type: {en:'Insurance', zh:'ÂÑ≤ËìÑÈö™'},
          region: 'TW',
          usd: 52000,
          new: true,
          risk: true
        });

        const tEl = document.getElementById('val-tw');
        tEl.dataset.usd = parseFloat(tEl.dataset.usd) + 52000;
        const gEl = document.getElementById('val-global');
        gEl.dataset.usd = parseFloat(gEl.dataset.usd) + 52000;
        geoChart.data.datasets[0].data[1] += 52000;
        geoChart.update();

        document.getElementById('ai-alert').classList.remove('hidden');
        render();
        closeUploadModal();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }, 3000);
    }

    // Auth Modal
    let authMode = 'register';

    function openAuthModal(mode) {
      authMode = mode;
      const title = document.getElementById('auth-title');
      const btnText = document.getElementById('auth-submit-text');
      const msg = document.getElementById('auth-message');
      msg.textContent = '';
      msg.className = 'text-sm h-5 text-center';

      if (mode === 'login') {
        title.textContent = 'Login to Taimic';
        btnText.textContent = 'Login';
      } else {
        title.textContent = 'Create a Taimic account';
        btnText.textContent = 'Sign up';
      }

      document.getElementById('auth-email').value = '';
      document.getElementById('auth-password').value = '';

      authOverlay.classList.remove('hidden');
    }

    function closeAuthModal() {
      authOverlay.classList.add('hidden');
    }

    async function callAuthAPI(path, payload) {
      const res = await fetch(`${API_BASE}${path}`, {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(payload)
      });
      return await res.json();
    }

    async function handleAuthSubmit() {
      const email = document.getElementById('auth-email').value.trim();
      const password = document.getElementById('auth-password').value;
      const msg = document.getElementById('auth-message');
      msg.textContent = '';
      msg.className = 'text-sm h-5 text-center';

      if (!email || !password) {
        msg.textContent = lang === 'zh' ? 'Ë´ãËº∏ÂÖ• email ËàáÂØÜÁ¢º„ÄÇ' : 'Please enter email and password.';
        msg.classList.add('text-red-500');
        return;
      }

      try {
        const path = authMode === 'register' ? '/api/register' : '/api/login';
        const data = await callAuthAPI(path, { email, password });

        if (data.ok) {
          msg.textContent = authMode === 'register'
            ? (lang === 'zh' ? 'Ë®ªÂÜäÊàêÂäüÔºåË´ãÈáçÊñ∞ÁôªÂÖ•„ÄÇ' : 'Sign up successful, please log in.')
            : (lang === 'zh' ? `ÁôªÂÖ•ÊàêÂäüÔºåÊ≠°Ëøé ${data.user?.email || email}` : `Welcome back, ${data.user?.email || email}`);
          msg.classList.add('text-green-600');

          if (authMode === 'login') {
            localStorage.setItem('taimic-user-email', data.user?.email || email);
            setTimeout(closeAuthModal, 1200);
          }
        } else {
          msg.textContent = data.message || (lang === 'zh' ? 'Êìç‰ΩúÂ§±ÊïóÔºåË´ãÁ®çÂæåÂÜçË©¶„ÄÇ' : 'Something went wrong, please try again.');
          msg.classList.add('text-red-500');
        }
      } catch (e) {
        console.error(e);
        msg.textContent = lang === 'zh' ? '‰º∫ÊúçÂô®ÈåØË™§ÔºåË´ãÁ®çÂæåÂÜçË©¶„ÄÇ' : 'Server error, please try again.';
        msg.classList.add('text-red-500');
      }
    }

    // ===== Global refs & init =====
    let geoChart;
    let langMenu, userMenu, modalOverlay, authOverlay;

    window.onload = function () {
      const ctx = document.getElementById('geoChart').getContext('2d');
      geoChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['US', 'TW'],
          datasets: [{
            data: [482500, 315200],
            backgroundColor: ['#2563eb', '#111827'],
            borderWidth: 0
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          cutout: '72%',
          plugins: {
            legend: { display: false }
          }
        }
      });

      langMenu = document.getElementById('lang-menu');
      userMenu = document.getElementById('user-menu');
      modalOverlay = document.getElementById('modal-overlay');
      authOverlay = document.getElementById('auth-overlay');

      render();

      const langToggle = document.getElementById('lang-toggle');
      const userToggle = document.getElementById('user-toggle');

      function closeAllMenus() {
        langMenu.classList.add('hidden');
        userMenu.classList.add('hidden');
      }

      langToggle.addEventListener('click', e => {
        e.stopPropagation();
        const open = langMenu.classList.contains('hidden');
        closeAllMenus();
        if (open) langMenu.classList.remove('hidden');
      });
      langMenu.addEventListener('click', e => e.stopPropagation());

      userToggle.addEventListener('click', e => {
        e.stopPropagation();
        const open = userMenu.classList.contains('hidden');
        closeAllMenus();
        if (open) userMenu.classList.remove('hidden');
      });
      userMenu.addEventListener('click', e => e.stopPropagation());

      document.addEventListener('click', closeAllMenus);

      document.getElementById('auth-submit').addEventListener('click', handleAuthSubmit);

      // nav section switching
      document.querySelectorAll('nav .nav-link').forEach(link => {
        link.addEventListener('click', e => {
          e.preventDefault();
          const section = link.dataset.section;
          if (section) switchSection(section);
        });
      });

      // ‰∏ÄÈñãÂßãÈ°ØÁ§∫ overview
      switchSection('overview');
    };
  </script>
</body>
</html>
