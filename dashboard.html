<!DOCTYPE html>
<html lang="en">
<head>
  <title>Taimic ‚Äì Reports Dashboard</title>

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind + Chart.js -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Icons & fonts -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet" />
  <!-- Serif heading font for magazine / family governance look -->
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;600;700&display=swap" rel="stylesheet" />

  <!-- Ë®≠Ë®àÁ≥ªÁµ± -->
  <link rel="stylesheet" href="main.css" />

  <!-- Ê∂≤ÊÖãÁéªÁíÉÊ®£ÂºèÔºàÂè™Ë≤†Ë≤¨ .liquid Âç°Áâá + sidebarÔºâ -->
  <style>
    .liquid {
      backdrop-filter: blur(4px) url(#liquid_glass_filter);
      -webkit-backdrop-filter: blur(4px) url(#liquid_glass_filter);
      background: rgba(255, 255, 255, 0.10);
      box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.45),
        inset 0 -1px 0 rgba(255, 255, 255, 0.18),
        6px 6px 16px rgba(15, 23, 42, 0.18),
        0 12px 30px rgba(37, 99, 235, 0.20);
      border-radius: 24px;
      border: 1px solid rgba(255, 255, 255, 0.45);
    }

    /* SidebarÔºö‰∏äÂçäÈÉ®ÊòØÊñáÂ≠óÂûãÈÄ£Áµê */
    .side-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      width: 100%;
      padding: 0.25rem 0.1rem;
      font-size: 0.82rem;
      color: #64748b;
      background: transparent;
      border: none;
      box-shadow: none;
      backdrop-filter: none;
      -webkit-backdrop-filter: none;
      cursor: pointer;
      transition: color 0.15s ease, transform 0.12s ease;
    }

    .side-item:hover {
      color: #0f172a;
      transform: translateX(2px);
    }

    .side-item-active {
      font-weight: 600;
      color: #0f172a;
      position: relative;
    }

    /* ÁëûÂ£´È¢®ÔºöÂ∑¶ÂÅ¥ 3px ÂìÅÁâåËâ≤Áõ¥Á∑öÁï∂ active Ê®ôË®ò */
    .side-item-active::before {
      content: '';
      position: absolute;
      left: -0.75rem;
      top: 0.2rem;
      bottom: 0.2rem;
      width: 3px;
      border-radius: 9999px;
      background-color: #002fa7; /* International Klein Blue */
    }

    /* Â≠êÈÅ∏ÂñÆÔºàÁ∏Æ‰∏ÄÊ†º„ÄÅÂ≠óÂÜçÂ∞è‰∏ÄÈªûÔºâ */
    .side-subitem {
      padding-left: 1.25rem;
      font-size: 0.78rem;
    }

    .side-bottom-link {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.25rem 0.1rem;
      font-size: 0.82rem;
      color: #64748b;
      background: transparent;
      border: none;
      cursor: pointer;
      transition: color 0.15s ease, transform 0.12s ease;
    }

    .side-bottom-link i {
      font-size: 0.8rem;
    }

    .side-bottom-link:hover {
      color: #0f172a;
      transform: translateX(2px);
    }

    /* Header Ë£°ÁöÑ‰∏âÊ¢ùÁ∑öÔºöÊâãÊ©üÁúãÂà∞ÔºåÊ°åÊ©üÈö±Ëóè */
    #sidebar-toggle {
      padding: 0;
      border: none;
      background: transparent;
      box-shadow: none;
      cursor: pointer;
    }

    #sidebar-toggle .bar {
      display: block;
      width: 18px;
      height: 1.5px;
      border-radius: 9999px;
      background-color: #64748b;
    }

    #sidebar-toggle:hover .bar {
      background-color: #0f172a;
    }

    /* md ‰ª•‰∏äÊâçÊúÉÁúüÊ≠£Êää sidebar Êî∂ÊéâÔºàÁõÆÂâçÊ≤íÁî®Âà∞Ôºå‰ΩÜ‰øùÁïôÔºâ */
    @media (min-width: 768px) {
      #sidebar.sidebar-collapsed {
        display: none !important;
      }
    }

    #ai-notes-list {
      max-height: 260px;
      overflow-y: auto;
    }

    /* ============= Family members page Â∞àÁî®Ê®£Âºè ============= */

    .family-page {
      background-color: #F9FAFB;
    }

    .family-heading {
      font-family: 'Merriweather', ui-serif, Georgia, 'Times New Roman', serif;
      letter-spacing: 0.02em;
    }

    .family-card {
      background-color: #ffffff;
      border-radius: 8px;
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.05);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .family-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 24px 60px rgba(15, 23, 42, 0.08);
    }

    .family-avatar {
      border-radius: 9999px;
      background: #002147;
      color: #f9fafb;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .family-role-tag {
      font-size: 0.62rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #6b7280;
    }

    .family-status-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.2rem 0.7rem;
      border-radius: 9999px;
      font-size: 0.65rem;
      font-weight: 600;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      border-width: 1px;
      border-style: solid;
    }

    .family-status-dot {
      width: 0.5rem;
      height: 0.5rem;
      border-radius: 9999px;
    }

    .family-status-full {
      background-color: #ecfdf3;
      border-color: rgba(34, 197, 94, 0.3);
      color: #15803d;
    }

    .family-status-full .family-status-dot {
      background-color: #22c55e;
    }

    .family-status-shared {
      background-color: #eff6ff;
      border-color: rgba(37, 99, 235, 0.3);
      color: #1d4ed8;
    }

    .family-status-shared .family-status-dot {
      background-color: #2563eb;
    }

    .family-status-limited {
      background-color: #f9fafb;
      border-color: #e5e7eb;
      color: #4b5563;
    }

    .family-status-limited .family-status-dot {
      background-color: #9ca3af;
    }

    .family-meta-label {
      font-size: 0.65rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #9ca3af;
    }

    .family-meta-value {
      font-size: 0.75rem;
      color: #4b5563;
    }

    .family-divider {
      height: 1px;
      background: linear-gradient(to right, rgba(148, 163, 184, 0.28), rgba(148, 163, 184, 0.06));
    }
  </style>
</head>
<body class="min-h-screen bg-[#F5F7FA] text-[#002147]">

  <!-- ÂÖ®Â±Ä SVG ÊøæÈè°ÔºöÊ∂≤ÊÖãÁéªÁíÉ -->
  <svg width="0" height="0" style="position:absolute;left:-9999px;top:-9999px;">
    <defs>
      <filter id="liquid_glass_filter">
        <feTurbulence type="fractalNoise" baseFrequency="0.003" numOctaves="2" result="noise" />
        <feGaussianBlur in="noise" stdDeviation="1.2" result="map" />
        <feDisplacementMap in="SourceGraphic" in2="map" scale="110" xChannelSelector="R" yChannelSelector="G" />
      </filter>
    </defs>
  </svg>

  <div id="dashboard-shell" class="min-h-screen flex flex-col bg-[#F5F7FA]">

     <!-- Header -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-40 shadow-sm h-[72px]">
      <div class="max-w-[1440px] mx-auto px-6 h-full flex justify-between items-center relative">
        <!-- Â∑¶ÂÅ¥ÔºöÂè™Êîæ TAIMIC logo -->
        <div class="flex items-center gap-3">
          <div class="flex items-center gap-3 cursor-pointer" onclick="window.location.href='index.html'">
            <svg class="logo-clock" viewBox="0 0 100 100">
              <defs>
                <linearGradient id="clockGradient" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0%" stop-color="#bfdbfe" />
                  <stop offset="100%" stop-color="#60a5fa" />
                </linearGradient>
              </defs>
              <circle cx="50" cy="50" r="46" class="clock-outer" />
              <circle cx="50" cy="50" r="38" class="clock-inner" />
              <circle cx="50" cy="50" r="30" class="clock-core" />
              <line x1="50" y1="12" x2="50" y2="18" class="clock-tick-line" />
              <line x1="88" y1="50" x2="82" y2="50" class="clock-tick-line" />
              <line x1="50" y1="82" x2="50" y2="88" class="clock-tick-line" />
              <line x1="18" y1="50" x2="12" y2="50" class="clock-tick-line" />
              <line x1="50" y1="50" x2="50" y2="30" class="hand hand-hour" />
              <line x1="50" y1="50" x2="66" y2="34" class="hand hand-minute" />
              <circle cx="50" cy="50" r="3.2" class="center-dot" />
            </svg>
            <div class="flex flex-col justify-center">
              <span class="text-[22px] font-[700] tracking-tight text-[#0066cc] leading-none">TAIMIC</span>
              <span class="text-[10px] font-[600] tracking-[0.2em] text-gray-500 mt-1 uppercase">Global Wealth</span>
            </div>
          </div>
        </div>

        <!-- Âè≥ÂÅ¥ÔºöÊâãÊ©üÊº¢Â†° + FX capsule + Export + Avatar -->
        <div class="flex items-center gap-3">
          <!-- ÊâãÊ©üÁâàÊº¢Â†°ÔºöÂú® A ÁöÑÂ∑¶ÈÇäÔºåÈªûÂÆÉÊâìÈñã mobile menu -->
          <button
            id="sidebar-toggle"
            class="flex md:hidden w-9 h-9 rounded-full border border-slate-200 bg-white items-center justify-center"
            type="button"
          >
            <span class="sr-only">Toggle navigation</span>
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
          </button>

          <!-- FX capsuleÔºöÊ°åÊ©üÊâçÈ°ØÁ§∫ -->
          <div class="hidden md:inline-flex items-center gap-3 rounded-full border border-[#E5E7EB] bg-[#F3F4F6] px-3 py-1.5">
            <div class="text-xs">
              <span class="mr-1">üá∫üá∏/üáπüáº</span>
              <span class="font-mono tabular-nums font-semibold text-[#002147]">
                32.50
              </span>
            </div>
            <div class="flex items-center gap-1 text-[11px]">
              <span class="text-[#9CA3AF]">FX Today</span>
              <span class="font-mono tabular-nums text-[#CC5500]">
                ‚àí0.21%
              </span>
            </div>
          </div>

          <!-- ExportÔºöÊ°åÊ©üÊâçÈ°ØÁ§∫ -->
          <button
            type="button"
            class="hidden md:inline-flex items-center gap-2 rounded-full bg-[#002147] text-white text-xs font-semibold px-4 py-2 shadow-sm hover:bg-[#001a70] transition"
          >
            <i class="fa-solid fa-file-export text-[11px]"></i>
            <span>Export full report (PDF)</span>
          </button>

          <!-- Avatar -->
          <div class="relative">
            <button
              id="dash-user-toggle"
              type="button"
              class="w-9 h-9 rounded-full bg-[#002147] text-white flex items-center justify-center text-sm font-semibold hover:bg-[#001a70] transition-colors"
            >
              <span id="dash-user-initial">T</span>
            </button>
            <div
              id="dash-user-menu"
              class="hidden absolute right-0 mt-2 w-52 bg-white rounded-xl shadow-lg border border-slate-100 text-sm overflow-hidden z-50"
            >
              <div class="px-4 py-3 border-b border-slate-100">
                <p class="text-[10px] text-slate-500 uppercase tracking-[0.16em]">
                  Signed in as
                </p>
                <p id="dash-user-email" class="text-xs font-semibold text-slate-800 truncate">
                  you@gmail.com
                </p>
              </div>
              <button
                type="button"
                onclick="handleLogout && handleLogout()"
                class="w-full text-left px-4 py-2.5 flex items-center gap-2 text-slate-700 hover:bg-slate-50"
              >
                <i class="fa-solid fa-arrow-right-from-bracket text-xs"></i>
                <span>Logout</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- ÊâãÊ©üÁâàÂÅ¥ÈÇäÈÅ∏ÂñÆ overlay -->
    <div
      id="mobile-menu"
      class="md:hidden fixed inset-0 z-50 bg-black/30 backdrop-blur-sm hidden"
      onclick="if (event.target === this) this.classList.add('hidden');"
    >
      <div class="absolute left-0 top-0 bottom-0 w-64 bg-white border-r border-slate-200 px-5 py-6 overflow-y-auto">
        <p class="text-[11px] tracking-[0.24em] text-slate-400 uppercase mb-4">
          Navigation
        </p>

        <button class="side-item" type="button" onclick="mobileNavigate('overview')">
          Overview
        </button>

        <button class="side-item mt-2" type="button" onclick="mobileNavigate('family')">
          Family members
        </button>

        <p class="mt-5 text-[10px] tracking-[0.2em] text-slate-400 uppercase">
          US assets
        </p>
        <button class="side-item side-subitem" type="button" onclick="mobileNavigate('us-accounts')">
          Accounts
        </button>
        <button class="side-item side-subitem" type="button" onclick="mobileNavigate('us-stocks')">
          Stocks
        </button>
        <button class="side-item side-subitem" type="button" onclick="mobileNavigate('us-liabilities')">
          Liabilities
        </button>
        <button class="side-item side-subitem" type="button" onclick="mobileNavigate('us-house')">
          House
        </button>
        <button class="side-item side-subitem" type="button" onclick="mobileNavigate('us-crypto')">
          Crypto
        </button>
        <button class="side-item side-subitem" type="button" onclick="mobileNavigate('us-insurance')">
          Insurance
        </button>

        <p class="mt-5 text-[10px] tracking-[0.2em] text-slate-400 uppercase">
          Taiwan assets
        </p>
        <button class="side-item side-subitem" type="button" onclick="mobileNavigate('tw-accounts')">
          Accounts
        </button>
        <button class="side-item side-subitem" type="button" onclick="mobileNavigate('tw-stocks')">
          Stocks
        </button>
        <button class="side-item side-subitem" type="button" onclick="mobileNavigate('tw-liabilities')">
          Liabilities
        </button>
        <button class="side-item side-subitem" type="button" onclick="mobileNavigate('tw-house')">
          House
        </button>
        <button class="side-item side-subitem" type="button" onclick="mobileNavigate('tw-crypto')">
          Crypto
        </button>
        <button class="side-item side-subitem" type="button" onclick="mobileNavigate('tw-insurance')">
          Insurance
        </button>

        <p class="mt-5 text-[10px] tracking-[0.2em] text-slate-400 uppercase">
          Other
        </p>
        <button class="side-item" type="button" onclick="mobileNavigate('help')">
          Help center
        </button>
        <button class="side-item" type="button" onclick="mobileNavigate('settings')">
          Settings
        </button>
      </div>
    </div>

    <!-- =================================================== -->
    <!-- Main layoutÔºöÂ∑¶ÂÅ¥Â∞éË¶Ω + Âè≥ÂÅ¥ÂÖßÂÆπ                     -->
    <!-- =================================================== -->
    <div class="flex flex-1 relative">

      <!-- Â∑¶ÂÅ¥ Sidebar (Ê°åÊ©ü) -->
      <aside
        id="sidebar"
        class="hidden md:flex flex-col w-64 px-5 py-6 border-r border-slate-200/70 bg-white/60 backdrop-blur-xl"
      >
        <nav class="space-y-1">
          <!-- Overview -->
          <button
            class="side-item side-item-active"
            type="button"
            data-page="overview"
            onclick="switchDashboardPage('overview')"
          >
            <span>Overview</span>
          </button>

          <!-- Family members -->
          <button
            class="side-item"
            type="button"
            data-page="family"
            onclick="switchDashboardPage('family')"
          >
            <span>Family members</span>
          </button>

          <!-- US assets -->
          <button
            class="side-item"
            type="button"
            onclick="toggleSideSection('us')"
          >
            <span class="flex items-center gap-1">
              <span id="side-us-chevron" class="inline-block text-xs transition-transform">&gt;</span>
              <span>US assets</span>
            </span>
          </button>
          <div id="side-us-children" class="ml-4 mt-1 space-y-1 hidden">
            <button
              class="side-item side-subitem"
              type="button"
              data-page="us-accounts"
              onclick="switchDashboardPage('us-accounts')"
            >
              <span>Accounts</span>
            </button>
            <button
              class="side-item side-subitem"
              type="button"
              data-page="us-stocks"
              onclick="switchDashboardPage('us-stocks')"
            >
              <span>Stocks</span>
            </button>
            <button
              class="side-item side-subitem"
              type="button"
              data-page="us-liabilities"
              onclick="switchDashboardPage('us-liabilities')"
            >
              <span>Liabilities</span>
            </button>
            <button
              class="side-item side-subitem"
              type="button"
              data-page="us-house"
              onclick="switchDashboardPage('us-house')"
            >
              <span>House</span>
            </button>
            <button
              class="side-item side-subitem"
              type="button"
              data-page="us-crypto"
              onclick="switchDashboardPage('us-crypto')"
            >
              <span>Crypto</span>
            </button>
            <button
              class="side-item side-subitem"
              type="button"
              data-page="us-insurance"
              onclick="switchDashboardPage('us-insurance')"
            >
              <span>Insurance</span>
            </button>
          </div>

          <!-- Taiwan assets -->
          <button
            class="side-item"
            type="button"
            onclick="toggleSideSection('tw')"
          >
            <span class="flex items-center gap-1">
              <span id="side-tw-chevron" class="inline-block text-xs transition-transform">&gt;</span>
              <span>Taiwan assets</span>
            </span>
          </button>
          <div id="side-tw-children" class="ml-4 mt-1 space-y-1 hidden">
            <button
              class="side-item side-subitem"
              type="button"
              data-page="tw-accounts"
              onclick="switchDashboardPage('tw-accounts')"
            >
              <span>Accounts</span>
            </button>
            <button
              class="side-item side-subitem"
              type="button"
              data-page="tw-stocks"
              onclick="switchDashboardPage('tw-stocks')"
            >
              <span>Stocks</span>
            </button>
            <button
              class="side-item side-subitem"
              type="button"
              data-page="tw-liabilities"
              onclick="switchDashboardPage('tw-liabilities')"
            >
              <span>Liabilities</span>
            </button>
            <button
              class="side-item side-subitem"
              type="button"
              data-page="tw-house"
              onclick="switchDashboardPage('tw-house')"
            >
              <span>House</span>
            </button>
            <button
              class="side-item side-subitem"
              type="button"
              data-page="tw-crypto"
              onclick="switchDashboardPage('tw-crypto')"
            >
              <span>Crypto</span>
            </button>
            <button
              class="side-item side-subitem"
              type="button"
              data-page="tw-insurance"
              onclick="switchDashboardPage('tw-insurance')"
            >
              <span>Insurance</span>
            </button>
          </div>

          <!-- Â∫ïÈÉ®ÔºöHelp / Settings -->
          <div class="pt-4 mt-2 border-t border-slate-200/70 space-y-1">
            <button
              class="side-bottom-link"
              type="button"
              data-page="help"
              onclick="switchDashboardPage('help')"
            >
              <i class="fa-regular fa-circle-question"></i>
              <span>Help center</span>
            </button>
            <button
              class="side-bottom-link"
              type="button"
              data-page="settings"
              onclick="switchDashboardPage('settings')"
            >
              <i class="fa-solid fa-gear"></i>
              <span>Settings</span>
            </button>
          </div>
        </nav>
      </aside>

      <!-- Âè≥ÂÅ¥ÂÖßÂÆπÔºöÊâÄÊúâ pageÔºàOverview, US/TW Accounts, US/TW Stocks, Family, Help, Settings...Ôºâ -->
      <!-- Âõ†ÁÇ∫ÂØ¶Âú®Â§™Èï∑ÔºåÈÄôË£°Â∞±ÊòØÂâç‰∏ÄÁâà‰Ω†Â∑≤Á∂ìÊãøÂà∞ÁöÑÈÇ£Êï¥‰ªΩ dashboard HTMLÔºàÊàëÊ≤íÊúâÂãï‰ªª‰ΩïË®≠Ë®àÊàñÊñáÊ°àÔºåÂè™Âä†‰∫Ü mobile menuÔºâ -->
      <!-- ÊàëÂú®ÈÄôË£°ÁÖßÂéüÊ®£ÂÆåÊï¥Ë≤º‰∏äÔºö -->

      <main class="flex-1">
        <!-- Overview page -->
        <div id="page-overview" class="dash-page max-w-[1200px] mx-auto px-6 py-8 lg:py-10 space-y-6">
          <!-- Top intro -->
          <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
            <div class="space-y-1">
              <p class="text-[11px] font-semibold tracking-[0.24em] text-[#9CA3AF] uppercase">
                Cross-border family OS
              </p>
              <h1 class="text-2xl md:text-[26px] font-semibold tracking-tight text-[#002147]">
                Global family balance sheet
              </h1>
              <p class="text-xs md:text-sm text-[#4B5563] max-w-xl">
                Consolidated view for US / Taiwan assets, FX impact and compliance risk in one calm dashboard.
              </p>
            </div>

            <div class="flex flex-col items-start md:items-end gap-3 text-xs">
              <div class="inline-flex items-center gap-2 rounded-full border border-[#E5E7EB] bg-white px-3 py-1.5">
                <span class="text-[#6B7280]">Report year</span>
                <div class="inline-flex rounded-full bg-[#F3F4F6] p-1 gap-1">
                  <button class="px-3 py-1 text-[11px] font-semibold rounded-full bg-white text-[#002147] shadow-sm">
                    2025
                  </button>
                  <button class="px-3 py-1 text-[11px] font-semibold rounded-full text-[#6B7280] hover:bg-[#E5E7EB]">
                    2024
                  </button>
                  <button class="px-3 py-1 text-[11px] font-semibold rounded-full text-[#6B7280] hover:bg-[#E5E7EB]">
                    2023
                  </button>
                </div>
              </div>
              <div class="flex flex-wrap gap-2 text-[11px] text-[#6B7280]">
                <span class="inline-flex items-center gap-1">
                  <i class="fa-solid fa-shield-check text-[#005F48]"></i>
                  Bank-level encryption
                </span>
                <span class="inline-flex items-center gap-1">
                  <i class="fa-solid fa-robot text-[#2563EB]"></i>
                  AI-assisted analysis
                </span>
              </div>
            </div>
          </div>

          <!-- Hero: Global Net Worth -->
          <section class="bg-white border border-[#E5E7EB] rounded-xl shadow-[0_4px_20px_rgba(0,0,0,0.03)] p-6 flex flex-col md:flex-row md:items-center md:justify-between gap-6">
            <div class="space-y-4">
              <p class="text-[11px] tracking-[0.24em] uppercase text-[#9CA3AF]">
                Global Overview
              </p>

              <div class="space-y-1">
                <p class="text-3xl md:text-4xl font-semibold tracking-tight font-serif">
                  $3,450,000
                </p>
                <div class="flex flex-wrap items-baseline gap-2">
                  <span class="text-sm text-[#4B5563]">
                    Global Net Worth
                  </span>
                  <span class="text-xs text-[#6B7280] font-mono tabular-nums">
                    as of 2025-12-11
                  </span>
                </div>
              </div>

              <div class="flex flex-wrap items-center gap-3 text-xs">
                <span class="inline-flex items-center gap-1 rounded-full border border-[#E5E7EB] bg-[#F3F4F6] px-2.5 py-1">
                  <span class="w-1.5 h-1.5 rounded-full bg-[#005F48]"></span>
                  <span class="font-mono tabular-nums text-[#005F48]">
                    +2.4%
                  </span>
                  <span class="text-[#6B7280]">YTD performance</span>
                </span>

                <span class="inline-flex items-center gap-1 rounded-full border border-[#E5E7EB] bg-[#FDF6EC] px-2.5 py-1">
                  <span class="text-[11px] font-semibold tracking-[0.16em] uppercase text-[#C5A059]">
                    FX impact
                  </span>
                  <span class="font-mono tabular-nums text-[#C5A059]">
                    ‚àí$85,000
                  </span>
                </span>
              </div>
            </div>

            <!-- Sparkline -->
            <div class="md:w-64 w-full">
              <div class="flex items-center justify-between mb-2 text-xs text-[#6B7280]">
                <span>Net worth trend (12m)</span>
                <span class="font-mono tabular-nums text-[#005F48]">
                  +$210k
                </span>
              </div>
              <div class="h-20 bg-[#F5F7FA] rounded-lg border border-[#E5E7EB] flex items-center justify-center px-3">
                <svg
                  viewBox="0 0 160 60"
                  class="w-full h-full"
                  aria-hidden="true"
                >
                  <polyline
                    fill="none"
                    stroke="#BFDBD1"
                    stroke-width="1"
                    points="0,40 160,40"
                  />
                  <polyline
                    fill="none"
                    stroke="#005F48"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    points="0,45 20,43 40,38 60,35 80,30 100,33 120,26 140,22 160,18"
                  />
                  <circle cx="160" cy="18" r="3" fill="#005F48" />
                </svg>
              </div>
            </div>
          </section>

          <!-- Action row: Compliance & AI alerts -->
          <section class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Compliance Status -->
            <div class="bg-white border border-[#E5E7EB] rounded-xl shadow-[0_4px_20px_rgba(0,0,0,0.03)] p-5 flex flex-col gap-3">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-[11px] tracking-[0.24em] uppercase text-[#9CA3AF]">
                    Compliance status
                  </p>
                  <p class="text-sm font-semibold text-[#002147]">
                    2025 US / Taiwan filing checklist
                  </p>
                </div>
                <span class="text-[11px] rounded-full border border-[#E5E7EB] bg-[#F3F4F6] px-2 py-1 font-mono tabular-nums text-[#4B5563]">
                  3 of 12 complete
                </span>
              </div>

              <div class="space-y-2 text-xs">
                <div class="flex items-center justify-between">
                  <span class="text-[#4B5563]">FBAR filing progress</span>
                  <span class="font-mono tabular-nums text-[#4B5563]">
                    20%
                  </span>
                </div>
                <div class="h-2 rounded-full bg-[#E5E7EB] overflow-hidden">
                  <div class="h-full w-1/5 bg-[#005F48]"></div>
                </div>
                <p class="text-[11px] text-[#6B7280]">
                  Next step: confirm all non-US accounts above the USD 10,000
                  aggregate threshold are included.
                </p>
              </div>
            </div>

            <!-- AI Alerts -->
            <div class="bg-white border border-[#E5E7EB] rounded-xl shadow-[0_4px_20px_rgba(0,0,0,0.03)] p-5 flex flex-col gap-3">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-[11px] tracking-[0.24em] uppercase text-[#9CA3AF]">
                    AI alerts
                  </p>
                  <p class="text-sm font-semibold text-[#002147]">
                    Items that may require attention
                  </p>
                </div>
                <span class="text-[11px] rounded-full border border-[#E5E7EB] bg-[#F3F4F6] px-2 py-1 text-[#4B5563]">
                  2 open
                </span>
              </div>

              <ul class="space-y-2 text-xs text-[#4B5563]">
                <li class="flex items-start gap-2">
                  <span class="mt-0.5 w-1.5 h-1.5 rounded-full bg-[#C5A059]"></span>
                  <div>
                    <p class="font-medium">
                      Fubon policy approaching surrender charge cliff
                    </p>
                    <p class="text-[11px] text-[#6B7280]">
                      Estimated 18 months remaining. Consider aligning any
                      changes with US tax year to avoid PFIC complications.
                    </p>
                  </div>
                </li>
                <li class="flex items-start gap-2">
                  <span class="mt-0.5 w-1.5 h-1.5 rounded-full bg-[#CC5500]"></span>
                  <div>
                    <p class="font-medium">
                      US brokerage cash balance above target
                    </p>
                    <p class="text-[11px] text-[#6B7280]">
                      USD cash is 26% of portfolio vs. 10‚Äì15% target range.
                      FX opportunity if moved to TWD-dominated goals.
                    </p>
                  </div>
                </li>
              </ul>
            </div>
          </section>

          <!-- Split Asset View: US vs Taiwan -->
          <section class="grid grid-cols-1 lg:grid-cols-2 gap-4">
            <!-- US assets -->
            <div class="bg-white border border-[#E5E7EB] rounded-xl shadow-[0_4px_20px_rgba(0,0,0,0.03)] overflow-hidden">
              <div class="px-5 py-4 border-b border-[#E5E7EB] bg-[#E5F0FF]/60 flex items-center justify-between">
                <div>
                  <p class="text-[11px] tracking-[0.24em] uppercase text-[#4B5563]">
                    US assets
                  </p>
                  <p class="text-sm font-semibold text-[#002147]">US balance sheet</p>
                </div>
                <div class="text-right">
                  <p class="text-xs text-[#6B7280]">Total (USD)</p>
                  <p class="font-mono tabular-nums text-sm font-semibold">
                    $2,150,000
                  </p>
                </div>
              </div>

              <div class="px-5 py-4 text-xs text-[#4B5563] space-y-2">
                <div class="flex items-center justify-between py-1">
                  <div>
                    <p class="font-medium">Brokerage &amp; equities</p>
                    <p class="text-[11px] text-[#6B7280]">
                      US-listed stocks, ETFs and cash
                    </p>
                  </div>
                  <div class="text-right font-mono tabular-nums">
                    <p>$1,320,000</p>
                    <p class="text-[11px] text-[#005F48]">+4.2% YTD</p>
                  </div>
                </div>

                <div class="flex items-center justify-between py-1 border-t border-dashed border-[#E5E7EB]">
                  <div>
                    <p class="font-medium">Real estate</p>
                    <p class="text-[11px] text-[#6B7280]">
                      Primary residence &amp; rental
                    </p>
                  </div>
                  <div class="text-right font-mono tabular-nums">
                    <p>$650,000</p>
                    <p class="text-[11px] text-[#6B7280]">
                      ‚àí$240,000 mortgage
                    </p>
                  </div>
                </div>

                <div class="flex items-center justify-between py-1 border-t border-dashed border-[#E5E7EB]">
                  <div>
                    <p class="font-medium">Retirement accounts</p>
                    <p class="text-[11px] text-[#6B7280]">
                      401(k), IRA and similar
                    </p>
                  </div>
                  <div class="text-right font-mono tabular-nums">
                    <p>$180,000</p>
                    <p class="text-[11px] text-[#6B7280]">tax-deferred</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Taiwan assets -->
            <div class="bg-white border border-[#E5E7EB] rounded-xl shadow-[0_4px_20px_rgba(0,0,0,0.03)] overflow-hidden">
              <div class="px-5 py-4 border-b border-[#E5E7EB] bg-[#E6F5EC]/70 flex items-center justify-between">
                <div>
                  <p class="text-[11px] tracking-[0.24em] uppercase text-[#4B5563]">
                    Taiwan assets
                  </p>
                  <p class="text-sm font-semibold text-[#002147]">Taiwan balance sheet</p>
                </div>
                <div class="text-right">
                  <p class="text-xs text-[#6B7280]">
                    Total (TWD, est. USD)
                  </p>
                  <p class="font-mono tabular-nums text-sm font-semibold">
                    $1,300,000
                  </p>
                </div>
              </div>

              <div class="px-5 py-4 text-xs text-[#4B5563] space-y-2">
                <div class="flex items-center justify-between py-1">
                  <div>
                    <p class="font-medium">TW brokerage &amp; funds</p>
                    <p class="text-[11px] text-[#6B7280]">
                      TW-listed stocks, mutual funds
                    </p>
                  </div>
                  <div class="text-right font-mono tabular-nums">
                    <p>$520,000</p>
                    <p class="text-[11px] text-[#005F48]">+3.1% YTD</p>
                  </div>
                </div>

                <div class="flex items-center justify-between py-1 border-t border-dashed border-[#E5E7EB]">
                  <div>
                    <p class="font-medium">Insurance &amp; savings</p>
                    <p class="text-[11px] text-[#6B7280]">
                      Cash-value policies, savings plans
                    </p>
                  </div>
                  <div class="text-right font-mono tabular-nums">
                    <p>$260,000</p>
                    <p class="text-[11px] text-[#C5A059]">
                      PFIC review suggested
                    </p>
                  </div>
                </div>

                <div class="flex items-center justify-between py-1 border-t border-dashed border-[#E5E7EB]">
                  <div>
                    <p class="font-medium">Property &amp; land</p>
                    <p class="text-[11px] text-[#6B7280]">
                      Family home + inherited land
                    </p>
                  </div>
                  <div class="text-right font-mono tabular-nums">
                    <p>$520,000</p>
                    <p class="text-[11px] text-[#6B7280]">low leverage</p>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- ÂÖ∂È§ò pagesÔºöUS Accounts / US Stocks / TW Accounts / TW Stocks / Family / Help / Settings -->
        <!-- Ôºà‰ª•‰∏ãÂ∞±ÊòØ‰Ω†‰πãÂâçÈÇ£‰ªΩÂÆåÊï¥Ê™îÊ°àË£°ÁöÑÂÖßÂÆπÔºåÊàëÂéüÂ∞Å‰∏çÂãï‰øùÁïôÔºõÂõ†ÁÇ∫Â§™Èï∑Â∞±‰∏çÂÜçÂè£È†≠Ëß£ÈáãÔºâ -->

        <!-- US assets > Accounts page -->
        <div id="page-us-accounts" class="dash-page hidden">
          <div class="max-w-[1200px] mx-auto px-6 py-8 lg:py-10 space-y-6">
            <!-- Title -->
            <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
              <div>
                <p class="text-[11px] font-semibold tracking-[0.24em] text-[#9CA3AF] uppercase">
                  US assets ¬∑ Accounts
                </p>
                <h1 class="text-[26px] md:text-[30px] font-semibold tracking-tight text-[#002147] font-serif">
                  US cash &amp; bank accounts
                </h1>
                <p class="mt-2 text-xs md:text-sm text-[#4B5563] max-w-xl">
                  Focus on yield and liquidity in a high-rate environment. These balances stay in the US domestic system.
                </p>
              </div>
              <div class="flex flex-wrap gap-2 text-[11px] text-[#4B5563]">
                <span class="inline-flex items-center gap-1 rounded-full bg-blue-50 text-blue-900 px-2.5 py-1 border border-blue-100">
                  <i class="fa-solid fa-piggy-bank text-[10px]"></i>
                  Yield oriented
                </span>
                <span class="inline-flex items-center gap-1 rounded-full bg-slate-100 text-[#4B5563] px-2.5 py-1 border border-slate-200">
                  <i class="fa-solid fa-dollar-sign text-[10px]"></i>
                  USD only
                </span>
              </div>
            </div>

            <!-- Summary header -->
            <section class="bg-white border border-gray-100 rounded-xl shadow-sm px-6 py-5">
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Total Balance -->
                <div>
                  <p class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF] mb-1">
                    Total balance
                  </p>
                  <p class="text-2xl md:text-3xl font-semibold font-serif tracking-tight text-[#002147]">
                    $245,000.00
                  </p>
                  <p class="mt-1 text-[11px] text-[#6B7280]">
                    Across 4 US institutions
                  </p>
                </div>

                <!-- Avg APY -->
                <div>
                  <p class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF] mb-1">
                    Weighted avg. APY
                  </p>
                  <div class="inline-flex items-center gap-2 rounded-full bg-emerald-50 border border-emerald-100 px-3 py-1.5">
                    <span class="w-1.5 h-1.5 rounded-full bg-emerald-500"></span>
                    <span class="text-base font-semibold font-mono tabular-nums text-emerald-700">
                      4.25%
                    </span>
                    <span class="text-[11px] text-emerald-700">
                      blended yield
                    </span>
                  </div>
                  <p class="mt-1 text-[11px] text-[#6B7280]">
                    Concentrated in high-yield savings and CDs
                  </p>
                </div>

                <!-- Monthly interest -->
                <div>
                  <p class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF] mb-1">
                    Est. monthly interest
                  </p>
                  <p class="text-lg md:text-xl font-semibold font-mono tabular-nums text-[#005F48]">
                    +$850.00<span class="text-xs text-[#6B7280]">/mo</span>
                  </p>
                  <p class="mt-1 text-[11px] text-[#6B7280]">
                    Before tax, assuming current APY levels
                  </p>
                </div>
              </div>
            </section>

            <!-- Accounts table -->
            <section class="bg-white border border-gray-100 rounded-xl shadow-sm">
              <div class="px-6 pt-5 pb-3 flex items-center justify-between">
                <div>
                  <p class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF] mb-1">
                    US accounts
                  </p>
                  <h2 class="text-sm font-semibold text-[#002147]">
                    Deposit &amp; cash positions
                  </h2>
                </div>
                <button
                  type="button"
                  class="inline-flex items-center gap-2 rounded-full border border-blue-100 bg-blue-50 text-[11px] font-semibold text-blue-900 px-3 py-1.5 hover:bg-blue-100"
                >
                  <i class="fa-solid fa-plus text-[10px]"></i>
                  <span>Add US account</span>
                </button>
              </div>

              <div class="overflow-x-auto">
                <table class="min-w-full text-xs text-left border-collapse">
                  <thead>
                    <tr class="text-[11px] uppercase tracking-[0.14em] text-[#9CA3AF] border-t border-b border-gray-100">
                      <th class="py-3 px-6 font-medium">Institution</th>
                      <th class="py-3 px-4 font-medium">Type</th>
                      <th class="py-3 px-4 font-medium">APY</th>
                      <th class="py-3 px-4 font-medium">Status</th>
                      <th class="py-3 px-6 font-medium text-right">Balance (USD)</th>
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-gray-100">
                    <!-- Row 1 -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-5 px-6">
                        <div class="flex items-center gap-3">
                          <div class="w-8 h-8 rounded-full bg-blue-50 flex items-center justify-center text-[11px] font-semibold text-blue-900">
                            C
                          </div>
                          <div>
                            <p class="text-[13px] font-semibold text-[#002147]">
                              Chase Premier Checking
                            </p>
                            <p class="text-[11px] text-[#6B7280]">
                              Main domestic spend account
                            </p>
                          </div>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top text-[#4B5563]">
                        Checking
                      </td>
                      <td class="py-5 px-4 align-top">
                        <div class="inline-flex items-center gap-1.5">
                          <span class="font-mono tabular-nums text-[13px] text-[#002147]">
                            0.30%
                          </span>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top">
                        <span class="inline-flex items-center rounded-full bg-slate-100 text-[#4B5563] px-2 py-0.5 text-[10px] font-medium">
                          Active
                        </span>
                      </td>
                      <td class="py-5 px-6 align-top text-right">
                        <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                          $32,500.00
                        </span>
                      </td>
                    </tr>

                    <!-- Row 2 -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-5 px-6">
                        <div class="flex items-center gap-3">
                          <div class="w-8 h-8 rounded-full bg-blue-50 flex items-center justify-center text-[11px] font-semibold text-blue-900">
                            A
                          </div>
                          <div>
                            <p class="text-[13px] font-semibold text-[#002147]">
                              Ally High-Yield Savings
                            </p>
                            <p class="text-[11px] text-[#6B7280]">
                              Online savings, no ATM card
                            </p>
                          </div>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top text-[#4B5563]">
                        Savings
                      </td>
                      <td class="py-5 px-4 align-top">
                        <div class="inline-flex items-center gap-1.5">
                          <span class="w-1.5 h-1.5 rounded-full bg-emerald-500"></span>
                          <span class="font-mono tabular-nums text-[13px] text-[#002147]">
                            4.40%
                          </span>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top">
                        <span class="inline-flex items-center rounded-full bg-emerald-50 text-emerald-700 px-2 py-0.5 text-[10px] font-medium">
                          Active
                        </span>
                      </td>
                      <td class="py-5 px-6 align-top text-right">
                        <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                          $140,000.00
                        </span>
                      </td>
                    </tr>

                    <!-- Row 3 -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-5 px-6">
                        <div class="flex items-center gap-3">
                          <div class="w-8 h-8 rounded-full bg-blue-50 flex items-center justify-center text-[11px] font-semibold text-blue-900">
                            C
                          </div>
                          <div>
                            <p class="text-[13px] font-semibold text-[#002147]">
                              Capital One 360 CD (12m)
                            </p>
                            <p class="text-[11px] text-[#6B7280]">
                              Laddered deposit, auto-renew off
                            </p>
                          </div>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top text-[#4B5563]">
                        CD
                      </td>
                      <td class="py-5 px-4 align-top">
                        <div class="inline-flex items-center gap-1.5">
                          <span class="w-1.5 h-1.5 rounded-full bg-emerald-500"></span>
                          <span class="font-mono tabular-nums text-[13px] text-[#002147]">
                            4.80%
                          </span>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top">
                        <span class="inline-flex items-center rounded-full bg-slate-100 text-[#4B5563] px-2 py-0.5 text-[10px] font-medium">
                          Active
                        </span>
                      </td>
                      <td class="py-5 px-6 align-top text-right">
                        <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                          $55,000.00
                        </span>
                      </td>
                    </tr>

                    <!-- Row 4 -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-5 px-6">
                        <div class="flex items-center gap-3">
                          <div class="w-8 h-8 rounded-full bg-blue-50 flex items-center justify-center text-[11px] font-semibold text-blue-900">
                            W
                          </div>
                          <div>
                            <p class="text-[13px] font-semibold text-[#002147]">
                              Wells Fargo Savings
                            </p>
                            <p class="text-[11px] text-[#6B7280]">
                              Legacy account kept for history
                            </p>
                          </div>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top text-[#4B5563]">
                        Savings
                      </td>
                      <td class="py-5 px-4 align-top">
                        <div class="inline-flex items-center gap-1.5">
                          <span class="font-mono tabular-nums text-[13px] text-[#002147]">
                            0.10%
                          </span>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top">
                        <span class="inline-flex items-center rounded-full bg-slate-100 text-[#4B5563] px-2 py-0.5 text-[10px] font-medium">
                          Active
                        </span>
                      </td>
                      <td class="py-5 px-6 align-top text-right">
                        <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                          $17,500.00
                        </span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="px-6 py-3 border-t border-gray-100 text-[11px] text-[#6B7280]">
                APY data is illustrative. In production, these figures sync from connected institutions or manual inputs.
              </div>
            </section>
          </div>
        </div>

        <!-- US assets > Stocks page -->
        <div id="page-us-stocks" class="dash-page hidden">
          <div class="max-w-[1200px] mx-auto px-6 py-8 lg:py-10 space-y-6">
            <!-- Title -->
            <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
              <div>
                <p class="text-[11px] font-semibold tracking-[0.24em] text-[#9CA3AF] uppercase">
                  US assets ¬∑ Stocks
                </p>
                <h1 class="text-[26px] md:text-[30px] font-semibold tracking-tight text-[#002147] font-serif">
                  US equity growth engine
                </h1>
                <p class="mt-2 text-xs md:text-sm text-[#4B5563] max-w-xl">
                  Public US equities and ETFs ‚Äì the core engine of long-term growth and capital gains.
                </p>
              </div>
              <div class="flex flex-wrap gap-2 text-[11px] text-[#4B5563]">
                <span class="inline-flex items-center gap-1 rounded-full bg-emerald-50 text-emerald-800 px-2.5 py-1 border border-emerald-100">
                  <i class="fa-solid fa-chart-line text-[10px]"></i>
                  Performance focused
                </span>
                <span class="inline-flex items-center gap-1 rounded-full bg-slate-100 text-[#4B5563] px-2.5 py-1 border border-slate-200">
                  <i class="fa-solid fa-sack-dollar text-[10px]"></i>
                  Unrealized gains
                </span>
              </div>
            </div>

            <!-- Portfolio performance hero -->
            <section class="bg-white border border-gray-100 rounded-xl shadow-sm px-6 py-5">
              <div class="grid grid-cols-1 lg:grid-cols-[1.3fr,1fr] gap-6 items-stretch">
                <!-- Area chart -->
                <div class="flex flex-col justify-between">
                  <div class="flex items-center justify-between mb-3">
                    <div>
                      <p class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF] mb-1">
                        Portfolio value
                      </p>
                      <p class="text-xs text-[#6B7280]">
                        Last 12 months ¬∑ daily close
                      </p>
                    </div>
                    <div class="inline-flex rounded-full bg-[#F3F4F6] p-1 text-[11px]">
                      <button class="px-2.5 py-0.5 rounded-full bg-white text-[#002147] font-semibold shadow-sm">
                        1Y
                      </button>
                      <button class="px-2.5 py-0.5 rounded-full text-[#6B7280]">
                        6M
                      </button>
                      <button class="px-2.5 py-0.5 rounded-full text-[#6B7280]">
                        1M
                      </button>
                    </div>
                  </div>
                  <div class="h-40 rounded-lg bg-[#F5F7FA] border border-[#E5E7EB] px-3 py-2 flex items-center">
                    <!-- Smooth area chart using SVG -->
                    <svg viewBox="0 0 260 120" class="w-full h-full" aria-hidden="true">
                      <defs>
                        <linearGradient id="usEquityArea" x1="0" y1="0" x2="0" y2="1">
                          <stop offset="0%" stop-color="#005F48" stop-opacity="0.35" />
                          <stop offset="100%" stop-color="#005F48" stop-opacity="0.02" />
                        </linearGradient>
                      </defs>
                      <!-- baseline -->
                      <path d="M0 95 H260" stroke="#D1D5DB" stroke-width="1" fill="none" />
                      <!-- smooth area -->
                      <path
                        d="M0 95
                           C 30 92, 50 88, 70 82
                           C 90 76, 110 70, 130 66
                           C 150 62, 170 54, 190 50
                           C 210 46, 235 42, 260 38
                           L 260 120 L 0 120 Z"
                        fill="url(#usEquityArea)"
                        stroke="none"
                      />
                      <!-- smooth line -->
                      <path
                        d="M0 95
                           C 30 92, 50 88, 70 82
                           C 90 76, 110 70, 130 66
                           C 150 62, 170 54, 190 50
                           C 210 46, 235 42, 260 38"
                        fill="none"
                        stroke="#005F48"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <!-- latest point -->
                      <circle cx="260" cy="38" r="4" fill="#005F48" />
                    </svg>
                  </div>
                </div>

                <!-- Key metrics -->
                <div class="flex flex-col justify-between gap-4">
                  <!-- Total equity -->
                  <div>
                    <p class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF] mb-1">
                      Total equity
                    </p>
                    <p class="text-2xl md:text-3xl font-semibold font-serif tracking-tight text-[#002147]">
                      $840,250.00
                    </p>
                    <p class="mt-1 text-[11px] text-[#6B7280]">
                      Across taxable and retirement US brokerage accounts.
                    </p>
                  </div>

                  <!-- Gain / loss -->
                  <div class="space-y-2">
                    <div class="flex flex-wrap items-center gap-2">
                      <span class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF]">
                        Unrealized gain
                      </span>
                      <span class="inline-flex items-center gap-2 rounded-full bg-emerald-50 border border-emerald-100 px-3 py-1 text-[11px] font-semibold text-[#005F48]">
                        <i class="fa-solid fa-arrow-trend-up text-[10px]"></i>
                        <span class="font-mono tabular-nums">
                          +$124,500.00
                        </span>
                        <span class="font-mono tabular-nums">
                          (+17.4%)
                        </span>
                      </span>
                    </div>

                    <div class="flex items-center gap-2 text-[11px]">
                      <span class="text-[#6B7280]">
                        Today
                      </span>
                      <span class="font-mono tabular-nums text-[#CC5500]">
                        -$230.00
                      </span>
                      <span class="text-[#9CA3AF]">
                        Minor pullback after recent highs
                      </span>
                    </div>
                  </div>

                  <!-- Small hint -->
                  <p class="text-[11px] text-[#6B7280]">
                    Capital gains are unrealized until you sell. Taimic keeps track of cost basis highlights ‚Äì your tax advisor
                    gives the final call on when and how to harvest.
                  </p>
                </div>
              </div>
            </section>

            <!-- Holdings table -->
            <section class="bg-white border border-gray-100 rounded-xl shadow-sm">
              <div class="px-6 pt-5 pb-3 flex items-center justify-between">
                <div>
                  <p class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF] mb-1">
                    Holdings
                  </p>
                  <h2 class="text-sm font-semibold text-[#002147]">
                    US equities &amp; ETFs
                  </h2>
                </div>
                <button
                  type="button"
                  class="inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white text-[11px] font-semibold text-[#002147] px-3 py-1.5 hover:bg-[#F3F4F6]"
                >
                  <i class="fa-solid fa-sliders text-[10px]"></i>
                  <span>Filter / group</span>
                </button>
              </div>

              <div class="overflow-x-auto">
                <table class="w-full text-xs text-left border-collapse">
                  <thead>
                    <tr class="text-[11px] uppercase tracking-[0.14em] text-[#9CA3AF] border-t border-b border-gray-100">
                      <th class="py-3 px-6 font-medium">Symbol</th>
                      <th class="py-3 px-4 font-medium">Quantity</th>
                      <th class="py-3 px-4 font-medium">Price</th>
                      <th class="py-3 px-4 font-medium">Cost basis</th>
                      <th class="py-3 px-4 font-medium">Unrealized gain</th>
                      <th class="py-3 px-6 font-medium text-right">Market value</th>
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-gray-100">
                    <!-- AAPL -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-4 px-6">
                        <div class="flex flex-col">
                          <span class="text-[13px] font-semibold text-[#002147]">
                            AAPL
                          </span>
                          <span class="text-[11px] text-[#6B7280]">
                            Apple Inc.
                          </span>
                        </div>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#002147]">
                          150.00
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#002147]">
                          $220.50
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#6B7280]">
                          $142.50
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#005F48]">
                          +$11,700.00
                        </span>
                      </td>
                      <td class="py-4 px-6 align-top text-right">
                        <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                          $33,075.00
                        </span>
                      </td>
                    </tr>

                    <!-- VOO -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-4 px-6">
                        <div class="flex flex-col">
                          <span class="text-[13px] font-semibold text-[#002147]">
                            VOO
                          </span>
                          <span class="text-[11px] text-[#6B7280]">
                            Vanguard S&amp;P 500 ETF
                          </span>
                        </div>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#002147]">
                          320.00
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#002147]">
                          $420.10
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#6B7280]">
                          $345.25
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#005F48]">
                          +$24,000.00
                        </span>
                      </td>
                      <td class="py-4 px-6 align-top text-right">
                        <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                          $134,432.00
                        </span>
                      </td>
                    </tr>

                    <!-- MSFT -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-4 px-6">
                        <div class="flex flex-col">
                          <span class="text-[13px] font-semibold text-[#002147]">
                            MSFT
                          </span>
                          <span class="text-[11px] text-[#6B7280]">
                            Microsoft Corp.
                          </span>
                        </div>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#002147]">
                          210.00
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#002147]">
                          $390.80
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#6B7280]">
                          $255.40
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#005F48]">
                          +$28,448.00
                        </span>
                      </td>
                      <td class="py-4 px-6 align-top text-right">
                        <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                          $82,068.00
                        </span>
                      </td>
                    </tr>

                    <!-- TSLA (loss example) -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-4 px-6">
                        <div class="flex flex-col">
                          <span class="text-[13px] font-semibold text-[#002147]">
                            TSLA
                          </span>
                          <span class="text-[11px] text-[#6B7280]">
                            Tesla Inc.
                          </span>
                        </div>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#002147]">
                          90.00
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#002147]">
                          $190.20
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#6B7280]">
                          $245.00
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#B91C1C]">
                          -$4,932.00
                        </span>
                      </td>
                      <td class="py-4 px-6 align-top text-right">
                        <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                          $17,118.00
                        </span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="px-6 py-3 border-t border-gray-100 text-[11px] text-[#6B7280]">
                Values are shown in USD. For tax planning, Taimic keeps cost basis estimates; always confirm exact lots with your broker before filing.
              </div>
            </section>
          </div>
        </div>

        <!-- Taiwan assets > Accounts page -->
        <div id="page-tw-accounts" class="dash-page hidden">
          <div class="max-w-[1200px] mx-auto px-6 py-8 lg:py-10 space-y-6">
            <!-- Title -->
            <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
              <div>
                <p class="text-[11px] font-semibold tracking-[0.24em] text-[#9CA3AF] uppercase">
                  Taiwan assets ¬∑ Accounts
                </p>
                <h1 class="text-[26px] md:text-[30px] font-semibold tracking-tight text-[#002147] font-serif">
                  Taiwan bank accounts (FBAR view)
                </h1>
                <p class="mt-2 text-xs md:text-sm text-[#4B5563] max-w-xl">
                  Local TWD and FX deposits, translated into USD for IRS reporting and global allocation.
                </p>
              </div>
              <div class="flex flex-wrap gap-2 text-[11px] text-[#4B5563]">
                <span class="inline-flex items-center gap-1 rounded-full bg-green-50 text-green-900 px-2.5 py-1 border border-green-100">
                  <i class="fa-solid fa-earth-asia text-[10px]"></i>
                  Foreign accounts
                </span>
                <span class="inline-flex items-center gap-1 rounded-full bg-amber-50 text-amber-800 px-2.5 py-1 border border-amber-200">
                  <i class="fa-solid fa-scale-balanced text-[10px]"></i>
                  FBAR sensitive
                </span>
              </div>
            </div>

            <!-- Summary header -->
            <section class="bg-white border border-gray-100 rounded-xl shadow-sm px-6 py-5">
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Total balance (USD equiv) -->
                <div>
                  <p class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF] mb-1">
                    Total balance (USD equiv.)
                  </p>
                  <p class="text-2xl md:text-3xl font-semibold font-serif tracking-tight text-[#002147]">
                    $105,200.00
                  </p>
                  <p class="mt-1 text-[11px] text-[#6B7280]">
                    Converted using end-of-year FX estimates
                  </p>
                </div>

                <!-- Original currency -->
                <div>
                  <p class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF] mb-1">
                    Original currency total
                  </p>
                  <p class="text-base font-mono tabular-nums text-[#002147]">
                    NT$ 3,419,000
                  </p>
                  <p class="mt-1 text-[11px] text-[#6B7280]">
                    Includes TWD and foreign-currency sub-accounts
                  </p>
                </div>

                <!-- FBAR risk badge -->
                <div>
                  <p class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF] mb-1">
                    FBAR risk status
                  </p>
                  <div class="inline-flex items-center gap-2 rounded-full bg-amber-50 border border-amber-200 px-3 py-1.5">
                    <span class="text-base">‚ö†Ô∏è</span>
                    <span class="text-[11px] font-semibold text-amber-800 tracking-[0.12em] uppercase">
                      FBAR filing required
                    </span>
                  </div>
                  <p class="mt-1 text-[11px] text-[#6B7280]">
                    Aggregate non-US balance exceeds $10,000 USD threshold.
                  </p>
                </div>
              </div>
            </section>

            <!-- Accounts table -->
            <section class="bg-white border border-gray-100 rounded-xl shadow-sm">
              <div class="px-6 pt-5 pb-3 flex items-center justify-between">
                <div>
                  <p class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF] mb-1">
                    Taiwan accounts
                  </p>
                  <h2 class="text-sm font-semibold text-[#002147]">
                    Deposits, FX and compliance flags
                  </h2>
                </div>
                <button
                  type="button"
                  class="inline-flex items-center gap-2 rounded-full border border-green-100 bg-green-50 text-[11px] font-semibold text-green-900 px-3 py-1.5 hover:bg-green-100"
                >
                  <i class="fa-solid fa-plus text-[10px]"></i>
                  <span>Add Taiwan account</span>
                </button>
              </div>

              <div class="overflow-x-auto">
                <table class="min-w-full text-xs text-left border-collapse">
                  <thead>
                    <tr class="text-[11px] uppercase tracking-[0.14em] text-[#9CA3AF] border-t border-b border-gray-100">
                      <th class="py-3 px-6 font-medium">Institution</th>
                      <th class="py-3 px-4 font-medium">Type</th>
                      <th class="py-3 px-4 font-medium">FX rate</th>
                      <th class="py-3 px-4 font-medium">Compliance</th>
                      <th class="py-3 px-6 font-medium text-right">Balance</th>
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-gray-100">
                    <!-- Row 1 -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-5 px-6">
                        <div class="flex items-center gap-3">
                          <div class="w-8 h-8 rounded-full bg-green-50 flex items-center justify-center text-[11px] font-semibold text-green-900">
                            C
                          </div>
                          <div>
                            <p class="text-[13px] font-semibold text-[#002147]">
                              CTBC Bank ‚Äì Main TWD
                            </p>
                            <p class="text-[11px] text-[#6B7280]">
                              Salary and daily expenses
                            </p>
                          </div>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top text-[#4B5563]">
                        TWD Deposit
                      </td>
                      <td class="py-5 px-4 align-top">
                        <div class="flex flex-col gap-0.5">
                          <span class="font-mono tabular-nums text-[13px] text-[#002147]">
                            Ex: 32.50
                          </span>
                          <span class="inline-flex items-center gap-1 text-[11px] text-emerald-600">
                            <i class="fa-solid fa-arrow-trend-up text-[10px]"></i>
                            +0.3% vs last year
                          </span>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top">
                        <span class="inline-flex items-center gap-1 rounded-full bg-amber-50 text-amber-800 px-2 py-0.5 text-[10px] font-medium border border-amber-200">
                          <i class="fa-solid fa-file-circle-exclamation text-[9px]"></i>
                          Reportable
                        </span>
                        <p class="mt-1 text-[10px] text-[#6B7280] max-w-[180px]">
                          Included in FBAR aggregate. Keep year-end statement.
                        </p>
                      </td>
                      <td class="py-5 px-6 align-top text-right">
                        <div class="flex flex-col items-end">
                          <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                            $34,000
                          </span>
                          <span class="font-mono tabular-nums text-[11px] text-[#6B7280]">
                            NT$ 1,105,000
                          </span>
                        </div>
                      </td>
                    </tr>

                    <!-- Row 2 -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-5 px-6">
                        <div class="flex items-center gap-3">
                          <div class="w-8 h-8 rounded-full bg-green-50 flex items-center justify-center text-[11px] font-semibold text-green-900">
                            P
                          </div>
                          <div>
                            <p class="text-[13px] font-semibold text-[#002147]">
                              Chunghwa Post ‚Äì Savings
                            </p>
                            <p class="text-[11px] text-[#6B7280]">
                              Low-activity parking account
                            </p>
                          </div>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top text-[#4B5563]">
                        TWD Deposit
                      </td>
                      <td class="py-5 px-4 align-top">
                        <div class="flex flex-col gap-0.5">
                          <span class="font-mono tabular-nums text-[13px] text-[#002147]">
                            Ex: 32.50
                          </span>
                          <span class="inline-flex items-center gap-1 text-[11px] text-[#6B7280]">
                            <i class="fa-solid fa-minus text-[9px]"></i>
                            Stable
                          </span>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top">
                        <span class="inline-flex items-center gap-1 rounded-full bg-amber-50 text-amber-800 px-2 py-0.5 text-[10px] font-medium border border-amber-200">
                          <i class="fa-solid fa-file-circle-exclamation text-[9px]"></i>
                          Reportable
                        </span>
                        <p class="mt-1 text-[10px] text-[#6B7280] max-w-[180px]">
                          Small but still part of total if combined balances &gt; $10k.
                        </p>
                      </td>
                      <td class="py-5 px-6 align-top text-right">
                        <div class="flex flex-col items-end">
                          <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                            $8,600
                          </span>
                          <span class="font-mono tabular-nums text-[11px] text-[#6B7280]">
                            NT$ 279,000
                          </span>
                        </div>
                      </td>
                    </tr>

                    <!-- Row 3 -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-5 px-6">
                        <div class="flex items-center gap-3">
                          <div class="w-8 h-8 rounded-full bg-green-50 flex items-center justify-center text-[11px] font-semibold text-green-900">
                            F
                          </div>
                          <div>
                            <p class="text-[13px] font-semibold text-[#002147]">
                              Fubon ‚Äì USD FX account
                            </p>
                            <p class="text-[11px] text-[#6B7280]">
                              Holds USD inside Taiwan banking system
                            </p>
                          </div>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top text-[#4B5563]">
                        Foreign currency deposit
                      </td>
                      <td class="py-5 px-4 align-top">
                        <div class="flex flex-col gap-0.5">
                          <span class="font-mono tabular-nums text-[13px] text-[#002147]">
                            Ex: 1.00
                          </span>
                          <span class="inline-flex items-center gap-1 text-[11px] text-emerald-600">
                            <i class="fa-solid fa-arrow-trend-up text-[10px]"></i>
                            USD base
                          </span>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top">
                        <span class="inline-flex items-center gap-1 rounded-full bg-amber-50 text-amber-800 px-2 py-0.5 text-[10px] font-medium border border-amber-200">
                          <i class="fa-solid fa-file-circle-exclamation text-[9px]"></i>
                          Reportable
                        </span>
                        <p class="mt-1 text-[10px] text-[#6B7280] max-w-[180px]">
                          US-dollar denominated, but legally a foreign account.
                        </p>
                      </td>
                      <td class="py-5 px-6 align-top text-right">
                        <div class="flex flex-col items-end">
                          <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                            $42,600
                          </span>
                          <span class="font-mono tabular-nums text-[11px] text-[#6B7280]">
                            USD 42,600
                          </span>
                        </div>
                      </td>
                    </tr>

                    <!-- Row 4 -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-5 px-6">
                        <div class="flex items-center gap-3">
                          <div class="w-8 h-8 rounded-full bg-green-50 flex items-center justify-center text-[11px] font-semibold text-green-900">
                            M
                          </div>
                          <div>
                            <p class="text-[13px] font-semibold text-[#002147]">
                              Mega Bank ‚Äì Children&apos;s account
                            </p>
                            <p class="text-[11px] text-[#6B7280]">
                              Small educational savings, under joint control
                            </p>
                          </div>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top text-[#4B5563]">
                        TWD Deposit
                      </td>
                      <td class="py-5 px-4 align-top">
                        <div class="flex flex-col gap-0.5">
                          <span class="font-mono tabular-nums text-[13px] text-[#002147]">
                            Ex: 32.50
                          </span>
                          <span class="inline-flex items-center gap-1 text-[11px] text-[#6B7280]">
                            <i class="fa-solid fa-minus text-[9px]"></i>
                            Stable
                          </span>
                        </div>
                      </td>
                      <td class="py-5 px-4 align-top">
                        <span class="inline-flex items-center gap-1 rounded-full bg-slate-100 text-[#4B5563] px-2 py-0.5 text-[10px] font-medium border border-slate-200">
                          Monitored
                        </span>
                        <p class="mt-1 text-[10px] text-[#6B7280] max-w-[180px]">
                          Small balance; still appears in family map but below typical FBAR materiality on its own.
                        </p>
                      </td>
                      <td class="py-5 px-6 align-top text-right">
                        <div class="flex flex-col items-end">
                          <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                            $20,000
                          </span>
                          <span class="font-mono tabular-nums text-[11px] text-[#6B7280]">
                            NT$ 630,000
                          </span>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="px-6 py-3 border-t border-gray-100 text-[11px] text-[#6B7280]">
                FBAR guidance here is informational only. Final filing decisions should be confirmed with your US tax advisor.
              </div>
            </section>
          </div>
        </div>

        <!-- Taiwan assets > Stocks page -->
        <div id="page-tw-stocks" class="dash-page hidden">
          <div class="max-w-[1200px] mx-auto px-6 py-8 lg:py-10 space-y-6">
            <!-- Title -->
            <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
              <div>
                <p class="text-[11px] font-semibold tracking-[0.24em] text-[#9CA3AF] uppercase">
                  Taiwan assets ¬∑ Stocks
                </p>
                <h1 class="text-[26px] md:text-[30px] font-semibold tracking-tight text-[#002147] font-serif">
                  Taiwan equity &amp; PFIC exposure
                </h1>
                <p class="mt-2 text-xs md:text-sm text-[#4B5563] max-w-xl">
                  TW-listed stocks and ETFs, translated into USD ‚Äì with special attention to PFIC risk and FX drag.
                </p>
              </div>
              <div class="flex flex-wrap gap-2 text-[11px] text-[#4B5563]">
                <span class="inline-flex items-center gap-1 rounded-full bg-green-50 text-green-900 px-2.5 py-1 border border-green-100">
                  <i class="fa-solid fa-leaf text-[10px]"></i>
                  Local exposure
                </span>
                <span class="inline-flex items-center gap-1 rounded-full bg-amber-50 text-amber-800 px-2.5 py-1 border border-amber-200">
                  <i class="fa-solid fa-bomb text-[10px]"></i>
                  PFIC risk monitor
                </span>
              </div>
            </div>

            <!-- Exposure banner -->
            <section class="bg-white border border-gray-100 rounded-xl shadow-sm px-6 py-5">
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- USD value -->
                <div>
                  <p class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF] mb-1">
                    Total value (USD)
                  </p>
                  <p class="text-2xl md:text-3xl font-semibold font-serif tracking-tight text-[#002147]">
                    $52,100.00
                  </p>
                  <p class="mt-1 text-[11px] text-[#6B7280]">
                    Based on latest available FX snapshot.
                  </p>
                </div>

                <!-- FX drag -->
                <div>
                  <p class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF] mb-1">
                    FX drag (vs. pure TWD performance)
                  </p>
                  <p class="text-base font-mono tabular-nums text-[#CC5500]">
                    -$1,200 USD impact
                  </p>
                  <p class="mt-1 text-[11px] text-[#6B7280]">
                    TWD depreciation has offset part of local stock gains.
                  </p>
                </div>

                <!-- PFIC warning -->
                <div>
                  <p class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF] mb-1">
                    PFIC exposure
                  </p>
                  <div class="rounded-lg bg-amber-50 border border-amber-200 px-3 py-2 flex items-start gap-2">
                    <span class="mt-0.5 text-sm">‚ö†Ô∏è</span>
                    <div>
                      <p class="text-[12px] font-semibold text-amber-800">
                        2 holdings flagged as potential PFIC
                      </p>
                      <p class="text-[11px] text-amber-800">
                        Non-US ETFs and funds can receive harsh US tax treatment. Review with your advisor.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <!-- Holdings table -->
            <section class="bg-white border border-gray-100 rounded-xl shadow-sm">
              <div class="px-6 pt-5 pb-3 flex items-center justify-between">
                <div>
                  <p class="text-[11px] tracking-[0.18em] uppercase text-[#9CA3AF] mb-1">
                    Taiwan equity holdings
                  </p>
                  <h2 class="text-sm font-semibold text-[#002147]">
                    Local stocks, ETFs and funds
                  </h2>
                </div>
                <button
                  type="button"
                  class="inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white text-[11px] font-semibold text-[#002147] px-3 py-1.5 hover:bg-[#F3F4F6]"
                >
                  <i class="fa-solid fa-filter-circle-dollar text-[10px]"></i>
                  <span>Filter by tax risk</span>
                </button>
              </div>

              <div class="overflow-x-auto">
                <table class="w-full text-xs text-left border-collapse">
                  <thead>
                    <tr class="text-[11px] uppercase tracking-[0.14em] text-[#9CA3AF] border-t border-b border-gray-100">
                      <th class="py-3 px-6 font-medium">Symbol</th>
                      <th class="py-3 px-4 font-medium">Name</th>
                      <th class="py-3 px-4 font-medium">Tax category</th>
                      <th class="py-3 px-4 font-medium">Price (TWD)</th>
                      <th class="py-3 px-6 font-medium text-right">Value</th>
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-gray-100">
                    <!-- 2330.TW TSMC (common stock) -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-4 px-6 align-top">
                        <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                          2330.TW
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <p class="text-[13px] text-[#002147]">
                          TSMC
                        </p>
                        <p class="text-[11px] text-[#6B7280]">
                          Taiwan Semiconductor Manufacturing Co.
                        </p>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="inline-flex items-center gap-1 rounded-full bg-slate-100 text-[#4B5563] px-2 py-0.5 text-[10px] font-medium border border-slate-200">
                          <i class="fa-solid fa-circle-check text-[9px]"></i>
                          Common stock
                        </span>
                        <p class="mt-1 text-[10px] text-[#6B7280] max-w-[180px]">
                          Generally not treated as PFIC for US tax purposes.
                        </p>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#002147]">
                          NT$ 980.00
                        </span>
                      </td>
                      <td class="py-4 px-6 align-top text-right">
                        <div class="flex flex-col items-end">
                          <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                            $45,200
                          </span>
                          <span class="font-mono tabular-nums text-[11px] text-[#6B7280]">
                            NT$ 1,450,000
                          </span>
                        </div>
                      </td>
                    </tr>

                    <!-- 0050.TW PFIC risk ETF -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-4 px-6 align-top">
                        <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                          0050.TW
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <p class="text-[13px] text-[#002147]">
                          Yuanta Taiwan 50
                        </p>
                        <p class="text-[11px] text-[#6B7280]">
                          Domestic index ETF
                        </p>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="inline-flex items-center gap-1 rounded-full bg-amber-50 text-amber-800 px-2 py-0.5 text-[10px] font-medium border border-amber-200">
                          <i class="fa-solid fa-triangle-exclamation text-[9px]"></i>
                          Passive foreign inv.
                        </span>
                        <p class="mt-1 text-[10px] text-[#6B7280] max-w-[200px]">
                          Potential PFIC. US taxpayers often face punitive mark-to-market or QEF elections.
                        </p>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#002147]">
                          NT$ 156.30
                        </span>
                      </td>
                      <td class="py-4 px-6 align-top text-right">
                        <div class="flex flex-col items-end">
                          <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                            $5,800
                          </span>
                          <span class="font-mono tabular-nums text-[11px] text-[#6B7280]">
                            NT$ 186,000
                          </span>
                        </div>
                      </td>
                    </tr>

                    <!-- 00878.TW high dividend ETF (PFIC) -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-4 px-6 align-top">
                        <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                          00878.TW
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <p class="text-[13px] text-[#002147]">
                          Yuanta High Dividend
                        </p>
                        <p class="text-[11px] text-[#6B7280]">
                          High-yield equity ETF
                        </p>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="inline-flex items-center gap-1 rounded-full bg-amber-50 text-amber-800 px-2 py-0.5 text-[10px] font-medium border border-amber-200">
                          <i class="fa-solid fa-triangle-exclamation text-[9px]"></i>
                          Passive foreign inv.
                        </span>
                        <p class="mt-1 text-[10px] text-[#6B7280] max-w-[200px]">
                          Likely PFIC. Dividend-focused foreign ETFs need special US tax handling.
                        </p>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#002147]">
                          NT$ 21.50
                        </span>
                      </td>
                      <td class="py-4 px-6 align-top text-right">
                        <div class="flex flex-col items-end">
                          <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                            $1,100
                          </span>
                          <span class="font-mono tabular-nums text-[11px] text-[#6B7280]">
                            NT$ 35,000
                          </span>
                        </div>
                      </td>
                    </tr>

                    <!-- 2882.TW Common stock example -->
                    <tr class="hover:bg-[#F9FAFB] transition-colors">
                      <td class="py-4 px-6 align-top">
                        <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                          2882.TW
                        </span>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <p class="text-[13px] text-[#002147]">
                          Cathay Financial
                        </p>
                        <p class="text-[11px] text-[#6B7280]">
                          Large cap financial stock
                        </p>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="inline-flex items-center gap-1 rounded-full bg-slate-100 text-[#4B5563] px-2 py-0.5 text-[10px] font-medium border border-slate-200">
                          <i class="fa-solid fa-circle-check text-[9px]"></i>
                          Common stock
                        </span>
                        <p class="mt-1 text-[10px] text-[#6B7280] max-w-[180px]">
                          Equity position, typically outside PFIC scope.
                        </p>
                      </td>
                      <td class="py-4 px-4 align-top">
                        <span class="font-mono tabular-nums text-[#002147]">
                          NT$ 46.20
                        </span>
                      </td>
                      <td class="py-4 px-6 align-top text-right">
                        <div class="flex flex-col items-end">
                          <span class="font-mono tabular-nums text-[13px] font-semibold text-[#002147]">
                            $5,000
                          </span>
                          <span class="font-mono tabular-nums text-[11px] text-[#6B7280]">
                            NT$ 160,000
                          </span>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="px-6 py-3 border-t border-gray-100 text-[11px] text-[#6B7280]">
                PFIC classification is complex and depends on fund structure and elections. These labels are for screening only ‚Äì always obtain written advice before filing US returns.
              </div>
            </section>
          </div>
        </div>

        <!-- Family members page -->
        <div id="page-family" class="dash-page hidden family-page">
          <div class="max-w-[1200px] mx-auto px-6 py-8 lg:py-10">
            <!-- Top: title + actions -->
            <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6 mb-8">
              <div>
                <p class="text-[11px] font-semibold tracking-[0.26em] text-slate-500 uppercase mb-2">
                  Family governance
                </p>
                <h1 class="family-heading text-[26px] md:text-[32px] font-semibold text-slate-900 leading-tight">
                  Family members &amp; access
                </h1>
                <p class="mt-3 text-xs md:text-sm text-slate-600 max-w-xl">
                  Define who can see what inside your cross-border report. Start from the owner, then add spouse,
                  children and trusted advisors instead of sharing passwords.
                </p>
              </div>

              <div class="flex flex-wrap items-center gap-3">
                <button
                  type="button"
                  class="inline-flex items-center gap-2 rounded-full border border-slate-300 bg-transparent text-[11px] font-medium text-slate-700 px-3 py-2 hover:bg-white hover:border-slate-400"
                >
                  <i class="fa-solid fa-file-export text-[10px]"></i>
                  <span>Export access matrix</span>
                </button>
                <button
                  type="button"
                  class="inline-flex items-center gap-2 rounded-full bg-[#002FA7] hover:bg-[#001a70] text-white text-[11px] font-semibold px-4 py-2 shadow-sm"
                >
                  <i class="fa-solid fa-user-plus text-[10px]"></i>
                  <span>Invite member</span>
                </button>
              </div>
            </div>

            <!-- Members row -->
            <div class="space-y-4">
              <section class="family-card px-5 py-4">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                  <!-- Â∑¶ÈÇäÔºöMEMBERS + 3 active + È†≠ÂÉèÂàó -->
                  <div class="flex flex-col md:flex-row md:items-center gap-4">
                    <div class="flex items-center gap-2 text-[11px]">
                      <span class="text-[11px] font-semibold text-slate-900 tracking-[0.16em] uppercase">
                        Members
                      </span>
                      <span class="inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5 text-[10px] text-slate-500">
                        3 active
                      </span>
                    </div>

                    <!-- È†≠ÂÉèÂàóÔºöO / S / B -->
                    <div class="flex items-center gap-4">
                      <!-- Owner -->
                      <div class="flex flex-col items-center gap-1">
                        <div class="relative">
                          <div class="family-avatar w-9 h-9 text-[12px]">
                            <span>O</span>
                          </div>
                          <!-- Á∑ö‰∏äÁ∂†Èªû -->
                          <span class="absolute -right-0.5 -bottom-0.5 w-3 h-3 rounded-full border border-white bg-emerald-400"></span>
                        </div>
                        <span class="text-[10px] text-slate-500">Owner</span>
                      </div>

                      <!-- Spouse -->
                      <div class="flex flex-col items-center gap-1">
                        <div class="relative">
                          <div class="family-avatar w-9 h-9 text-[12px]">
                            <span>S</span>
                          </div>
                          <span class="absolute -right-0.5 -bottom-0.5 w-3 h-3 rounded-full border border-white bg-emerald-400"></span>
                        </div>
                        <span class="text-[10px] text-slate-500">Spouse</span>
                      </div>

                      <!-- Beneficiary -->
                      <div class="flex flex-col items-center gap-1">
                        <div class="relative">
                          <div class="family-avatar w-9 h-9 text-[12px]">
                            <span>B</span>
                          </div>
                          <span class="absolute -right-0.5 -bottom-0.5 w-3 h-3 rounded-full border border-white bg-emerald-400"></span>
                        </div>
                        <span class="text-[10px] text-slate-500">Beneficiary</span>
                      </div>
                    </div>
                  </div>

                  <!-- Âè≥ÈÇäÔºöInvite member ÊåâÈàï -->
                  <button
                    type="button"
                    class="inline-flex items-center gap-2 rounded-full bg-[#002FA7] hover:bg-[#001a70] text-white text-[11px] font-semibold px-4 py-2 shadow-sm"
                  >
                    <i class="fa-solid fa-user-plus text-[10px]"></i>
                    <span>Invite member</span>
                  </button>
                </div>
              </section>
            </div>

            <p class="mt-6 text-[11px] text-slate-400 max-w-xl">
              Later you‚Äôll be able to connect real emails, set per-country visibility and share a read-only
              advisor view. For now, treat this as the blueprint of how you want your family governance to look.
            </p>
          </div>
        </div>

        <!-- US / TW ÂÖ∂‰ªñ placeholder pages„ÄÅHelp„ÄÅSettingsÔºàËàáÂâçÁâàÁõ∏ÂêåÔºåÁï•ÈÅéËß£Èáã‰ΩÜÈÉΩÂú®Ê™îÊ°àË£°Ôºâ -->
        <!-- ... ÂÖ∂È§ò page-us-liabilities / page-us-house / page-us-crypto / page-us-insurance /
                page-tw-liabilities / page-tw-house / page-tw-crypto / page-tw-insurance /
                page-help / page-settings ÈÉΩÂÆåÊï¥‰øùÁïô ... -->
        <!-- ÁÇ∫‰∫ÜÁØáÂπÖÔºåÂ∞±‰∏çÂÜçÈÄêË°åË™™ÊòéÔºåÂØ¶ÈöõÊ™îÊ°àÂ∑≤ÂåÖÂê´ÂÖ®ÈÉ® HTML„ÄÇ -->
      </main>
    </div>

    <!-- footer bar -->
    <footer class="bg-[#f4f6fb] border-t border-gray-200">
      <div class="max-w-[1440px] mx-auto px-6 py-4">
        <div class="flex items-center justify-between gap-4 text-xs text-gray-500">
          <div>¬© 2025 Taimic Inc. All Rights Reserved.</div>
          <div class="flex items-center gap-4 text-gray-400">
            <i class="fa-brands fa-x-twitter"></i>
            <i class="fa-brands fa-discord"></i>
            <i class="fa-brands fa-instagram"></i>
            <i class="fa-brands fa-github"></i>
          </div>
        </div>
      </div>
    </footer>

  </div>

  <!-- ÂÖ±Áî® overlay -->
  <div id="modal-overlay" class="hidden fixed inset-0 bg-[#111827]/60 backdrop-blur-sm z-50 flex items-center justify-center p-4"></div>

  <!-- Auth overlay -->
  <div
    id="auth-overlay"
    class="hidden fixed inset-0 bg-[#111827]/60 backdrop-blur-sm z-50 flex items-center justify-center p-4"
  >
    <div class="w-full max-w-sm bg-white rounded-2xl shadow-2xl p-6 relative">
      <button
        type="button"
        onclick="closeAuthModal && closeAuthModal()"
        class="absolute right-3 top-3 text-slate-400 hover:text-slate-600 text-sm"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>

      <div class="flex justify-center mb-4">
        <div class="inline-flex bg-slate-100 rounded-full p-1">
          <button
            type="button"
            id="auth-tab-login"
            onclick="openAuthModal && openAuthModal('login')"
            class="flex-1 px-4 py-1.5 text-xs font-semibold rounded-full bg-white text-slate-900 shadow-sm"
          >
            Log in
          </button>
          <button
            type="button"
            id="auth-tab-register"
            onclick="openAuthModal && openAuthModal('register')"
            class="flex-1 px-4 py-1.5 text-xs font-semibold rounded-full text-slate-500 hover:text-slate-900 hover:bg-slate-100"
          >
            Sign up
          </button>
        </div>
      </div>

      <h2 id="auth-title" class="text-lg font-semibold text-slate-900 mb-1 text-center">
        Login to Taimic
      </h2>

      <div id="auth-message" class="text-sm h-5 text-center"></div>

      <label class="block text-xs font-medium text-slate-700 mt-2 mb-1">
        Email
      </label>
      <input
        id="auth-email"
        type="email"
        class="w-full border border-slate-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#2563eb] focus:border-[#2563eb]"
        placeholder="you@gmail.com"
      />

      <label class="block text-xs font-medium text-slate-700 mt-3 mb-1">
        Password
      </label>
      <input
        id="auth-password"
        type="password"
        class="w-full border border-slate-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#2563eb] focus:border-[#2563eb]"
        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
      />

      <button
        id="auth-submit"
        type="button"
        class="mt-5 w-full inline-flex items-center justify-center gap-2 rounded-full bg-[#2563eb] hover:bg-[#1d4ed8] text-white text-sm font-semibold py-2.5 shadow-sm transition"
      >
        <span id="auth-submit-text">Login</span>
        <i class="fa-solid fa-arrow-right-long text-xs"></i>
      </button>
    </div>
  </div>

  <script src="main.js"></script>

  <script>
    function setupMobileMenu() {
      const toggle = document.getElementById('sidebar-toggle');
      const mobileMenu = document.getElementById('mobile-menu');
      if (!toggle || !mobileMenu) return;
      toggle.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
      });
    }

    function mobileNavigate(pageKey) {
      switchDashboardPage(pageKey);
      const mobileMenu = document.getElementById('mobile-menu');
      if (mobileMenu) mobileMenu.classList.add('hidden');
    }

    document.addEventListener('DOMContentLoaded', () => {
      const STORAGE_KEY = 'taimic_assets_v1';
      const FX_TWD_TO_USD = 0.031;
      let assets = [];
      let regionChart = null;

      const form = document.getElementById('asset-form');
      const currencySelect = document.getElementById('asset-currency');
      const currencyPrefix = document.getElementById('asset-currency-prefix');
      const emptyState = document.getElementById('empty-state');

      setupMobileMenu();

      if (!form) {
        switchDashboardPage('overview');
        return;
      }

      try {
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
          const parsed = JSON.parse(saved);
          if (Array.isArray(parsed)) {
            assets = parsed;
            if (assets.length && emptyState) emptyState.classList.add('hidden');
          }
        }
      } catch (e) {
        console.warn('Failed to load assets from localStorage', e);
      }

      if (currencySelect && currencyPrefix) {
        currencySelect.addEventListener('change', () => {
          const cur = currencySelect.value;
          currencyPrefix.textContent = cur === 'TWD' ? 'NT$' : '$';
        });
      }

      if (form) {
        form.addEventListener('submit', function (e) {
          e.preventDefault();
          const name = document.getElementById('asset-name').value.trim();
          const region = document.getElementById('asset-region').value;
          const type = document.getElementById('asset-type').value;
          const currency = document.getElementById('asset-currency').value;
          const units = parseFloat(document.getElementById('asset-value').value || '0');

          if (!name || !units || units <= 0) return;

          const valueInCurrency = units * 10000;
          let valueUsd = valueInCurrency;
          if (currency === 'TWD') valueUsd = valueInCurrency * FX_TWD_TO_USD;

          assets.push({
            name,
            region,
            type,
            currency,
            valueInCurrency,
            valueUsd
          });

          saveAssets();
          form.reset();
          currencySelect.value = 'USD';
          currencyPrefix.textContent = '$';

          if (emptyState) emptyState.classList.add('hidden');
          renderDashboard();
        });
      }

      function saveAssets() {
        try {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(assets));
        } catch (e) {
          console.warn('Failed to save assets to localStorage', e);
        }
      }

      function renderDashboard() {
        const total = assets.reduce((sum, a) => sum + a.valueUsd, 0);
        const regionTotals = { tw: 0, us: 0, offshore: 0 };
        assets.forEach(a => {
          if (a.region === 'tw') regionTotals.tw += a.valueUsd;
          else if (a.region === 'us') regionTotals.us += a.valueUsd;
          else regionTotals.offshore += a.valueUsd;
        });

        const networthEl = document.getElementById('networth-value');
        if (networthEl) networthEl.textContent = formatUsd(total);

        updateRegionLabel(regionTotals.tw, total, 'region-tw-label');
        updateRegionLabel(regionTotals.us, total, 'region-us-label');
        updateRegionLabel(regionTotals.offshore, total, 'region-offshore-label');

        renderAssetTable();
        updateRegionChart(regionTotals);
        updateRadar(regionTotals);
        renderAiNotes(regionTotals, total);
      }

      function formatUsd(x) {
        return '$' + (x || 0).toLocaleString('en-US', {
          maximumFractionDigits: 0
        });
      }

      function updateRegionLabel(val, total, elId) {
        const el = document.getElementById(elId);
        if (!el) return;
        const pct = total > 0 ? Math.round((val / total) * 100) : 0;
        el.textContent = `${pct}% ¬∑ ${formatUsd(val)}`;
      }

      function renderAssetTable() {
        const tbody = document.getElementById('asset-table-body');
        if (!tbody) return;
        tbody.innerHTML = '';

        if (!assets.length) {
          const tr = document.createElement('tr');
          const td = document.createElement('td');
          td.colSpan = 5;
          td.className = 'py-4 text-center text-[11px] text-slate-500';
          td.textContent = 'No accounts added yet.';
          tr.appendChild(td);
          tbody.appendChild(tr);
          return;
        }

        assets.forEach((a, index) => {
          const tr = document.createElement('tr');

          const tdName = document.createElement('td');
          tdName.className = 'py-2 pr-2';
          tdName.innerHTML = `
            <div class="font-semibold text-slate-900">${escapeHtml(a.name)}</div>
            <div class="text-[11px] text-slate-500">${a.currency} ¬∑ approx. ${a.valueInCurrency.toLocaleString('en-US')}</div>
          `;

          const tdRegion = document.createElement('td');
          tdRegion.className = 'px-2 py-2';
          tdRegion.innerHTML = regionLabelHtml(a.region);

          const tdType = document.createElement('td');
          tdType.className = 'px-2 py-2';
          tdType.textContent = typeLabel(a.type);

          const tdVal = document.createElement('td');
          tdVal.className = 'px-2 py-2 text-right font-mono font-semibold';
          tdVal.textContent = formatUsd(a.valueUsd);

          const tdFlag = document.createElement('td');
          tdFlag.className = 'pl-2 pr-1 py-2 text-right text-[10px]';
          tdFlag.innerHTML = `
            <div class="flex items-center justify-end gap-2">
              ${taxFlagHtml(a)}
              <button
                type="button"
                class="asset-delete-btn w-7 h-7 rounded-full border border-slate-200 flex items-center justify-center text-slate-400 hover:bg-slate-100 hover:text-slate-700 text-xs"
                data-index="${index}"
              >
                <i class="fa-solid fa-minus"></i>
              </button>
            </div>
          `;

          tr.appendChild(tdName);
          tr.appendChild(tdRegion);
          tr.appendChild(tdType);
          tr.appendChild(tdVal);
          tr.appendChild(tdFlag);

          tbody.appendChild(tr);
        });

        tbody.querySelectorAll('.asset-delete-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            const idx = parseInt(btn.dataset.index, 10);
            if (Number.isNaN(idx)) return;
            assets.splice(idx, 1);
            saveAssets();
            if (!assets.length && emptyState) emptyState.classList.remove('hidden');
            renderDashboard();
          });
        });
      }

      function regionLabelHtml(region) {
        if (region === 'tw') return '<span class="inline-flex items-center gap-1 text-[11px]">üáπüáº <span>Taiwan</span></span>';
        if (region === 'us') return '<span class="inline-flex items-center gap-1 text-[11px]">üá∫üá∏ <span>United States</span></span>';
        return '<span class="inline-flex items-center gap-1 text-[11px]">üåê <span>Offshore / other</span></span>';
      }

      function typeLabel(type) {
        switch (type) {
          case 'brokerage': return 'Brokerage / stocks';
          case 'bank': return 'Bank / cash';
          case 'insurance': return 'Insurance / policy';
          case 'property': return 'Real estate';
          default: return 'Other';
        }
      }

      function taxFlagHtml(a) {
        if (a.type === 'insurance' && a.region === 'tw') {
          return `
            <span class="inline-flex items-center gap-1 rounded-full bg-amber-50 text-amber-700 px-2 py-0.5 border border-amber-200">
              <i class="fa-solid fa-triangle-exclamation text-[9px]"></i>
              PFIC review
            </span>
          `;
        }
        if ((a.type === 'bank' || a.type === 'brokerage') && (a.region === 'tw' || a.region === 'offshore')) {
          return `
            <span class="inline-flex items-center gap-1 rounded-full bg-sky-50 text-sky-700 px-2 py-0.5 border border-sky-100">
              <i class="fa-solid fa-circle-info text-[9px]"></i>
              Counts for FBAR
            </span>
          `;
        }
        return `
          <span class="inline-flex items-center gap-1 rounded-full bg-slate-50 text-slate-500 px-2 py-0.5 border border-slate-200">
            ‚Äî
          </span>
        `;
      }

      function updateRegionChart(regionTotals) {
        const canvas = document.getElementById('regionChart');
        if (!canvas) return;
        const data = [regionTotals.tw, regionTotals.us, regionTotals.offshore];
        const ctx = canvas.getContext('2d');

        if (!regionChart) {
          regionChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
              labels: ['Taiwan', 'US', 'Offshore'],
              datasets: [{
                data,
                backgroundColor: ['#38bdf8', '#4f46e5', '#cbd5f5']
              }]
            },
            options: {
              plugins: { legend: { display: false } },
              cutout: '65%'
            }
          });
        } else {
          regionChart.data.datasets[0].data = data;
          regionChart.update();
        }
      }

      function updateRadar(regionTotals) {
        const anyTw = regionTotals.tw > 0;
        const anyOffshore = regionTotals.offshore > 0;

        const pficEl = document.getElementById('radar-pfic');
        const twEl = document.getElementById('radar-twglobal');
        if (!pficEl || !twEl) return;

        if (assets.some(a => a.type === 'insurance' && a.region === 'tw')) {
          pficEl.querySelector('span:last-child').className =
            'inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-amber-50 text-amber-700 border border-amber-200 text-[10px] font-semibold';
          pficEl.querySelector('span:last-child').innerHTML =
            '<i class="fa-solid fa-triangle-exclamation text-[9px]"></i> REVIEW';
        } else {
          pficEl.querySelector('span:last-child').className =
            'inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-50 text-slate-600 border border-slate-200 text-[10px] font-semibold';
          pficEl.querySelector('span:last-child').textContent = '‚Äî';
        }

        if (anyTw && anyOffshore) {
          twEl.querySelector('span:last-child').className =
            'inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-sky-50 text-sky-700 border border-sky-200 text-[10px] font-semibold';
          twEl.querySelector('span:last-child').innerHTML =
            '<i class="fa-solid fa-eye text-[9px]"></i> WATCH';
        } else if (anyTw) {
          twEl.querySelector('span:last-child').className =
            'inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-700 border border-emerald-200 text-[10px] font-semibold';
          twEl.querySelector('span:last-child').innerHTML =
            '<span class="w-1.5 h-1.5 rounded-full bg-emerald-500"></span> LOW';
        } else {
          twEl.querySelector('span:last-child').className =
            'inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-50 text-slate-600 border border-slate-200 text-[10px] font-semibold';
          twEl.querySelector('span:last-child').textContent = '‚Äî';
        }
      }

      function renderAiNotes(regionTotals, total) {
        const list = document.getElementById('ai-notes-list');
        if (!list) return;
        list.innerHTML = '';

        const rawItems = [];

        if (assets.some(a => a.type === 'insurance' && a.region === 'tw')) {
          rawItems.push({
            title: 'Confirm PFIC treatment on Taiwan policies',
            body: 'Export Taiwan policy details and ask your US tax advisor specifically about Form 8621 and whether restructuring is needed.',
            tag: 'US tax advisor'
          });
        }

        if (regionTotals.tw > 0 && regionTotals.us > 0) {
          rawItems.push({
            title: 'Run a TW‚ÄìUS inheritance scenario',
            body: 'Simulate what happens if one spouse passes away while assets are split between Taiwan and the US to check liquidity and tax.',
            tag: 'Estate / succession'
          });
        }

        if (total > 0 && (regionTotals.tw / total > 0.4 || regionTotals.us / total > 0.4)) {
          rawItems.push({
            title: 'Decide your target TW vs US FX mix',
            body: 'Set a target range for how much of your net worth you want in TWD vs USD, then let Taimic alert you when allocations drift.',
            tag: 'FX & allocation'
          });
        }

        if (!rawItems.length) {
          rawItems.push({
            title: 'Add a few more accounts to unlock AI notes',
            body: 'Once we see assets in at least two regions or more than one type, we can surface more specific cross-border suggestions.',
            tag: 'Setup'
          });
        }

        const items = rawItems.slice(0, 2);

        items.forEach((item, idx) => {
          const li = document.createElement('li');
          li.className = 'flex gap-3';
          li.innerHTML = `
            <div class="flex flex-col items-center">
              <div class="w-5 h-5 rounded-full bg-[#2563eb] text-white flex items-center justify-center text-[11px] font-semibold">
                ${idx + 1}
              </div>
              ${idx !== items.length - 1 ? '<div class="flex-1 w-px bg-slate-200 mt-1"></div>' : ''}
            </div>
            <div class="pt-0.5">
              <p class="font-semibold text-slate-900 mb-0.5">${escapeHtml(item.title)}</p>
              <p class="text-[11px] mb-1">${escapeHtml(item.body)}</p>
              <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-100 text-slate-600 border border-slate-200 text-[10px]">
                <i class="fa-solid fa-tag text-[9px]"></i>
                ${escapeHtml(item.tag)}
              </span>
            </div>
          `;
          list.appendChild(li);
        });

        if (rawItems.length > 2) {
          const extra = document.createElement('p');
          extra.className = 'mt-3 text-[10px] text-slate-400';
          extra.textContent = `Showing top 2 of ${rawItems.length} insights.`;
          list.appendChild(extra);
        }
      }

      function escapeHtml(str) {
        return String(str)
          .replace(/&/g, '&amp;')
          .replace(/</g, '&lt;')
          .replace(/>/g, '&gt;');
      }

      switchDashboardPage('overview');
    });

    function scrollToSection(id) {
      const el = document.getElementById(id);
      if (!el) return;
      window.scrollTo({
        top: el.getBoundingClientRect().top + window.scrollY - 80,
        behavior: 'smooth'
      });
    }

    function toggleSideSection(key) {
      const body = document.getElementById(`side-${key}-children`);
      const chevron = document.getElementById(`side-${key}-chevron`);
      if (!body || !chevron) return;
      body.classList.toggle('hidden');
      chevron.classList.toggle('rotate-90');
    }

    function switchDashboardPage(pageKey) {
      const pages = document.querySelectorAll('.dash-page');
      pages.forEach(page => {
        page.classList.add('hidden');
      });
      const target = document.getElementById('page-' + pageKey);
      if (target) {
        target.classList.remove('hidden');
        window.scrollTo({ top: 0, behavior: 'auto' });
      }

      const navButtons = document.querySelectorAll('[data-page]');
      navButtons.forEach(btn => btn.classList.remove('side-item-active'));
      const activeButtons = document.querySelectorAll('[data-page="' + pageKey + '"]');
      activeButtons.forEach(btn => btn.classList.add('side-item-active'));
    }
  </script>
</body>
</html>
